"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _atom = require("atom");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
var _marker = _interopRequireDefault(require("../atom/marker"));
var _decoration = _interopRequireDefault(require("../atom/decoration"));
var _reviewsItem = _interopRequireDefault(require("../items/reviews-item"));
var _commentGutterDecorationController = _interopRequireDefault(require("../controllers/comment-gutter-decoration-controller"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class EditorCommentDecorationsController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "openReviewThread", async threadId => {
      const uri = _reviewsItem.default.buildURI({
        host: this.props.endpoint.getHost(),
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir
      });
      const reviewsItem = await this.props.workspace.open(uri, {
        searchAllPanes: true
      });
      reviewsItem.jumpToThread(threadId);
      (0, _reporterProxy.addEvent)('open-review-thread', {
        package: 'github',
        from: this.constructor.name
      });
    });
    this.rangesByRootID = new Map();
  }
  shouldComponentUpdate(nextProps) {
    return translationDigestFrom(this.props) !== translationDigestFrom(nextProps);
  }
  render() {
    if (!this.props.commentTranslationsForPath) {
      return null;
    }
    if (this.props.commentTranslationsForPath.removed && this.props.threadsForPath.length > 0) {
      const [firstThread] = this.props.threadsForPath;
      return _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: _atom.Range.fromObject([[0, 0], [0, 0]])
      }, _react.default.createElement(_decoration.default, {
        type: "block",
        editor: this.props.editor,
        className: "github-EditorComment-omitted"
      }, _react.default.createElement("p", null, "This file has review comments, but its patch is too large for Atom to load."), _react.default.createElement("p", null, "Review comments may still be viewed within", _react.default.createElement("button", {
        className: "btn",
        onClick: () => this.openReviewThread(firstThread.threadID)
      }, "the review tab"), ".")));
    }
    return this.props.threadsForPath.map(thread => {
      const range = this.getRangeForThread(thread);
      if (!range) {
        return null;
      }
      return _react.default.createElement(_react.Fragment, {
        key: `github-editor-review-decoration-${thread.rootCommentID}`
      }, _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: range,
        didChange: evt => this.markerDidChange(thread.rootCommentID, evt)
      }, _react.default.createElement(_decoration.default, {
        type: "line",
        editor: this.props.editor,
        className: "github-editorCommentHighlight",
        omitEmptyLastRow: false
      })), _react.default.createElement(_commentGutterDecorationController.default, {
        commentRow: range.start.row,
        threadId: thread.threadID,
        editor: this.props.editor,
        workspace: this.props.workspace,
        endpoint: this.props.endpoint,
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir,
        parent: this.constructor.name
      }));
    });
  }
  markerDidChange(rootCommentID, {
    newRange
  }) {
    this.rangesByRootID.set(rootCommentID, _atom.Range.fromObject(newRange));
  }
  getRangeForThread(thread) {
    const translations = this.props.commentTranslationsForPath;
    if (thread.position === null) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    let adjustedPosition = translations.diffToFilePosition.get(thread.position);
    if (!adjustedPosition) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    if (translations.fileTranslations) {
      adjustedPosition = translations.fileTranslations.get(adjustedPosition).newPosition;
      if (!adjustedPosition) {
        this.rangesByRootID.delete(thread.rootCommentID);
        return null;
      }
    }
    const editorRow = adjustedPosition - 1;
    let localRange = this.rangesByRootID.get(thread.rootCommentID);
    if (!localRange) {
      localRange = _atom.Range.fromObject([[editorRow, 0], [editorRow, Infinity]]);
      this.rangesByRootID.set(thread.rootCommentID, localRange);
    }
    return localRange;
  }
}
exports.default = EditorCommentDecorationsController;
_defineProperty(EditorCommentDecorationsController, "propTypes", {
  endpoint: _propTypes2.EndpointPropType.isRequired,
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  number: _propTypes.default.number.isRequired,
  workdir: _propTypes.default.string.isRequired,
  workspace: _propTypes.default.object.isRequired,
  editor: _propTypes.default.object.isRequired,
  threadsForPath: _propTypes.default.arrayOf(_propTypes.default.shape({
    rootCommentID: _propTypes.default.string.isRequired,
    position: _propTypes.default.number,
    threadID: _propTypes.default.string.isRequired
  })).isRequired,
  commentTranslationsForPath: _propTypes.default.shape({
    diffToFilePosition: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }).isRequired,
    fileTranslations: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }),
    removed: _propTypes.default.bool.isRequired,
    digest: _propTypes.default.string
  })
});
function translationDigestFrom(props) {
  const translations = props.commentTranslationsForPath;
  return translations ? translations.digest : null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9hdG9tIiwiX3Byb3BUeXBlczIiLCJfcmVwb3J0ZXJQcm94eSIsIl9tYXJrZXIiLCJfZGVjb3JhdGlvbiIsIl9yZXZpZXdzSXRlbSIsIl9jb21tZW50R3V0dGVyRGVjb3JhdGlvbkNvbnRyb2xsZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJfZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiRWRpdG9yQ29tbWVudERlY29yYXRpb25zQ29udHJvbGxlciIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInRocmVhZElkIiwidXJpIiwiUmV2aWV3c0l0ZW0iLCJidWlsZFVSSSIsImhvc3QiLCJlbmRwb2ludCIsImdldEhvc3QiLCJvd25lciIsInJlcG8iLCJudW1iZXIiLCJ3b3JrZGlyIiwicmV2aWV3c0l0ZW0iLCJ3b3Jrc3BhY2UiLCJvcGVuIiwic2VhcmNoQWxsUGFuZXMiLCJqdW1wVG9UaHJlYWQiLCJhZGRFdmVudCIsInBhY2thZ2UiLCJmcm9tIiwibmFtZSIsInJhbmdlc0J5Um9vdElEIiwiTWFwIiwic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwibmV4dFByb3BzIiwidHJhbnNsYXRpb25EaWdlc3RGcm9tIiwicmVuZGVyIiwiY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGgiLCJyZW1vdmVkIiwidGhyZWFkc0ZvclBhdGgiLCJsZW5ndGgiLCJmaXJzdFRocmVhZCIsImNyZWF0ZUVsZW1lbnQiLCJlZGl0b3IiLCJleGNsdXNpdmUiLCJpbnZhbGlkYXRlIiwiYnVmZmVyUmFuZ2UiLCJSYW5nZSIsImZyb21PYmplY3QiLCJ0eXBlIiwiY2xhc3NOYW1lIiwib25DbGljayIsIm9wZW5SZXZpZXdUaHJlYWQiLCJ0aHJlYWRJRCIsIm1hcCIsInRocmVhZCIsInJhbmdlIiwiZ2V0UmFuZ2VGb3JUaHJlYWQiLCJGcmFnbWVudCIsInJvb3RDb21tZW50SUQiLCJkaWRDaGFuZ2UiLCJldnQiLCJtYXJrZXJEaWRDaGFuZ2UiLCJvbWl0RW1wdHlMYXN0Um93IiwiY29tbWVudFJvdyIsInN0YXJ0Iiwicm93IiwicGFyZW50IiwibmV3UmFuZ2UiLCJ0cmFuc2xhdGlvbnMiLCJwb3NpdGlvbiIsImRlbGV0ZSIsImFkanVzdGVkUG9zaXRpb24iLCJkaWZmVG9GaWxlUG9zaXRpb24iLCJmaWxlVHJhbnNsYXRpb25zIiwibmV3UG9zaXRpb24iLCJlZGl0b3JSb3ciLCJsb2NhbFJhbmdlIiwiSW5maW5pdHkiLCJleHBvcnRzIiwiRW5kcG9pbnRQcm9wVHlwZSIsImlzUmVxdWlyZWQiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJvYmplY3QiLCJhcnJheU9mIiwic2hhcGUiLCJmdW5jIiwiYm9vbCIsImRpZ2VzdCJdLCJzb3VyY2VzIjpbImVkaXRvci1jb21tZW50LWRlY29yYXRpb25zLWNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7RnJhZ21lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge1JhbmdlfSBmcm9tICdhdG9tJztcblxuaW1wb3J0IHtFbmRwb2ludFByb3BUeXBlfSBmcm9tICcuLi9wcm9wLXR5cGVzJztcbmltcG9ydCB7YWRkRXZlbnR9IGZyb20gJy4uL3JlcG9ydGVyLXByb3h5JztcbmltcG9ydCBNYXJrZXIgZnJvbSAnLi4vYXRvbS9tYXJrZXInO1xuaW1wb3J0IERlY29yYXRpb24gZnJvbSAnLi4vYXRvbS9kZWNvcmF0aW9uJztcbmltcG9ydCBSZXZpZXdzSXRlbSBmcm9tICcuLi9pdGVtcy9yZXZpZXdzLWl0ZW0nO1xuaW1wb3J0IENvbW1lbnRHdXR0ZXJEZWNvcmF0aW9uQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9jb21tZW50LWd1dHRlci1kZWNvcmF0aW9uLWNvbnRyb2xsZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGl0b3JDb21tZW50RGVjb3JhdGlvbnNDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBlbmRwb2ludDogRW5kcG9pbnRQcm9wVHlwZS5pc1JlcXVpcmVkLFxuICAgIG93bmVyOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgcmVwbzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIG51bWJlcjogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIHdvcmtkaXI6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgIHdvcmtzcGFjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGVkaXRvcjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRocmVhZHNGb3JQYXRoOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgcm9vdENvbW1lbnRJRDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgcG9zaXRpb246IFByb3BUeXBlcy5udW1iZXIsXG4gICAgICB0aHJlYWRJRDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIH0pKS5pc1JlcXVpcmVkLFxuICAgIGNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgZGlmZlRvRmlsZVBvc2l0aW9uOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBnZXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICB9KS5pc1JlcXVpcmVkLFxuICAgICAgZmlsZVRyYW5zbGF0aW9uczogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgZ2V0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgfSksXG4gICAgICByZW1vdmVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgICAgZGlnZXN0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIH0pLFxuICB9XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnJhbmdlc0J5Um9vdElEID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgIHJldHVybiB0cmFuc2xhdGlvbkRpZ2VzdEZyb20odGhpcy5wcm9wcykgIT09IHRyYW5zbGF0aW9uRGlnZXN0RnJvbShuZXh0UHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5wcm9wcy5jb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGgucmVtb3ZlZCAmJiB0aGlzLnByb3BzLnRocmVhZHNGb3JQYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IFtmaXJzdFRocmVhZF0gPSB0aGlzLnByb3BzLnRocmVhZHNGb3JQYXRoO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8TWFya2VyXG4gICAgICAgICAgZWRpdG9yPXt0aGlzLnByb3BzLmVkaXRvcn1cbiAgICAgICAgICBleGNsdXNpdmU9e3RydWV9XG4gICAgICAgICAgaW52YWxpZGF0ZT1cInN1cnJvdW5kXCJcbiAgICAgICAgICBidWZmZXJSYW5nZT17UmFuZ2UuZnJvbU9iamVjdChbWzAsIDBdLCBbMCwgMF1dKX0+XG5cbiAgICAgICAgICA8RGVjb3JhdGlvbiB0eXBlPVwiYmxvY2tcIiBlZGl0b3I9e3RoaXMucHJvcHMuZWRpdG9yfSBjbGFzc05hbWU9XCJnaXRodWItRWRpdG9yQ29tbWVudC1vbWl0dGVkXCI+XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgVGhpcyBmaWxlIGhhcyByZXZpZXcgY29tbWVudHMsIGJ1dCBpdHMgcGF0Y2ggaXMgdG9vIGxhcmdlIGZvciBBdG9tIHRvIGxvYWQuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgUmV2aWV3IGNvbW1lbnRzIG1heSBzdGlsbCBiZSB2aWV3ZWQgd2l0aGluXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMub3BlblJldmlld1RocmVhZChmaXJzdFRocmVhZC50aHJlYWRJRCl9PnRoZSByZXZpZXcgdGFiPC9idXR0b24+LlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvRGVjb3JhdGlvbj5cblxuICAgICAgICA8L01hcmtlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvcHMudGhyZWFkc0ZvclBhdGgubWFwKHRocmVhZCA9PiB7XG4gICAgICBjb25zdCByYW5nZSA9IHRoaXMuZ2V0UmFuZ2VGb3JUaHJlYWQodGhyZWFkKTtcbiAgICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxGcmFnbWVudCBrZXk9e2BnaXRodWItZWRpdG9yLXJldmlldy1kZWNvcmF0aW9uLSR7dGhyZWFkLnJvb3RDb21tZW50SUR9YH0+XG4gICAgICAgICAgPE1hcmtlclxuICAgICAgICAgICAgZWRpdG9yPXt0aGlzLnByb3BzLmVkaXRvcn1cbiAgICAgICAgICAgIGV4Y2x1c2l2ZT17dHJ1ZX1cbiAgICAgICAgICAgIGludmFsaWRhdGU9XCJzdXJyb3VuZFwiXG4gICAgICAgICAgICBidWZmZXJSYW5nZT17cmFuZ2V9XG4gICAgICAgICAgICBkaWRDaGFuZ2U9e2V2dCA9PiB0aGlzLm1hcmtlckRpZENoYW5nZSh0aHJlYWQucm9vdENvbW1lbnRJRCwgZXZ0KX0+XG5cbiAgICAgICAgICAgIDxEZWNvcmF0aW9uXG4gICAgICAgICAgICAgIHR5cGU9XCJsaW5lXCJcbiAgICAgICAgICAgICAgZWRpdG9yPXt0aGlzLnByb3BzLmVkaXRvcn1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ2l0aHViLWVkaXRvckNvbW1lbnRIaWdobGlnaHRcIlxuICAgICAgICAgICAgICBvbWl0RW1wdHlMYXN0Um93PXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8L01hcmtlcj5cbiAgICAgICAgICA8Q29tbWVudEd1dHRlckRlY29yYXRpb25Db250cm9sbGVyXG4gICAgICAgICAgICBjb21tZW50Um93PXtyYW5nZS5zdGFydC5yb3d9XG4gICAgICAgICAgICB0aHJlYWRJZD17dGhyZWFkLnRocmVhZElEfVxuICAgICAgICAgICAgZWRpdG9yPXt0aGlzLnByb3BzLmVkaXRvcn1cbiAgICAgICAgICAgIHdvcmtzcGFjZT17dGhpcy5wcm9wcy53b3Jrc3BhY2V9XG4gICAgICAgICAgICBlbmRwb2ludD17dGhpcy5wcm9wcy5lbmRwb2ludH1cbiAgICAgICAgICAgIG93bmVyPXt0aGlzLnByb3BzLm93bmVyfVxuICAgICAgICAgICAgcmVwbz17dGhpcy5wcm9wcy5yZXBvfVxuICAgICAgICAgICAgbnVtYmVyPXt0aGlzLnByb3BzLm51bWJlcn1cbiAgICAgICAgICAgIHdvcmtkaXI9e3RoaXMucHJvcHMud29ya2Rpcn1cbiAgICAgICAgICAgIHBhcmVudD17dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRnJhZ21lbnQ+XG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgbWFya2VyRGlkQ2hhbmdlKHJvb3RDb21tZW50SUQsIHtuZXdSYW5nZX0pIHtcbiAgICB0aGlzLnJhbmdlc0J5Um9vdElELnNldChyb290Q29tbWVudElELCBSYW5nZS5mcm9tT2JqZWN0KG5ld1JhbmdlKSk7XG4gIH1cblxuICBnZXRSYW5nZUZvclRocmVhZCh0aHJlYWQpIHtcbiAgICBjb25zdCB0cmFuc2xhdGlvbnMgPSB0aGlzLnByb3BzLmNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoO1xuXG4gICAgaWYgKHRocmVhZC5wb3NpdGlvbiA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5yYW5nZXNCeVJvb3RJRC5kZWxldGUodGhyZWFkLnJvb3RDb21tZW50SUQpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGFkanVzdGVkUG9zaXRpb24gPSB0cmFuc2xhdGlvbnMuZGlmZlRvRmlsZVBvc2l0aW9uLmdldCh0aHJlYWQucG9zaXRpb24pO1xuICAgIGlmICghYWRqdXN0ZWRQb3NpdGlvbikge1xuICAgICAgdGhpcy5yYW5nZXNCeVJvb3RJRC5kZWxldGUodGhyZWFkLnJvb3RDb21tZW50SUQpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRyYW5zbGF0aW9ucy5maWxlVHJhbnNsYXRpb25zKSB7XG4gICAgICBhZGp1c3RlZFBvc2l0aW9uID0gdHJhbnNsYXRpb25zLmZpbGVUcmFuc2xhdGlvbnMuZ2V0KGFkanVzdGVkUG9zaXRpb24pLm5ld1Bvc2l0aW9uO1xuICAgICAgaWYgKCFhZGp1c3RlZFBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzQnlSb290SUQuZGVsZXRlKHRocmVhZC5yb290Q29tbWVudElEKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdG9yUm93ID0gYWRqdXN0ZWRQb3NpdGlvbiAtIDE7XG5cbiAgICBsZXQgbG9jYWxSYW5nZSA9IHRoaXMucmFuZ2VzQnlSb290SUQuZ2V0KHRocmVhZC5yb290Q29tbWVudElEKTtcbiAgICBpZiAoIWxvY2FsUmFuZ2UpIHtcbiAgICAgIGxvY2FsUmFuZ2UgPSBSYW5nZS5mcm9tT2JqZWN0KFtbZWRpdG9yUm93LCAwXSwgW2VkaXRvclJvdywgSW5maW5pdHldXSk7XG4gICAgICB0aGlzLnJhbmdlc0J5Um9vdElELnNldCh0aHJlYWQucm9vdENvbW1lbnRJRCwgbG9jYWxSYW5nZSk7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbFJhbmdlO1xuICB9XG5cbiAgb3BlblJldmlld1RocmVhZCA9IGFzeW5jIHRocmVhZElkID0+IHtcbiAgICBjb25zdCB1cmkgPSBSZXZpZXdzSXRlbS5idWlsZFVSSSh7XG4gICAgICBob3N0OiB0aGlzLnByb3BzLmVuZHBvaW50LmdldEhvc3QoKSxcbiAgICAgIG93bmVyOiB0aGlzLnByb3BzLm93bmVyLFxuICAgICAgcmVwbzogdGhpcy5wcm9wcy5yZXBvLFxuICAgICAgbnVtYmVyOiB0aGlzLnByb3BzLm51bWJlcixcbiAgICAgIHdvcmtkaXI6IHRoaXMucHJvcHMud29ya2RpcixcbiAgICB9KTtcbiAgICBjb25zdCByZXZpZXdzSXRlbSA9IGF3YWl0IHRoaXMucHJvcHMud29ya3NwYWNlLm9wZW4odXJpLCB7c2VhcmNoQWxsUGFuZXM6IHRydWV9KTtcbiAgICByZXZpZXdzSXRlbS5qdW1wVG9UaHJlYWQodGhyZWFkSWQpO1xuICAgIGFkZEV2ZW50KCdvcGVuLXJldmlldy10aHJlYWQnLCB7cGFja2FnZTogJ2dpdGh1YicsIGZyb206IHRoaXMuY29uc3RydWN0b3IubmFtZX0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0aW9uRGlnZXN0RnJvbShwcm9wcykge1xuICBjb25zdCB0cmFuc2xhdGlvbnMgPSBwcm9wcy5jb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aDtcbiAgcmV0dXJuIHRyYW5zbGF0aW9ucyA/IHRyYW5zbGF0aW9ucy5kaWdlc3QgOiBudWxsO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxXQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxjQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxPQUFBLEdBQUFKLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBTyxXQUFBLEdBQUFMLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBUSxZQUFBLEdBQUFOLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBUyxrQ0FBQSxHQUFBUCxzQkFBQSxDQUFBRixPQUFBO0FBQW9HLFNBQUFFLHVCQUFBUSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsU0FBQUcseUJBQUFDLENBQUEsNkJBQUFDLE9BQUEsbUJBQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEsQ0FBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQWYsd0JBQUFlLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSCxVQUFBLFNBQUFHLENBQUEsZUFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxX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