"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _atom = require("atom");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
var _marker = _interopRequireDefault(require("../atom/marker"));
var _decoration = _interopRequireDefault(require("../atom/decoration"));
var _reviewsItem = _interopRequireDefault(require("../items/reviews-item"));
var _commentGutterDecorationController = _interopRequireDefault(require("../controllers/comment-gutter-decoration-controller"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class EditorCommentDecorationsController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "openReviewThread", async threadId => {
      const uri = _reviewsItem.default.buildURI({
        host: this.props.endpoint.getHost(),
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir
      });
      const reviewsItem = await this.props.workspace.open(uri, {
        searchAllPanes: true
      });
      reviewsItem.jumpToThread(threadId);
      (0, _reporterProxy.addEvent)('open-review-thread', {
        package: 'github',
        from: this.constructor.name
      });
    });
    this.rangesByRootID = new Map();
  }
  shouldComponentUpdate(nextProps) {
    return translationDigestFrom(this.props) !== translationDigestFrom(nextProps);
  }
  render() {
    if (!this.props.commentTranslationsForPath) {
      return null;
    }
    if (this.props.commentTranslationsForPath.removed && this.props.threadsForPath.length > 0) {
      const [firstThread] = this.props.threadsForPath;
      return _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: _atom.Range.fromObject([[0, 0], [0, 0]])
      }, _react.default.createElement(_decoration.default, {
        type: "block",
        editor: this.props.editor,
        className: "github-EditorComment-omitted"
      }, _react.default.createElement("p", null, "This file has review comments, but its patch is too large for Atom to load."), _react.default.createElement("p", null, "Review comments may still be viewed within", _react.default.createElement("button", {
        className: "btn",
        onClick: () => this.openReviewThread(firstThread.threadID)
      }, "the review tab"), ".")));
    }
    return this.props.threadsForPath.map(thread => {
      const range = this.getRangeForThread(thread);
      if (!range) {
        return null;
      }
      return _react.default.createElement(_react.Fragment, {
        key: `github-editor-review-decoration-${thread.rootCommentID}`
      }, _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: range,
        didChange: evt => this.markerDidChange(thread.rootCommentID, evt)
      }, _react.default.createElement(_decoration.default, {
        type: "line",
        editor: this.props.editor,
        className: "github-editorCommentHighlight",
        omitEmptyLastRow: false
      })), _react.default.createElement(_commentGutterDecorationController.default, {
        commentRow: range.start.row,
        threadId: thread.threadID,
        editor: this.props.editor,
        workspace: this.props.workspace,
        endpoint: this.props.endpoint,
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir,
        parent: this.constructor.name
      }));
    });
  }
  markerDidChange(rootCommentID, {
    newRange
  }) {
    this.rangesByRootID.set(rootCommentID, _atom.Range.fromObject(newRange));
  }
  getRangeForThread(thread) {
    const translations = this.props.commentTranslationsForPath;
    if (thread.position === null) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    let adjustedPosition = translations.diffToFilePosition.get(thread.position);
    if (!adjustedPosition) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    if (translations.fileTranslations) {
      adjustedPosition = translations.fileTranslations.get(adjustedPosition).newPosition;
      if (!adjustedPosition) {
        this.rangesByRootID.delete(thread.rootCommentID);
        return null;
      }
    }
    const editorRow = adjustedPosition - 1;
    let localRange = this.rangesByRootID.get(thread.rootCommentID);
    if (!localRange) {
      localRange = _atom.Range.fromObject([[editorRow, 0], [editorRow, Infinity]]);
      this.rangesByRootID.set(thread.rootCommentID, localRange);
    }
    return localRange;
  }
}
exports.default = EditorCommentDecorationsController;
_defineProperty(EditorCommentDecorationsController, "propTypes", {
  endpoint: _propTypes2.EndpointPropType.isRequired,
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  number: _propTypes.default.number.isRequired,
  workdir: _propTypes.default.string.isRequired,
  workspace: _propTypes.default.object.isRequired,
  editor: _propTypes.default.object.isRequired,
  threadsForPath: _propTypes.default.arrayOf(_propTypes.default.shape({
    rootCommentID: _propTypes.default.string.isRequired,
    position: _propTypes.default.number,
    threadID: _propTypes.default.string.isRequired
  })).isRequired,
  commentTranslationsForPath: _propTypes.default.shape({
    diffToFilePosition: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }).isRequired,
    fileTranslations: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }),
    removed: _propTypes.default.bool.isRequired,
    digest: _propTypes.default.string
  })
});
function translationDigestFrom(props) {
  const translations = props.commentTranslationsForPath;
  return translations ? translations.digest : null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9hdG9tIiwiX3Byb3BUeXBlczIiLCJfcmVwb3J0ZXJQcm94eSIsIl9tYXJrZXIiLCJfZGVjb3JhdGlvbiIsIl9yZXZpZXdzSXRlbSIsIl9jb21tZW50R3V0dGVyRGVjb3JhdGlvbkNvbnRyb2xsZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJfZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJFZGl0b3JDb21tZW50RGVjb3JhdGlvbnNDb250cm9sbGVyIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwidGhyZWFkSWQiLCJ1cmkiLCJSZXZpZXdzSXRlbSIsImJ1aWxkVVJJIiwiaG9zdCIsImVuZHBvaW50IiwiZ2V0SG9zdCIsIm93bmVyIiwicmVwbyIsIm51bWJlciIsIndvcmtkaXIiLCJyZXZpZXdzSXRlbSIsIndvcmtzcGFjZSIsIm9wZW4iLCJzZWFyY2hBbGxQYW5lcyIsImp1bXBUb1RocmVhZCIsImFkZEV2ZW50IiwicGFja2FnZSIsImZyb20iLCJuYW1lIiwicmFuZ2VzQnlSb290SUQiLCJNYXAiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJuZXh0UHJvcHMiLCJ0cmFuc2xhdGlvbkRpZ2VzdEZyb20iLCJyZW5kZXIiLCJjb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aCIsInJlbW92ZWQiLCJ0aHJlYWRzRm9yUGF0aCIsImxlbmd0aCIsImZpcnN0VGhyZWFkIiwiY3JlYXRlRWxlbWVudCIsImVkaXRvciIsImV4Y2x1c2l2ZSIsImludmFsaWRhdGUiLCJidWZmZXJSYW5nZSIsIlJhbmdlIiwiZnJvbU9iamVjdCIsInR5cGUiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwib3BlblJldmlld1RocmVhZCIsInRocmVhZElEIiwibWFwIiwidGhyZWFkIiwicmFuZ2UiLCJnZXRSYW5nZUZvclRocmVhZCIsIkZyYWdtZW50Iiwicm9vdENvbW1lbnRJRCIsImRpZENoYW5nZSIsImV2dCIsIm1hcmtlckRpZENoYW5nZSIsIm9taXRFbXB0eUxhc3RSb3ciLCJjb21tZW50Um93Iiwic3RhcnQiLCJyb3ciLCJwYXJlbnQiLCJuZXdSYW5nZSIsInRyYW5zbGF0aW9ucyIsInBvc2l0aW9uIiwiZGVsZXRlIiwiYWRqdXN0ZWRQb3NpdGlvbiIsImRpZmZUb0ZpbGVQb3NpdGlvbiIsImZpbGVUcmFuc2xhdGlvbnMiLCJuZXdQb3NpdGlvbiIsImVkaXRvclJvdyIsImxvY2FsUmFuZ2UiLCJJbmZpbml0eSIsImV4cG9ydHMiLCJFbmRwb2ludFByb3BUeXBlIiwiaXNSZXF1aXJlZCIsIlByb3BUeXBlcyIsInN0cmluZyIsIm9iamVjdCIsImFycmF5T2YiLCJzaGFwZSIsImZ1bmMiLCJib29sIiwiZGlnZXN0Il0sInNvdXJjZXMiOlsiZWRpdG9yLWNvbW1lbnQtZGVjb3JhdGlvbnMtY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtGcmFnbWVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7UmFuZ2V9IGZyb20gJ2F0b20nO1xuXG5pbXBvcnQge0VuZHBvaW50UHJvcFR5cGV9IGZyb20gJy4uL3Byb3AtdHlwZXMnO1xuaW1wb3J0IHthZGRFdmVudH0gZnJvbSAnLi4vcmVwb3J0ZXItcHJveHknO1xuaW1wb3J0IE1hcmtlciBmcm9tICcuLi9hdG9tL21hcmtlcic7XG5pbXBvcnQgRGVjb3JhdGlvbiBmcm9tICcuLi9hdG9tL2RlY29yYXRpb24nO1xuaW1wb3J0IFJldmlld3NJdGVtIGZyb20gJy4uL2l0ZW1zL3Jldmlld3MtaXRlbSc7XG5pbXBvcnQgQ29tbWVudEd1dHRlckRlY29yYXRpb25Db250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2NvbW1lbnQtZ3V0dGVyLWRlY29yYXRpb24tY29udHJvbGxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRvckNvbW1lbnREZWNvcmF0aW9uc0NvbnRyb2xsZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGVuZHBvaW50OiBFbmRwb2ludFByb3BUeXBlLmlzUmVxdWlyZWQsXG4gICAgb3duZXI6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICByZXBvOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgbnVtYmVyOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgd29ya2RpcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgd29ya3NwYWNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgZWRpdG9yOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdGhyZWFkc0ZvclBhdGg6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICByb290Q29tbWVudElEOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICBwb3NpdGlvbjogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgIHRocmVhZElEOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgfSkpLmlzUmVxdWlyZWQsXG4gICAgY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGg6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBkaWZmVG9GaWxlUG9zaXRpb246IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIGdldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgICBmaWxlVHJhbnNsYXRpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBnZXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICB9KSxcbiAgICAgIHJlbW92ZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgICBkaWdlc3Q6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfSksXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMucmFuZ2VzQnlSb290SUQgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uRGlnZXN0RnJvbSh0aGlzLnByb3BzKSAhPT0gdHJhbnNsYXRpb25EaWdlc3RGcm9tKG5leHRQcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aC5yZW1vdmVkICYmIHRoaXMucHJvcHMudGhyZWFkc0ZvclBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgW2ZpcnN0VGhyZWFkXSA9IHRoaXMucHJvcHMudGhyZWFkc0ZvclBhdGg7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxNYXJrZXJcbiAgICAgICAgICBlZGl0b3I9e3RoaXMucHJvcHMuZWRpdG9yfVxuICAgICAgICAgIGV4Y2x1c2l2ZT17dHJ1ZX1cbiAgICAgICAgICBpbnZhbGlkYXRlPVwic3Vycm91bmRcIlxuICAgICAgICAgIGJ1ZmZlclJhbmdlPXtSYW5nZS5mcm9tT2JqZWN0KFtbMCwgMF0sIFswLCAwXV0pfT5cblxuICAgICAgICAgIDxEZWNvcmF0aW9uIHR5cGU9XCJibG9ja1wiIGVkaXRvcj17dGhpcy5wcm9wcy5lZGl0b3J9IGNsYXNzTmFtZT1cImdpdGh1Yi1FZGl0b3JDb21tZW50LW9taXR0ZWRcIj5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICBUaGlzIGZpbGUgaGFzIHJldmlldyBjb21tZW50cywgYnV0IGl0cyBwYXRjaCBpcyB0b28gbGFyZ2UgZm9yIEF0b20gdG8gbG9hZC5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICBSZXZpZXcgY29tbWVudHMgbWF5IHN0aWxsIGJlIHZpZXdlZCB3aXRoaW5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5vcGVuUmV2aWV3VGhyZWFkKGZpcnN0VGhyZWFkLnRocmVhZElEKX0+dGhlIHJldmlldyB0YWI8L2J1dHRvbj4uXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9EZWNvcmF0aW9uPlxuXG4gICAgICAgIDwvTWFya2VyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy50aHJlYWRzRm9yUGF0aC5tYXAodGhyZWFkID0+IHtcbiAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy5nZXRSYW5nZUZvclRocmVhZCh0aHJlYWQpO1xuICAgICAgaWYgKCFyYW5nZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEZyYWdtZW50IGtleT17YGdpdGh1Yi1lZGl0b3ItcmV2aWV3LWRlY29yYXRpb24tJHt0aHJlYWQucm9vdENvbW1lbnRJRH1gfT5cbiAgICAgICAgICA8TWFya2VyXG4gICAgICAgICAgICBlZGl0b3I9e3RoaXMucHJvcHMuZWRpdG9yfVxuICAgICAgICAgICAgZXhjbHVzaXZlPXt0cnVlfVxuICAgICAgICAgICAgaW52YWxpZGF0ZT1cInN1cnJvdW5kXCJcbiAgICAgICAgICAgIGJ1ZmZlclJhbmdlPXtyYW5nZX1cbiAgICAgICAgICAgIGRpZENoYW5nZT17ZXZ0ID0+IHRoaXMubWFya2VyRGlkQ2hhbmdlKHRocmVhZC5yb290Q29tbWVudElELCBldnQpfT5cblxuICAgICAgICAgICAgPERlY29yYXRpb25cbiAgICAgICAgICAgICAgdHlwZT1cImxpbmVcIlxuICAgICAgICAgICAgICBlZGl0b3I9e3RoaXMucHJvcHMuZWRpdG9yfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnaXRodWItZWRpdG9yQ29tbWVudEhpZ2hsaWdodFwiXG4gICAgICAgICAgICAgIG9taXRFbXB0eUxhc3RSb3c9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgIDwvTWFya2VyPlxuICAgICAgICAgIDxDb21tZW50R3V0dGVyRGVjb3JhdGlvbkNvbnRyb2xsZXJcbiAgICAgICAgICAgIGNvbW1lbnRSb3c9e3JhbmdlLnN0YXJ0LnJvd31cbiAgICAgICAgICAgIHRocmVhZElkPXt0aHJlYWQudGhyZWFkSUR9XG4gICAgICAgICAgICBlZGl0b3I9e3RoaXMucHJvcHMuZWRpdG9yfVxuICAgICAgICAgICAgd29ya3NwYWNlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgICAgIGVuZHBvaW50PXt0aGlzLnByb3BzLmVuZHBvaW50fVxuICAgICAgICAgICAgb3duZXI9e3RoaXMucHJvcHMub3duZXJ9XG4gICAgICAgICAgICByZXBvPXt0aGlzLnByb3BzLnJlcG99XG4gICAgICAgICAgICBudW1iZXI9e3RoaXMucHJvcHMubnVtYmVyfVxuICAgICAgICAgICAgd29ya2Rpcj17dGhpcy5wcm9wcy53b3JrZGlyfVxuICAgICAgICAgICAgcGFyZW50PXt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9GcmFnbWVudD5cbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBtYXJrZXJEaWRDaGFuZ2Uocm9vdENvbW1lbnRJRCwge25ld1JhbmdlfSkge1xuICAgIHRoaXMucmFuZ2VzQnlSb290SUQuc2V0KHJvb3RDb21tZW50SUQsIFJhbmdlLmZyb21PYmplY3QobmV3UmFuZ2UpKTtcbiAgfVxuXG4gIGdldFJhbmdlRm9yVGhyZWFkKHRocmVhZCkge1xuICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHRoaXMucHJvcHMuY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGg7XG5cbiAgICBpZiAodGhyZWFkLnBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJhbmdlc0J5Um9vdElELmRlbGV0ZSh0aHJlYWQucm9vdENvbW1lbnRJRCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgYWRqdXN0ZWRQb3NpdGlvbiA9IHRyYW5zbGF0aW9ucy5kaWZmVG9GaWxlUG9zaXRpb24uZ2V0KHRocmVhZC5wb3NpdGlvbik7XG4gICAgaWYgKCFhZGp1c3RlZFBvc2l0aW9uKSB7XG4gICAgICB0aGlzLnJhbmdlc0J5Um9vdElELmRlbGV0ZSh0aHJlYWQucm9vdENvbW1lbnRJRCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNsYXRpb25zLmZpbGVUcmFuc2xhdGlvbnMpIHtcbiAgICAgIGFkanVzdGVkUG9zaXRpb24gPSB0cmFuc2xhdGlvbnMuZmlsZVRyYW5zbGF0aW9ucy5nZXQoYWRqdXN0ZWRQb3NpdGlvbikubmV3UG9zaXRpb247XG4gICAgICBpZiAoIWFkanVzdGVkUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5yYW5nZXNCeVJvb3RJRC5kZWxldGUodGhyZWFkLnJvb3RDb21tZW50SUQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBlZGl0b3JSb3cgPSBhZGp1c3RlZFBvc2l0aW9uIC0gMTtcblxuICAgIGxldCBsb2NhbFJhbmdlID0gdGhpcy5yYW5nZXNCeVJvb3RJRC5nZXQodGhyZWFkLnJvb3RDb21tZW50SUQpO1xuICAgIGlmICghbG9jYWxSYW5nZSkge1xuICAgICAgbG9jYWxSYW5nZSA9IFJhbmdlLmZyb21PYmplY3QoW1tlZGl0b3JSb3csIDBdLCBbZWRpdG9yUm93LCBJbmZpbml0eV1dKTtcbiAgICAgIHRoaXMucmFuZ2VzQnlSb290SUQuc2V0KHRocmVhZC5yb290Q29tbWVudElELCBsb2NhbFJhbmdlKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsUmFuZ2U7XG4gIH1cblxuICBvcGVuUmV2aWV3VGhyZWFkID0gYXN5bmMgdGhyZWFkSWQgPT4ge1xuICAgIGNvbnN0IHVyaSA9IFJldmlld3NJdGVtLmJ1aWxkVVJJKHtcbiAgICAgIGhvc3Q6IHRoaXMucHJvcHMuZW5kcG9pbnQuZ2V0SG9zdCgpLFxuICAgICAgb3duZXI6IHRoaXMucHJvcHMub3duZXIsXG4gICAgICByZXBvOiB0aGlzLnByb3BzLnJlcG8sXG4gICAgICBudW1iZXI6IHRoaXMucHJvcHMubnVtYmVyLFxuICAgICAgd29ya2RpcjogdGhpcy5wcm9wcy53b3JrZGlyLFxuICAgIH0pO1xuICAgIGNvbnN0IHJldmlld3NJdGVtID0gYXdhaXQgdGhpcy5wcm9wcy53b3Jrc3BhY2Uub3Blbih1cmksIHtzZWFyY2hBbGxQYW5lczogdHJ1ZX0pO1xuICAgIHJldmlld3NJdGVtLmp1bXBUb1RocmVhZCh0aHJlYWRJZCk7XG4gICAgYWRkRXZlbnQoJ29wZW4tcmV2aWV3LXRocmVhZCcsIHtwYWNrYWdlOiAnZ2l0aHViJywgZnJvbTogdGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRpb25EaWdlc3RGcm9tKHByb3BzKSB7XG4gIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHByb3BzLmNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoO1xuICByZXR1cm4gdHJhbnNsYXRpb25zID8gdHJhbnNsYXRpb25zLmRpZ2VzdCA6IG51bGw7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUgsT0FBQTtBQUVBLElBQUFJLFdBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLGNBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLE9BQUEsR0FBQUosc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFPLFdBQUEsR0FBQUwsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFRLFlBQUEsR0FBQU4sc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFTLGtDQUFBLEdBQUFQLHNCQUFBLENBQUFGLE9BQUE7QUFBb0csU0FBQUUsdUJBQUFRLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxTQUFBRyx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBZix3QkFBQWUsQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFILFVBQUEsU0FBQUcsQ0FBQSxlQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFdBQUFGLE9BQUEsRUFBQUUsQ0FBQSxRQUFBRyxDQUFBLEdBQUFKLHdCQUFBLENB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