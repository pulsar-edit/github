"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _atom = require("atom");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
var _marker = _interopRequireDefault(require("../atom/marker"));
var _decoration = _interopRequireDefault(require("../atom/decoration"));
var _reviewsItem = _interopRequireDefault(require("../items/reviews-item"));
var _commentGutterDecorationController = _interopRequireDefault(require("../controllers/comment-gutter-decoration-controller"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class EditorCommentDecorationsController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "openReviewThread", async threadId => {
      const uri = _reviewsItem.default.buildURI({
        host: this.props.endpoint.getHost(),
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir
      });
      const reviewsItem = await this.props.workspace.open(uri, {
        searchAllPanes: true
      });
      reviewsItem.jumpToThread(threadId);
      (0, _reporterProxy.addEvent)('open-review-thread', {
        package: 'github',
        from: this.constructor.name
      });
    });
    this.rangesByRootID = new Map();
  }
  shouldComponentUpdate(nextProps) {
    return translationDigestFrom(this.props) !== translationDigestFrom(nextProps);
  }
  render() {
    if (!this.props.commentTranslationsForPath) {
      return null;
    }
    if (this.props.commentTranslationsForPath.removed && this.props.threadsForPath.length > 0) {
      const [firstThread] = this.props.threadsForPath;
      return _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: _atom.Range.fromObject([[0, 0], [0, 0]])
      }, _react.default.createElement(_decoration.default, {
        type: "block",
        editor: this.props.editor,
        className: "github-EditorComment-omitted"
      }, _react.default.createElement("p", null, "This file has review comments, but its patch is too large for Atom to load."), _react.default.createElement("p", null, "Review comments may still be viewed within", _react.default.createElement("button", {
        className: "btn",
        onClick: () => this.openReviewThread(firstThread.threadID)
      }, "the review tab"), ".")));
    }
    return this.props.threadsForPath.map(thread => {
      const range = this.getRangeForThread(thread);
      if (!range) {
        return null;
      }
      return _react.default.createElement(_react.Fragment, {
        key: `github-editor-review-decoration-${thread.rootCommentID}`
      }, _react.default.createElement(_marker.default, {
        editor: this.props.editor,
        exclusive: true,
        invalidate: "surround",
        bufferRange: range,
        didChange: evt => this.markerDidChange(thread.rootCommentID, evt)
      }, _react.default.createElement(_decoration.default, {
        type: "line",
        editor: this.props.editor,
        className: "github-editorCommentHighlight",
        omitEmptyLastRow: false
      })), _react.default.createElement(_commentGutterDecorationController.default, {
        commentRow: range.start.row,
        threadId: thread.threadID,
        editor: this.props.editor,
        workspace: this.props.workspace,
        endpoint: this.props.endpoint,
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        workdir: this.props.workdir,
        parent: this.constructor.name
      }));
    });
  }
  markerDidChange(rootCommentID, {
    newRange
  }) {
    this.rangesByRootID.set(rootCommentID, _atom.Range.fromObject(newRange));
  }
  getRangeForThread(thread) {
    const translations = this.props.commentTranslationsForPath;
    if (thread.position === null) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    let adjustedPosition = translations.diffToFilePosition.get(thread.position);
    if (!adjustedPosition) {
      this.rangesByRootID.delete(thread.rootCommentID);
      return null;
    }
    if (translations.fileTranslations) {
      adjustedPosition = translations.fileTranslations.get(adjustedPosition).newPosition;
      if (!adjustedPosition) {
        this.rangesByRootID.delete(thread.rootCommentID);
        return null;
      }
    }
    const editorRow = adjustedPosition - 1;
    let localRange = this.rangesByRootID.get(thread.rootCommentID);
    if (!localRange) {
      localRange = _atom.Range.fromObject([[editorRow, 0], [editorRow, Infinity]]);
      this.rangesByRootID.set(thread.rootCommentID, localRange);
    }
    return localRange;
  }
}
exports.default = EditorCommentDecorationsController;
_defineProperty(EditorCommentDecorationsController, "propTypes", {
  endpoint: _propTypes2.EndpointPropType.isRequired,
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  number: _propTypes.default.number.isRequired,
  workdir: _propTypes.default.string.isRequired,
  workspace: _propTypes.default.object.isRequired,
  editor: _propTypes.default.object.isRequired,
  threadsForPath: _propTypes.default.arrayOf(_propTypes.default.shape({
    rootCommentID: _propTypes.default.string.isRequired,
    position: _propTypes.default.number,
    threadID: _propTypes.default.string.isRequired
  })).isRequired,
  commentTranslationsForPath: _propTypes.default.shape({
    diffToFilePosition: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }).isRequired,
    fileTranslations: _propTypes.default.shape({
      get: _propTypes.default.func.isRequired
    }),
    removed: _propTypes.default.bool.isRequired,
    digest: _propTypes.default.string
  })
});
function translationDigestFrom(props) {
  const translations = props.commentTranslationsForPath;
  return translations ? translations.digest : null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9hdG9tIiwiX3Byb3BUeXBlczIiLCJfcmVwb3J0ZXJQcm94eSIsIl9tYXJrZXIiLCJfZGVjb3JhdGlvbiIsIl9yZXZpZXdzSXRlbSIsIl9jb21tZW50R3V0dGVyRGVjb3JhdGlvbkNvbnRyb2xsZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiX2RlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFyZyIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsImlucHV0IiwiaGludCIsInByaW0iLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsInVuZGVmaW5lZCIsInJlcyIsIlR5cGVFcnJvciIsIk51bWJlciIsIkVkaXRvckNvbW1lbnREZWNvcmF0aW9uc0NvbnRyb2xsZXIiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJ0aHJlYWRJZCIsInVyaSIsIlJldmlld3NJdGVtIiwiYnVpbGRVUkkiLCJob3N0IiwiZW5kcG9pbnQiLCJnZXRIb3N0Iiwib3duZXIiLCJyZXBvIiwibnVtYmVyIiwid29ya2RpciIsInJldmlld3NJdGVtIiwid29ya3NwYWNlIiwib3BlbiIsInNlYXJjaEFsbFBhbmVzIiwianVtcFRvVGhyZWFkIiwiYWRkRXZlbnQiLCJwYWNrYWdlIiwiZnJvbSIsIm5hbWUiLCJyYW5nZXNCeVJvb3RJRCIsIk1hcCIsInNob3VsZENvbXBvbmVudFVwZGF0ZSIsIm5leHRQcm9wcyIsInRyYW5zbGF0aW9uRGlnZXN0RnJvbSIsInJlbmRlciIsImNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoIiwicmVtb3ZlZCIsInRocmVhZHNGb3JQYXRoIiwibGVuZ3RoIiwiZmlyc3RUaHJlYWQiLCJjcmVhdGVFbGVtZW50IiwiZWRpdG9yIiwiZXhjbHVzaXZlIiwiaW52YWxpZGF0ZSIsImJ1ZmZlclJhbmdlIiwiUmFuZ2UiLCJmcm9tT2JqZWN0IiwidHlwZSIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJvcGVuUmV2aWV3VGhyZWFkIiwidGhyZWFkSUQiLCJtYXAiLCJ0aHJlYWQiLCJyYW5nZSIsImdldFJhbmdlRm9yVGhyZWFkIiwiRnJhZ21lbnQiLCJyb290Q29tbWVudElEIiwiZGlkQ2hhbmdlIiwiZXZ0IiwibWFya2VyRGlkQ2hhbmdlIiwib21pdEVtcHR5TGFzdFJvdyIsImNvbW1lbnRSb3ciLCJzdGFydCIsInJvdyIsInBhcmVudCIsIm5ld1JhbmdlIiwidHJhbnNsYXRpb25zIiwicG9zaXRpb24iLCJkZWxldGUiLCJhZGp1c3RlZFBvc2l0aW9uIiwiZGlmZlRvRmlsZVBvc2l0aW9uIiwiZmlsZVRyYW5zbGF0aW9ucyIsIm5ld1Bvc2l0aW9uIiwiZWRpdG9yUm93IiwibG9jYWxSYW5nZSIsIkluZmluaXR5IiwiZXhwb3J0cyIsIkVuZHBvaW50UHJvcFR5cGUiLCJpc1JlcXVpcmVkIiwiUHJvcFR5cGVzIiwic3RyaW5nIiwib2JqZWN0IiwiYXJyYXlPZiIsInNoYXBlIiwiZnVuYyIsImJvb2wiLCJkaWdlc3QiXSwic291cmNlcyI6WyJlZGl0b3ItY29tbWVudC1kZWNvcmF0aW9ucy1jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0ZyYWdtZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtSYW5nZX0gZnJvbSAnYXRvbSc7XG5cbmltcG9ydCB7RW5kcG9pbnRQcm9wVHlwZX0gZnJvbSAnLi4vcHJvcC10eXBlcyc7XG5pbXBvcnQge2FkZEV2ZW50fSBmcm9tICcuLi9yZXBvcnRlci1wcm94eSc7XG5pbXBvcnQgTWFya2VyIGZyb20gJy4uL2F0b20vbWFya2VyJztcbmltcG9ydCBEZWNvcmF0aW9uIGZyb20gJy4uL2F0b20vZGVjb3JhdGlvbic7XG5pbXBvcnQgUmV2aWV3c0l0ZW0gZnJvbSAnLi4vaXRlbXMvcmV2aWV3cy1pdGVtJztcbmltcG9ydCBDb21tZW50R3V0dGVyRGVjb3JhdGlvbkNvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvY29tbWVudC1ndXR0ZXItZGVjb3JhdGlvbi1jb250cm9sbGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRpdG9yQ29tbWVudERlY29yYXRpb25zQ29udHJvbGxlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgZW5kcG9pbnQ6IEVuZHBvaW50UHJvcFR5cGUuaXNSZXF1aXJlZCxcbiAgICBvd25lcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHJlcG86IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBudW1iZXI6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICB3b3JrZGlyOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICB3b3Jrc3BhY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBlZGl0b3I6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICB0aHJlYWRzRm9yUGF0aDogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHJvb3RDb21tZW50SUQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgIHBvc2l0aW9uOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgdGhyZWFkSUQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB9KSkuaXNSZXF1aXJlZCxcbiAgICBjb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIGRpZmZUb0ZpbGVQb3NpdGlvbjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgZ2V0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgfSkuaXNSZXF1aXJlZCxcbiAgICAgIGZpbGVUcmFuc2xhdGlvbnM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIGdldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIH0pLFxuICAgICAgcmVtb3ZlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICAgIGRpZ2VzdDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KSxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5yYW5nZXNCeVJvb3RJRCA9IG5ldyBNYXAoKTtcbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICByZXR1cm4gdHJhbnNsYXRpb25EaWdlc3RGcm9tKHRoaXMucHJvcHMpICE9PSB0cmFuc2xhdGlvbkRpZ2VzdEZyb20obmV4dFByb3BzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMuY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmNvbW1lbnRUcmFuc2xhdGlvbnNGb3JQYXRoLnJlbW92ZWQgJiYgdGhpcy5wcm9wcy50aHJlYWRzRm9yUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBbZmlyc3RUaHJlYWRdID0gdGhpcy5wcm9wcy50aHJlYWRzRm9yUGF0aDtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE1hcmtlclxuICAgICAgICAgIGVkaXRvcj17dGhpcy5wcm9wcy5lZGl0b3J9XG4gICAgICAgICAgZXhjbHVzaXZlPXt0cnVlfVxuICAgICAgICAgIGludmFsaWRhdGU9XCJzdXJyb3VuZFwiXG4gICAgICAgICAgYnVmZmVyUmFuZ2U9e1JhbmdlLmZyb21PYmplY3QoW1swLCAwXSwgWzAsIDBdXSl9PlxuXG4gICAgICAgICAgPERlY29yYXRpb24gdHlwZT1cImJsb2NrXCIgZWRpdG9yPXt0aGlzLnByb3BzLmVkaXRvcn0gY2xhc3NOYW1lPVwiZ2l0aHViLUVkaXRvckNvbW1lbnQtb21pdHRlZFwiPlxuICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgIFRoaXMgZmlsZSBoYXMgcmV2aWV3IGNvbW1lbnRzLCBidXQgaXRzIHBhdGNoIGlzIHRvbyBsYXJnZSBmb3IgQXRvbSB0byBsb2FkLlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgIFJldmlldyBjb21tZW50cyBtYXkgc3RpbGwgYmUgdmlld2VkIHdpdGhpblxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLm9wZW5SZXZpZXdUaHJlYWQoZmlyc3RUaHJlYWQudGhyZWFkSUQpfT50aGUgcmV2aWV3IHRhYjwvYnV0dG9uPi5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L0RlY29yYXRpb24+XG5cbiAgICAgICAgPC9NYXJrZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb3BzLnRocmVhZHNGb3JQYXRoLm1hcCh0aHJlYWQgPT4ge1xuICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldFJhbmdlRm9yVGhyZWFkKHRocmVhZCk7XG4gICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RnJhZ21lbnQga2V5PXtgZ2l0aHViLWVkaXRvci1yZXZpZXctZGVjb3JhdGlvbi0ke3RocmVhZC5yb290Q29tbWVudElEfWB9PlxuICAgICAgICAgIDxNYXJrZXJcbiAgICAgICAgICAgIGVkaXRvcj17dGhpcy5wcm9wcy5lZGl0b3J9XG4gICAgICAgICAgICBleGNsdXNpdmU9e3RydWV9XG4gICAgICAgICAgICBpbnZhbGlkYXRlPVwic3Vycm91bmRcIlxuICAgICAgICAgICAgYnVmZmVyUmFuZ2U9e3JhbmdlfVxuICAgICAgICAgICAgZGlkQ2hhbmdlPXtldnQgPT4gdGhpcy5tYXJrZXJEaWRDaGFuZ2UodGhyZWFkLnJvb3RDb21tZW50SUQsIGV2dCl9PlxuXG4gICAgICAgICAgICA8RGVjb3JhdGlvblxuICAgICAgICAgICAgICB0eXBlPVwibGluZVwiXG4gICAgICAgICAgICAgIGVkaXRvcj17dGhpcy5wcm9wcy5lZGl0b3J9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdpdGh1Yi1lZGl0b3JDb21tZW50SGlnaGxpZ2h0XCJcbiAgICAgICAgICAgICAgb21pdEVtcHR5TGFzdFJvdz17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgPC9NYXJrZXI+XG4gICAgICAgICAgPENvbW1lbnRHdXR0ZXJEZWNvcmF0aW9uQ29udHJvbGxlclxuICAgICAgICAgICAgY29tbWVudFJvdz17cmFuZ2Uuc3RhcnQucm93fVxuICAgICAgICAgICAgdGhyZWFkSWQ9e3RocmVhZC50aHJlYWRJRH1cbiAgICAgICAgICAgIGVkaXRvcj17dGhpcy5wcm9wcy5lZGl0b3J9XG4gICAgICAgICAgICB3b3Jrc3BhY2U9e3RoaXMucHJvcHMud29ya3NwYWNlfVxuICAgICAgICAgICAgZW5kcG9pbnQ9e3RoaXMucHJvcHMuZW5kcG9pbnR9XG4gICAgICAgICAgICBvd25lcj17dGhpcy5wcm9wcy5vd25lcn1cbiAgICAgICAgICAgIHJlcG89e3RoaXMucHJvcHMucmVwb31cbiAgICAgICAgICAgIG51bWJlcj17dGhpcy5wcm9wcy5udW1iZXJ9XG4gICAgICAgICAgICB3b3JrZGlyPXt0aGlzLnByb3BzLndvcmtkaXJ9XG4gICAgICAgICAgICBwYXJlbnQ9e3RoaXMuY29uc3RydWN0b3IubmFtZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0ZyYWdtZW50PlxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIG1hcmtlckRpZENoYW5nZShyb290Q29tbWVudElELCB7bmV3UmFuZ2V9KSB7XG4gICAgdGhpcy5yYW5nZXNCeVJvb3RJRC5zZXQocm9vdENvbW1lbnRJRCwgUmFuZ2UuZnJvbU9iamVjdChuZXdSYW5nZSkpO1xuICB9XG5cbiAgZ2V0UmFuZ2VGb3JUaHJlYWQodGhyZWFkKSB7XG4gICAgY29uc3QgdHJhbnNsYXRpb25zID0gdGhpcy5wcm9wcy5jb21tZW50VHJhbnNsYXRpb25zRm9yUGF0aDtcblxuICAgIGlmICh0aHJlYWQucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgIHRoaXMucmFuZ2VzQnlSb290SUQuZGVsZXRlKHRocmVhZC5yb290Q29tbWVudElEKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBhZGp1c3RlZFBvc2l0aW9uID0gdHJhbnNsYXRpb25zLmRpZmZUb0ZpbGVQb3NpdGlvbi5nZXQodGhyZWFkLnBvc2l0aW9uKTtcbiAgICBpZiAoIWFkanVzdGVkUG9zaXRpb24pIHtcbiAgICAgIHRoaXMucmFuZ2VzQnlSb290SUQuZGVsZXRlKHRocmVhZC5yb290Q29tbWVudElEKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0cmFuc2xhdGlvbnMuZmlsZVRyYW5zbGF0aW9ucykge1xuICAgICAgYWRqdXN0ZWRQb3NpdGlvbiA9IHRyYW5zbGF0aW9ucy5maWxlVHJhbnNsYXRpb25zLmdldChhZGp1c3RlZFBvc2l0aW9uKS5uZXdQb3NpdGlvbjtcbiAgICAgIGlmICghYWRqdXN0ZWRQb3NpdGlvbikge1xuICAgICAgICB0aGlzLnJhbmdlc0J5Um9vdElELmRlbGV0ZSh0aHJlYWQucm9vdENvbW1lbnRJRCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvclJvdyA9IGFkanVzdGVkUG9zaXRpb24gLSAxO1xuXG4gICAgbGV0IGxvY2FsUmFuZ2UgPSB0aGlzLnJhbmdlc0J5Um9vdElELmdldCh0aHJlYWQucm9vdENvbW1lbnRJRCk7XG4gICAgaWYgKCFsb2NhbFJhbmdlKSB7XG4gICAgICBsb2NhbFJhbmdlID0gUmFuZ2UuZnJvbU9iamVjdChbW2VkaXRvclJvdywgMF0sIFtlZGl0b3JSb3csIEluZmluaXR5XV0pO1xuICAgICAgdGhpcy5yYW5nZXNCeVJvb3RJRC5zZXQodGhyZWFkLnJvb3RDb21tZW50SUQsIGxvY2FsUmFuZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gbG9jYWxSYW5nZTtcbiAgfVxuXG4gIG9wZW5SZXZpZXdUaHJlYWQgPSBhc3luYyB0aHJlYWRJZCA9PiB7XG4gICAgY29uc3QgdXJpID0gUmV2aWV3c0l0ZW0uYnVpbGRVUkkoe1xuICAgICAgaG9zdDogdGhpcy5wcm9wcy5lbmRwb2ludC5nZXRIb3N0KCksXG4gICAgICBvd25lcjogdGhpcy5wcm9wcy5vd25lcixcbiAgICAgIHJlcG86IHRoaXMucHJvcHMucmVwbyxcbiAgICAgIG51bWJlcjogdGhpcy5wcm9wcy5udW1iZXIsXG4gICAgICB3b3JrZGlyOiB0aGlzLnByb3BzLndvcmtkaXIsXG4gICAgfSk7XG4gICAgY29uc3QgcmV2aWV3c0l0ZW0gPSBhd2FpdCB0aGlzLnByb3BzLndvcmtzcGFjZS5vcGVuKHVyaSwge3NlYXJjaEFsbFBhbmVzOiB0cnVlfSk7XG4gICAgcmV2aWV3c0l0ZW0uanVtcFRvVGhyZWFkKHRocmVhZElkKTtcbiAgICBhZGRFdmVudCgnb3Blbi1yZXZpZXctdGhyZWFkJywge3BhY2thZ2U6ICdnaXRodWInLCBmcm9tOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWV9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGlvbkRpZ2VzdEZyb20ocHJvcHMpIHtcbiAgY29uc3QgdHJhbnNsYXRpb25zID0gcHJvcHMuY29tbWVudFRyYW5zbGF0aW9uc0ZvclBhdGg7XG4gIHJldHVybiB0cmFuc2xhdGlvbnMgPyB0cmFuc2xhdGlvbnMuZGlnZXN0IDogbnVsbDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSCxPQUFBO0FBRUEsSUFBQUksV0FBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssY0FBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBSixzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQU8sV0FBQSxHQUFBTCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQVEsWUFBQSxHQUFBTixzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQVMsa0NBQUEsR0FBQVAsc0JBQUEsQ0FBQUYsT0FBQTtBQUFvRyxTQUFBRSx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFmLHdCQUFBVyxHQUFBLEVBQUFJLFdBQUEsU0FBQUEsV0FBQSxJQUFBSixHQUFBLElBQUFB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