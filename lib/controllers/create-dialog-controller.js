"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.BareCreateDialogController = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reactRelay = require("react-relay");
var _atom = require("atom");
var _eventKit = require("event-kit");
var _path = _interopRequireDefault(require("path"));
var _createDialogView = _interopRequireDefault(require("../views/create-dialog-view"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class BareCreateDialogController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "didChangeRepoName", () => {
      this.modified.repoName = true;
      if (!this.modified.localPath) {
        if (this.localPath.getText() === this.projectHome) {
          this.localPath.setText(_path.default.join(this.projectHome, this.repoName.getText()));
        } else {
          const dirName = _path.default.dirname(this.localPath.getText());
          this.localPath.setText(_path.default.join(dirName, this.repoName.getText()));
        }
        this.modified.localPath = false;
      }
      this.recheckAcceptEnablement();
    });
    _defineProperty(this, "didChangeOwnerID", ownerID => new Promise(resolve => this.setState({
      selectedOwnerID: ownerID
    }, resolve)));
    _defineProperty(this, "didChangeLocalPath", () => {
      this.modified.localPath = true;
      if (!this.modified.repoName) {
        this.repoName.setText(_path.default.basename(this.localPath.getText()));
        this.modified.repoName = false;
      }
      this.recheckAcceptEnablement();
    });
    _defineProperty(this, "didChangeVisibility", visibility => {
      return new Promise(resolve => this.setState({
        selectedVisibility: visibility
      }, resolve));
    });
    _defineProperty(this, "didChangeSourceRemoteName", () => {
      this.writeSourceRemoteNameSetting();
      this.recheckAcceptEnablement();
    });
    _defineProperty(this, "didChangeProtocol", async protocol => {
      await new Promise(resolve => this.setState({
        selectedProtocol: protocol
      }, resolve));
      this.writeRemoteFetchProtocolSetting(protocol);
    });
    _defineProperty(this, "readSourceRemoteNameSetting", ({
      newValue
    }) => {
      if (newValue !== this.sourceRemoteName.getText()) {
        this.sourceRemoteName.setText(newValue);
      }
    });
    _defineProperty(this, "readRemoteFetchProtocolSetting", ({
      newValue
    }) => {
      if (newValue !== this.state.selectedProtocol) {
        this.setState({
          selectedProtocol: newValue
        });
      }
    });
    _defineProperty(this, "accept", () => {
      if (!this.acceptIsEnabled()) {
        return Promise.resolve();
      }
      const ownerID = this.state.selectedOwnerID !== '' ? this.state.selectedOwnerID : this.props.user.id;
      return this.props.request.accept({
        ownerID,
        name: this.repoName.getText(),
        visibility: this.state.selectedVisibility,
        localPath: this.localPath.getText(),
        protocol: this.state.selectedProtocol,
        sourceRemoteName: this.sourceRemoteName.getText()
      });
    });
    const {
      localDir
    } = this.props.request.getParams();
    this.projectHome = this.props.config.get('core.projectHome');
    this.modified = {
      repoName: false,
      localPath: false
    };
    this.repoName = new _atom.TextBuffer({
      text: localDir ? _path.default.basename(localDir) : ''
    });
    this.localPath = new _atom.TextBuffer({
      text: localDir || this.projectHome
    });
    this.sourceRemoteName = new _atom.TextBuffer({
      text: this.props.config.get('github.sourceRemoteName')
    });
    this.subs = new _eventKit.CompositeDisposable(this.repoName.onDidChange(this.didChangeRepoName), this.localPath.onDidChange(this.didChangeLocalPath), this.sourceRemoteName.onDidChange(this.didChangeSourceRemoteName), this.props.config.onDidChange('github.sourceRemoteName', this.readSourceRemoteNameSetting), this.props.config.onDidChange('github.remoteFetchProtocol', this.readRemoteFetchProtocolSetting));
    this.state = {
      acceptEnabled: this.acceptIsEnabled(),
      selectedVisibility: 'PUBLIC',
      selectedProtocol: this.props.config.get('github.remoteFetchProtocol'),
      selectedOwnerID: this.props.user ? this.props.user.id : ''
    };
  }
  render() {
    return _react.default.createElement(_createDialogView.default, _extends({
      selectedOwnerID: this.state.selectedOwnerID,
      repoName: this.repoName,
      selectedVisibility: this.state.selectedVisibility,
      localPath: this.localPath,
      sourceRemoteName: this.sourceRemoteName,
      selectedProtocol: this.state.selectedProtocol,
      didChangeOwnerID: this.didChangeOwnerID,
      didChangeVisibility: this.didChangeVisibility,
      didChangeProtocol: this.didChangeProtocol,
      acceptEnabled: this.state.acceptEnabled,
      accept: this.accept
    }, this.props));
  }
  componentDidUpdate(prevProps) {
    if (this.props.user !== prevProps.user) {
      this.recheckAcceptEnablement();
    }
  }
  componentWillUnmount() {
    this.subs.dispose();
  }
  writeSourceRemoteNameSetting() {
    if (this.props.config.get('github.sourceRemoteName') !== this.sourceRemoteName.getText()) {
      this.props.config.set('github.sourceRemoteName', this.sourceRemoteName.getText());
    }
  }
  writeRemoteFetchProtocolSetting(protocol) {
    if (this.props.config.get('github.remoteFetchProtocol') !== protocol) {
      this.props.config.set('github.remoteFetchProtocol', protocol);
    }
  }
  acceptIsEnabled() {
    return !this.repoName.isEmpty() && !this.localPath.isEmpty() && !this.sourceRemoteName.isEmpty() && this.props.user !== null;
  }
  recheckAcceptEnablement() {
    const nextEnablement = this.acceptIsEnabled();
    if (nextEnablement !== this.state.acceptEnabled) {
      this.setState({
        acceptEnabled: nextEnablement
      });
    }
  }
}
exports.BareCreateDialogController = BareCreateDialogController;
_defineProperty(BareCreateDialogController, "propTypes", {
  // Relay
  user: _propTypes.default.shape({
    id: _propTypes.default.string.isRequired
  }),
  // Model
  request: _propTypes.default.shape({
    getParams: _propTypes.default.func.isRequired,
    accept: _propTypes.default.func.isRequired
  }).isRequired,
  error: _propTypes.default.instanceOf(Error),
  isLoading: _propTypes.default.bool.isRequired,
  inProgress: _propTypes.default.bool.isRequired,
  // Atom environment
  currentWindow: _propTypes.default.object.isRequired,
  workspace: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  config: _propTypes.default.object.isRequired
});
var _default = (0, _reactRelay.createFragmentContainer)(BareCreateDialogController, {
  user: function () {
    const node = require("./__generated__/createDialogController_user.graphql");
    if (node.hash && node.hash !== "729f5d41fc5444c5f12632127f89ed21") {
      console.error("The definition of 'createDialogController_user' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
    }
    return require("./__generated__/createDialogController_user.graphql");
  }
});
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfcmVhY3RSZWxheSIsIl9hdG9tIiwiX2V2ZW50S2l0IiwiX3BhdGgiLCJfY3JlYXRlRGlhbG9nVmlldyIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJiaW5kIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiX2RlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidCIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsInIiLCJlIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJCYXJlQ3JlYXRlRGlhbG9nQ29udHJvbGxlciIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIm1vZGlmaWVkIiwicmVwb05hbWUiLCJsb2NhbFBhdGgiLCJnZXRUZXh0IiwicHJvamVjdEhvbWUiLCJzZXRUZXh0IiwicGF0aCIsImpvaW4iLCJkaXJOYW1lIiwiZGlybmFtZSIsInJlY2hlY2tBY2NlcHRFbmFibGVtZW50Iiwib3duZXJJRCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0U3RhdGUiLCJzZWxlY3RlZE93bmVySUQiLCJiYXNlbmFtZSIsInZpc2liaWxpdHkiLCJzZWxlY3RlZFZpc2liaWxpdHkiLCJ3cml0ZVNvdXJjZVJlbW90ZU5hbWVTZXR0aW5nIiwicHJvdG9jb2wiLCJzZWxlY3RlZFByb3RvY29sIiwid3JpdGVSZW1vdGVGZXRjaFByb3RvY29sU2V0dGluZyIsIm5ld1ZhbHVlIiwic291cmNlUmVtb3RlTmFtZSIsInN0YXRlIiwiYWNjZXB0SXNFbmFibGVkIiwidXNlciIsImlkIiwicmVxdWVzdCIsImFjY2VwdCIsIm5hbWUiLCJsb2NhbERpciIsImdldFBhcmFtcyIsImNvbmZpZyIsImdldCIsIlRleHRCdWZmZXIiLCJ0ZXh0Iiwic3VicyIsIkNvbXBvc2l0ZURpc3Bvc2FibGUiLCJvbkRpZENoYW5nZSIsImRpZENoYW5nZVJlcG9OYW1lIiwiZGlkQ2hhbmdlTG9jYWxQYXRoIiwiZGlkQ2hhbmdlU291cmNlUmVtb3RlTmFtZSIsInJlYWRTb3VyY2VSZW1vdGVOYW1lU2V0dGluZyIsInJlYWRSZW1vdGVGZXRjaFByb3RvY29sU2V0dGluZyIsImFjY2VwdEVuYWJsZWQiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiZGlkQ2hhbmdlT3duZXJJRCIsImRpZENoYW5nZVZpc2liaWxpdHkiLCJkaWRDaGFuZ2VQcm90b2NvbCIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZQcm9wcyIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGlzcG9zZSIsInNldCIsImlzRW1wdHkiLCJuZXh0RW5hYmxlbWVudCIsImV4cG9ydHMiLCJQcm9wVHlwZXMiLCJzaGFwZSIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJmdW5jIiwiZXJyb3IiLCJpbnN0YW5jZU9mIiwiRXJyb3IiLCJpc0xvYWRpbmciLCJib29sIiwiaW5Qcm9ncmVzcyIsImN1cnJlbnRXaW5kb3ciLCJvYmplY3QiLCJ3b3Jrc3BhY2UiLCJjb21tYW5kcyIsIl9kZWZhdWx0IiwiY3JlYXRlRnJhZ21lbnRDb250YWluZXIiLCJub2RlIiwiaGFzaCIsImNvbnNvbGUiXSwic291cmNlcyI6WyJjcmVhdGUtZGlhbG9nLWNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge2NyZWF0ZUZyYWdtZW50Q29udGFpbmVyLCBncmFwaHFsfSBmcm9tICdyZWFjdC1yZWxheSc7XG5pbXBvcnQge1RleHRCdWZmZXJ9IGZyb20gJ2F0b20nO1xuaW1wb3J0IHtDb21wb3NpdGVEaXNwb3NhYmxlfSBmcm9tICdldmVudC1raXQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCBDcmVhdGVEaWFsb2dWaWV3IGZyb20gJy4uL3ZpZXdzL2NyZWF0ZS1kaWFsb2ctdmlldyc7XG5cbmV4cG9ydCBjbGFzcyBCYXJlQ3JlYXRlRGlhbG9nQ29udHJvbGxlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLy8gUmVsYXlcbiAgICB1c2VyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB9KSxcblxuICAgIC8vIE1vZGVsXG4gICAgcmVxdWVzdDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIGdldFBhcmFtczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIGFjY2VwdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIGVycm9yOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihFcnJvciksXG4gICAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIGluUHJvZ3Jlc3M6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG5cbiAgICAvLyBBdG9tIGVudmlyb25tZW50XG4gICAgY3VycmVudFdpbmRvdzogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHdvcmtzcGFjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbW1hbmRzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29uZmlnOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIGNvbnN0IHtsb2NhbERpcn0gPSB0aGlzLnByb3BzLnJlcXVlc3QuZ2V0UGFyYW1zKCk7XG5cbiAgICB0aGlzLnByb2plY3RIb21lID0gdGhpcy5wcm9wcy5jb25maWcuZ2V0KCdjb3JlLnByb2plY3RIb21lJyk7XG4gICAgdGhpcy5tb2RpZmllZCA9IHtcbiAgICAgIHJlcG9OYW1lOiBmYWxzZSxcbiAgICAgIGxvY2FsUGF0aDogZmFsc2UsXG4gICAgfTtcblxuICAgIHRoaXMucmVwb05hbWUgPSBuZXcgVGV4dEJ1ZmZlcih7XG4gICAgICB0ZXh0OiBsb2NhbERpciA/IHBhdGguYmFzZW5hbWUobG9jYWxEaXIpIDogJycsXG4gICAgfSk7XG4gICAgdGhpcy5sb2NhbFBhdGggPSBuZXcgVGV4dEJ1ZmZlcih7XG4gICAgICB0ZXh0OiBsb2NhbERpciB8fCB0aGlzLnByb2plY3RIb21lLFxuICAgIH0pO1xuICAgIHRoaXMuc291cmNlUmVtb3RlTmFtZSA9IG5ldyBUZXh0QnVmZmVyKHtcbiAgICAgIHRleHQ6IHRoaXMucHJvcHMuY29uZmlnLmdldCgnZ2l0aHViLnNvdXJjZVJlbW90ZU5hbWUnKSxcbiAgICB9KTtcblxuICAgIHRoaXMuc3VicyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKFxuICAgICAgdGhpcy5yZXBvTmFtZS5vbkRpZENoYW5nZSh0aGlzLmRpZENoYW5nZVJlcG9OYW1lKSxcbiAgICAgIHRoaXMubG9jYWxQYXRoLm9uRGlkQ2hhbmdlKHRoaXMuZGlkQ2hhbmdlTG9jYWxQYXRoKSxcbiAgICAgIHRoaXMuc291cmNlUmVtb3RlTmFtZS5vbkRpZENoYW5nZSh0aGlzLmRpZENoYW5nZVNvdXJjZVJlbW90ZU5hbWUpLFxuICAgICAgdGhpcy5wcm9wcy5jb25maWcub25EaWRDaGFuZ2UoJ2dpdGh1Yi5zb3VyY2VSZW1vdGVOYW1lJywgdGhpcy5yZWFkU291cmNlUmVtb3RlTmFtZVNldHRpbmcpLFxuICAgICAgdGhpcy5wcm9wcy5jb25maWcub25EaWRDaGFuZ2UoJ2dpdGh1Yi5yZW1vdGVGZXRjaFByb3RvY29sJywgdGhpcy5yZWFkUmVtb3RlRmV0Y2hQcm90b2NvbFNldHRpbmcpLFxuICAgICk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWNjZXB0RW5hYmxlZDogdGhpcy5hY2NlcHRJc0VuYWJsZWQoKSxcbiAgICAgIHNlbGVjdGVkVmlzaWJpbGl0eTogJ1BVQkxJQycsXG4gICAgICBzZWxlY3RlZFByb3RvY29sOiB0aGlzLnByb3BzLmNvbmZpZy5nZXQoJ2dpdGh1Yi5yZW1vdGVGZXRjaFByb3RvY29sJyksXG4gICAgICBzZWxlY3RlZE93bmVySUQ6IHRoaXMucHJvcHMudXNlciA/IHRoaXMucHJvcHMudXNlci5pZCA6ICcnLFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDcmVhdGVEaWFsb2dWaWV3XG4gICAgICAgIHNlbGVjdGVkT3duZXJJRD17dGhpcy5zdGF0ZS5zZWxlY3RlZE93bmVySUR9XG4gICAgICAgIHJlcG9OYW1lPXt0aGlzLnJlcG9OYW1lfVxuICAgICAgICBzZWxlY3RlZFZpc2liaWxpdHk9e3RoaXMuc3RhdGUuc2VsZWN0ZWRWaXNpYmlsaXR5fVxuICAgICAgICBsb2NhbFBhdGg9e3RoaXMubG9jYWxQYXRofVxuICAgICAgICBzb3VyY2VSZW1vdGVOYW1lPXt0aGlzLnNvdXJjZVJlbW90ZU5hbWV9XG4gICAgICAgIHNlbGVjdGVkUHJvdG9jb2w9e3RoaXMuc3RhdGUuc2VsZWN0ZWRQcm90b2NvbH1cbiAgICAgICAgZGlkQ2hhbmdlT3duZXJJRD17dGhpcy5kaWRDaGFuZ2VPd25lcklEfVxuICAgICAgICBkaWRDaGFuZ2VWaXNpYmlsaXR5PXt0aGlzLmRpZENoYW5nZVZpc2liaWxpdHl9XG4gICAgICAgIGRpZENoYW5nZVByb3RvY29sPXt0aGlzLmRpZENoYW5nZVByb3RvY29sfVxuICAgICAgICBhY2NlcHRFbmFibGVkPXt0aGlzLnN0YXRlLmFjY2VwdEVuYWJsZWR9XG4gICAgICAgIGFjY2VwdD17dGhpcy5hY2NlcHR9XG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLnVzZXIgIT09IHByZXZQcm9wcy51c2VyKSB7XG4gICAgICB0aGlzLnJlY2hlY2tBY2NlcHRFbmFibGVtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5zdWJzLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIGRpZENoYW5nZVJlcG9OYW1lID0gKCkgPT4ge1xuICAgIHRoaXMubW9kaWZpZWQucmVwb05hbWUgPSB0cnVlO1xuICAgIGlmICghdGhpcy5tb2RpZmllZC5sb2NhbFBhdGgpIHtcbiAgICAgIGlmICh0aGlzLmxvY2FsUGF0aC5nZXRUZXh0KCkgPT09IHRoaXMucHJvamVjdEhvbWUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFBhdGguc2V0VGV4dChwYXRoLmpvaW4odGhpcy5wcm9qZWN0SG9tZSwgdGhpcy5yZXBvTmFtZS5nZXRUZXh0KCkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRpck5hbWUgPSBwYXRoLmRpcm5hbWUodGhpcy5sb2NhbFBhdGguZ2V0VGV4dCgpKTtcbiAgICAgICAgdGhpcy5sb2NhbFBhdGguc2V0VGV4dChwYXRoLmpvaW4oZGlyTmFtZSwgdGhpcy5yZXBvTmFtZS5nZXRUZXh0KCkpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubW9kaWZpZWQubG9jYWxQYXRoID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMucmVjaGVja0FjY2VwdEVuYWJsZW1lbnQoKTtcbiAgfVxuXG4gIGRpZENoYW5nZU93bmVySUQgPSBvd25lcklEID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRPd25lcklEOiBvd25lcklEfSwgcmVzb2x2ZSkpXG5cbiAgZGlkQ2hhbmdlTG9jYWxQYXRoID0gKCkgPT4ge1xuICAgIHRoaXMubW9kaWZpZWQubG9jYWxQYXRoID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMubW9kaWZpZWQucmVwb05hbWUpIHtcbiAgICAgIHRoaXMucmVwb05hbWUuc2V0VGV4dChwYXRoLmJhc2VuYW1lKHRoaXMubG9jYWxQYXRoLmdldFRleHQoKSkpO1xuICAgICAgdGhpcy5tb2RpZmllZC5yZXBvTmFtZSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLnJlY2hlY2tBY2NlcHRFbmFibGVtZW50KCk7XG4gIH1cblxuICBkaWRDaGFuZ2VWaXNpYmlsaXR5ID0gdmlzaWJpbGl0eSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRWaXNpYmlsaXR5OiB2aXNpYmlsaXR5fSwgcmVzb2x2ZSkpO1xuICB9XG5cbiAgZGlkQ2hhbmdlU291cmNlUmVtb3RlTmFtZSA9ICgpID0+IHtcbiAgICB0aGlzLndyaXRlU291cmNlUmVtb3RlTmFtZVNldHRpbmcoKTtcbiAgICB0aGlzLnJlY2hlY2tBY2NlcHRFbmFibGVtZW50KCk7XG4gIH1cblxuICBkaWRDaGFuZ2VQcm90b2NvbCA9IGFzeW5jIHByb3RvY29sID0+IHtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUHJvdG9jb2w6IHByb3RvY29sfSwgcmVzb2x2ZSkpO1xuICAgIHRoaXMud3JpdGVSZW1vdGVGZXRjaFByb3RvY29sU2V0dGluZyhwcm90b2NvbCk7XG4gIH1cblxuICByZWFkU291cmNlUmVtb3RlTmFtZVNldHRpbmcgPSAoe25ld1ZhbHVlfSkgPT4ge1xuICAgIGlmIChuZXdWYWx1ZSAhPT0gdGhpcy5zb3VyY2VSZW1vdGVOYW1lLmdldFRleHQoKSkge1xuICAgICAgdGhpcy5zb3VyY2VSZW1vdGVOYW1lLnNldFRleHQobmV3VmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHdyaXRlU291cmNlUmVtb3RlTmFtZVNldHRpbmcoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuY29uZmlnLmdldCgnZ2l0aHViLnNvdXJjZVJlbW90ZU5hbWUnKSAhPT0gdGhpcy5zb3VyY2VSZW1vdGVOYW1lLmdldFRleHQoKSkge1xuICAgICAgdGhpcy5wcm9wcy5jb25maWcuc2V0KCdnaXRodWIuc291cmNlUmVtb3RlTmFtZScsIHRoaXMuc291cmNlUmVtb3RlTmFtZS5nZXRUZXh0KCkpO1xuICAgIH1cbiAgfVxuXG4gIHJlYWRSZW1vdGVGZXRjaFByb3RvY29sU2V0dGluZyA9ICh7bmV3VmFsdWV9KSA9PiB7XG4gICAgaWYgKG5ld1ZhbHVlICE9PSB0aGlzLnN0YXRlLnNlbGVjdGVkUHJvdG9jb2wpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUHJvdG9jb2w6IG5ld1ZhbHVlfSk7XG4gICAgfVxuICB9XG5cbiAgd3JpdGVSZW1vdGVGZXRjaFByb3RvY29sU2V0dGluZyhwcm90b2NvbCkge1xuICAgIGlmICh0aGlzLnByb3BzLmNvbmZpZy5nZXQoJ2dpdGh1Yi5yZW1vdGVGZXRjaFByb3RvY29sJykgIT09IHByb3RvY29sKSB7XG4gICAgICB0aGlzLnByb3BzLmNvbmZpZy5zZXQoJ2dpdGh1Yi5yZW1vdGVGZXRjaFByb3RvY29sJywgcHJvdG9jb2wpO1xuICAgIH1cbiAgfVxuXG4gIGFjY2VwdElzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gIXRoaXMucmVwb05hbWUuaXNFbXB0eSgpICYmXG4gICAgICAhdGhpcy5sb2NhbFBhdGguaXNFbXB0eSgpICYmXG4gICAgICAhdGhpcy5zb3VyY2VSZW1vdGVOYW1lLmlzRW1wdHkoKSAmJlxuICAgICAgdGhpcy5wcm9wcy51c2VyICE9PSBudWxsO1xuICB9XG5cbiAgcmVjaGVja0FjY2VwdEVuYWJsZW1lbnQoKSB7XG4gICAgY29uc3QgbmV4dEVuYWJsZW1lbnQgPSB0aGlzLmFjY2VwdElzRW5hYmxlZCgpO1xuICAgIGlmIChuZXh0RW5hYmxlbWVudCAhPT0gdGhpcy5zdGF0ZS5hY2NlcHRFbmFibGVkKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHthY2NlcHRFbmFibGVkOiBuZXh0RW5hYmxlbWVudH0pO1xuICAgIH1cbiAgfVxuXG4gIGFjY2VwdCA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMuYWNjZXB0SXNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBvd25lcklEID0gdGhpcy5zdGF0ZS5zZWxlY3RlZE93bmVySUQgIT09ICcnID8gdGhpcy5zdGF0ZS5zZWxlY3RlZE93bmVySUQgOiB0aGlzLnByb3BzLnVzZXIuaWQ7XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5yZXF1ZXN0LmFjY2VwdCh7XG4gICAgICBvd25lcklELFxuICAgICAgbmFtZTogdGhpcy5yZXBvTmFtZS5nZXRUZXh0KCksXG4gICAgICB2aXNpYmlsaXR5OiB0aGlzLnN0YXRlLnNlbGVjdGVkVmlzaWJpbGl0eSxcbiAgICAgIGxvY2FsUGF0aDogdGhpcy5sb2NhbFBhdGguZ2V0VGV4dCgpLFxuICAgICAgcHJvdG9jb2w6IHRoaXMuc3RhdGUuc2VsZWN0ZWRQcm90b2NvbCxcbiAgICAgIHNvdXJjZVJlbW90ZU5hbWU6IHRoaXMuc291cmNlUmVtb3RlTmFtZS5nZXRUZXh0KCksXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRnJhZ21lbnRDb250YWluZXIoQmFyZUNyZWF0ZURpYWxvZ0NvbnRyb2xsZXIsIHtcbiAgdXNlcjogZ3JhcGhxbGBcbiAgICBmcmFnbWVudCBjcmVhdGVEaWFsb2dDb250cm9sbGVyX3VzZXIgb24gVXNlclxuICAgIEBhcmd1bWVudERlZmluaXRpb25zKFxuICAgICAgb3JnYW5pemF0aW9uQ291bnQ6IHt0eXBlOiBcIkludCFcIn1cbiAgICAgIG9yZ2FuaXphdGlvbkN1cnNvcjoge3R5cGU6IFwiU3RyaW5nXCJ9XG4gICAgKSB7XG4gICAgICBpZFxuICAgICAgLi4ucmVwb3NpdG9yeUhvbWVTZWxlY3Rpb25WaWV3X3VzZXIgQGFyZ3VtZW50cyhcbiAgICAgICAgb3JnYW5pemF0aW9uQ291bnQ6ICRvcmdhbml6YXRpb25Db3VudFxuICAgICAgICBvcmdhbml6YXRpb25DdXJzb3I6ICRvcmdhbml6YXRpb25DdXJzb3JcbiAgICAgIClcbiAgICB9XG4gIGAsXG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsV0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksU0FBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssS0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQU0saUJBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyRCxTQUFBRCx1QkFBQVEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLFNBQUEsSUFBQUEsUUFBQSxHQUFBQyxNQUFBLENBQUFDLE1BQUEsR0FBQUQsTUFBQSxDQUFBQyxNQUFBLENBQUFDLElBQUEsZUFBQUMsTUFBQSxhQUFBQyxDQUFBLE1BQUFBLENBQUEsR0FBQUMsU0FBQSxDQUFBQyxNQUFBLEVBQUFGLENBQUEsVUFBQUcsTUFBQSxHQUFBRixTQUFBLENBQUFELENBQUEsWUFBQUksR0FBQSxJQUFBRCxNQUFBLFFBQUFQLE1BQUEsQ0FBQVMsU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQUosTUFBQSxFQUFBQyxHQUFBLEtBQUFMLE1BQUEsQ0FBQUssR0FBQSxJQUFBRCxNQUFBLENBQUFDLEdBQUEsZ0JBQUFMLE1BQUEsWUFBQUosUUFBQSxDQUFBYSxLQUFBLE9BQUFQLFNBQUE7QUFBQSxTQUFBUSxnQkFBQWpCLEdBQUEsRUFBQVksR0FBQSxFQUFBTSxLQUFBLElBQUFOLEdBQUEsR0FBQU8sY0FBQSxDQUFBUCxHQUFBLE9BQUFBLEdBQUEsSUFBQVosR0FBQSxJQUFBSSxNQUFBLENBQUFnQixjQUFBLENBQUFwQixHQUFBLEVBQUFZLEdBQUEsSUFBQU0sS0FBQSxFQUFBQSxLQUFBLEVBQUFHLFVBQUEsUUFBQUMsWUFBQSxRQUFBQyxRQUFBLG9CQUFBdkIsR0FBQSxDQUFBWSxHQUFBLElBQUFNLEtBQUEsV0FBQWxCLEdBQUE7QUFBQSxTQUFBbUIsZUFBQUssQ0FBQSxRQUFBaEIsQ0FBQSxHQUFBaUIsWUFBQSxDQUFBRCxDQUFBLHVDQUFBaEIsQ0FBQSxHQUFBQSxDQUFBLEdBQUFrQixNQUFBLENBQUFsQixDQUFBO0FBQUEsU0FBQWlCLGFBQUFELENBQUEsRUFBQUcsQ0FBQSwyQkFBQUgsQ0FBQSxLQUFBQSxDQUFBLFNBQUFBLENBQUEsTUFBQUksQ0FBQSxHQUFBSixDQUFBLENBQUFLLE1BQUEsQ0FBQUMsV0FBQSxrQkFBQUYsQ0FBQSxRQUFBcEIsQ0FBQSxHQUFBb0IsQ0FBQSxDQUFBYixJQUFBLENBQUFTLENBQUEsRUFBQUcsQ0FBQSx1Q0FBQW5CLENBQUEsU0FBQUEsQ0FBQSxZQUFBdUIsU0FBQSx5RUFBQUosQ0FBQSxHQUFBRCxNQUFBLEdBQUFNLE1BQUEsRUFBQVIsQ0FBQTtBQUVwRCxNQUFNUywwQkFBMEIsU0FBU0MsY0FBSyxDQUFDQyxTQUFTLENBQUM7RUF1QjlEQyxXQUFXQSxDQUFDQyxLQUFLLEVBQUU7SUFDakIsS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFBQ3BCLGVBQUEsNEJBaUVLLE1BQU07TUFDeEIsSUFBSSxDQUFDcUIsUUFBUSxDQUFDQyxRQUFRLEdBQUcsSUFBSTtNQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDRCxRQUFRLENBQUNFLFNBQVMsRUFBRTtRQUM1QixJQUFJLElBQUksQ0FBQ0EsU0FBUyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQ0MsV0FBVyxFQUFFO1VBQ2pELElBQUksQ0FBQ0YsU0FBUyxDQUFDRyxPQUFPLENBQUNDLGFBQUksQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ0gsV0FBVyxFQUFFLElBQUksQ0FBQ0gsUUFBUSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUUsQ0FBQyxNQUFNO1VBQ0wsTUFBTUssT0FBTyxHQUFHRixhQUFJLENBQUNHLE9BQU8sQ0FBQyxJQUFJLENBQUNQLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQztVQUN0RCxJQUFJLENBQUNELFNBQVMsQ0FBQ0csT0FBTyxDQUFDQyxhQUFJLENBQUNDLElBQUksQ0FBQ0MsT0FBTyxFQUFFLElBQUksQ0FBQ1AsUUFBUSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckU7UUFDQSxJQUFJLENBQUNILFFBQVEsQ0FBQ0UsU0FBUyxHQUFHLEtBQUs7TUFDakM7TUFDQSxJQUFJLENBQUNRLHVCQUF1QixDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUFBL0IsZUFBQSwyQkFFa0JnQyxPQUFPLElBQUksSUFBSUMsT0FBTyxDQUFDQyxPQUFPLElBQUksSUFBSSxDQUFDQyxRQUFRLENBQUM7TUFBQ0MsZUFBZSxFQUFFSjtJQUFPLENBQUMsRUFBRUUsT0FBTyxDQUFDLENBQUM7SUFBQWxDLGVBQUEsNkJBRW5GLE1BQU07TUFDekIsSUFBSSxDQUFDcUIsUUFBUSxDQUFDRSxTQUFTLEdBQUcsSUFBSTtNQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDRixRQUFRLENBQUNDLFFBQVEsRUFBRTtRQUMzQixJQUFJLENBQUNBLFFBQVEsQ0FBQ0ksT0FBTyxDQUFDQyxhQUFJLENBQUNVLFFBQVEsQ0FBQyxJQUFJLENBQUNkLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQ0gsUUFBUSxDQUFDQyxRQUFRLEdBQUcsS0FBSztNQUNoQztNQUNBLElBQUksQ0FBQ1MsdUJBQXVCLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBQUEvQixlQUFBLDhCQUVxQnNDLFVBQVUsSUFBSTtNQUNsQyxPQUFPLElBQUlMLE9BQU8sQ0FBQ0MsT0FBTyxJQUFJLElBQUksQ0FBQ0MsUUFBUSxDQUFDO1FBQUNJLGtCQUFrQixFQUFFRDtNQUFVLENBQUMsRUFBRUosT0FBTyxDQUFDLENBQUM7SUFDekYsQ0FBQztJQUFBbEMsZUFBQSxvQ0FFMkIsTUFBTTtNQUNoQyxJQUFJLENBQUN3Qyw0QkFBNEIsQ0FBQyxDQUFDO01BQ25DLElBQUksQ0FBQ1QsdUJBQXVCLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBQUEvQixlQUFBLDRCQUVtQixNQUFNeUMsUUFBUSxJQUFJO01BQ3BDLE1BQU0sSUFBSVIsT0FBTyxDQUFDQyxPQUFPLElBQUksSUFBSSxDQUFDQyxRQUFRLENBQUM7UUFBQ08sZ0JBQWdCLEVBQUVEO01BQVEsQ0FBQyxFQUFFUCxPQUFPLENBQUMsQ0FBQztNQUNsRixJQUFJLENBQUNTLCtCQUErQixDQUFDRixRQUFRLENBQUM7SUFDaEQsQ0FBQztJQUFBekMsZUFBQSxzQ0FFNkIsQ0FBQztNQUFDNEM7SUFBUSxDQUFDLEtBQUs7TUFDNUMsSUFBSUEsUUFBUSxLQUFLLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNyQixPQUFPLENBQUMsQ0FBQyxFQUFFO1FBQ2hELElBQUksQ0FBQ3FCLGdCQUFnQixDQUFDbkIsT0FBTyxDQUFDa0IsUUFBUSxDQUFDO01BQ3pDO0lBQ0YsQ0FBQztJQUFBNUMsZUFBQSx5Q0FRZ0MsQ0FBQztNQUFDNEM7SUFBUSxDQUFDLEtBQUs7TUFDL0MsSUFBSUEsUUFBUSxLQUFLLElBQUksQ0FBQ0UsS0FBSyxDQUFDSixnQkFBZ0IsRUFBRTtRQUM1QyxJQUFJLENBQUNQLFFBQVEsQ0FBQztVQUFDTyxnQkFBZ0IsRUFBRUU7UUFBUSxDQUFDLENBQUM7TUFDN0M7SUFDRixDQUFDO0lBQUE1QyxlQUFBLGlCQXNCUSxNQUFNO01BQ2IsSUFBSSxDQUFDLElBQUksQ0FBQytDLGVBQWUsQ0FBQyxDQUFDLEVBQUU7UUFDM0IsT0FBT2QsT0FBTyxDQUFDQyxPQUFPLENBQUMsQ0FBQztNQUMxQjtNQUVBLE1BQU1GLE9BQU8sR0FBRyxJQUFJLENBQUNjLEtBQUssQ0FBQ1YsZUFBZSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUNVLEtBQUssQ0FBQ1YsZUFBZSxHQUFHLElBQUksQ0FBQ2hCLEtBQUssQ0FBQzRCLElBQUksQ0FBQ0MsRUFBRTtNQUVuRyxPQUFPLElBQUksQ0FBQzdCLEtBQUssQ0FBQzhCLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDO1FBQy9CbkIsT0FBTztRQUNQb0IsSUFBSSxFQUFFLElBQUksQ0FBQzlCLFFBQVEsQ0FBQ0UsT0FBTyxDQUFDLENBQUM7UUFDN0JjLFVBQVUsRUFBRSxJQUFJLENBQUNRLEtBQUssQ0FBQ1Asa0JBQWtCO1FBQ3pDaEIsU0FBUyxFQUFFLElBQUksQ0FBQ0EsU0FBUyxDQUFDQyxPQUFPLENBQUMsQ0FBQztRQUNuQ2lCLFFBQVEsRUFBRSxJQUFJLENBQUNLLEtBQUssQ0FBQ0osZ0JBQWdCO1FBQ3JDRyxnQkFBZ0IsRUFBRSxJQUFJLENBQUNBLGdCQUFnQixDQUFDckIsT0FBTyxDQUFDO01BQ2xELENBQUMsQ0FBQztJQUNKLENBQUM7SUEzSkMsTUFBTTtNQUFDNkI7SUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDakMsS0FBSyxDQUFDOEIsT0FBTyxDQUFDSSxTQUFTLENBQUMsQ0FBQztJQUVqRCxJQUFJLENBQUM3QixXQUFXLEdBQUcsSUFBSSxDQUFDTCxLQUFLLENBQUNtQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztJQUM1RCxJQUFJLENBQUNuQyxRQUFRLEdBQUc7TUFDZEMsUUFBUSxFQUFFLEtBQUs7TUFDZkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUVELElBQUksQ0FBQ0QsUUFBUSxHQUFHLElBQUltQyxnQkFBVSxDQUFDO01BQzdCQyxJQUFJLEVBQUVMLFFBQVEsR0FBRzFCLGFBQUksQ0FBQ1UsUUFBUSxDQUFDZ0IsUUFBUSxDQUFDLEdBQUc7SUFDN0MsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDOUIsU0FBUyxHQUFHLElBQUlrQyxnQkFBVSxDQUFDO01BQzlCQyxJQUFJLEVBQUVMLFFBQVEsSUFBSSxJQUFJLENBQUM1QjtJQUN6QixDQUFDLENBQUM7SUFDRixJQUFJLENBQUNvQixnQkFBZ0IsR0FBRyxJQUFJWSxnQkFBVSxDQUFDO01BQ3JDQyxJQUFJLEVBQUUsSUFBSSxDQUFDdEMsS0FBSyxDQUFDbUMsTUFBTSxDQUFDQyxHQUFHLENBQUMseUJBQXlCO0lBQ3ZELENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQ0csSUFBSSxHQUFHLElBQUlDLDZCQUFtQixDQUNqQyxJQUFJLENBQUN0QyxRQUFRLENBQUN1QyxXQUFXLENBQUMsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQyxFQUNqRCxJQUFJLENBQUN2QyxTQUFTLENBQUNzQyxXQUFXLENBQUMsSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQyxFQUNuRCxJQUFJLENBQUNsQixnQkFBZ0IsQ0FBQ2dCLFdBQVcsQ0FBQyxJQUFJLENBQUNHLHlCQUF5QixDQUFDLEVBQ2pFLElBQUksQ0FBQzVDLEtBQUssQ0FBQ21DLE1BQU0sQ0FBQ00sV0FBVyxDQUFDLHlCQUF5QixFQUFFLElBQUksQ0FBQ0ksMkJBQTJCLENBQUMsRUFDMUYsSUFBSSxDQUFDN0MsS0FBSyxDQUFDbUMsTUFBTSxDQUFDTSxXQUFXLENBQUMsNEJBQTRCLEVBQUUsSUFBSSxDQUFDSyw4QkFBOEIsQ0FDakcsQ0FBQztJQUVELElBQUksQ0FBQ3BCLEtBQUssR0FBRztNQUNYcUIsYUFBYSxFQUFFLElBQUksQ0FBQ3BCLGVBQWUsQ0FBQyxDQUFDO01BQ3JDUixrQkFBa0IsRUFBRSxRQUFRO01BQzVCRyxnQkFBZ0IsRUFBRSxJQUFJLENBQUN0QixLQUFLLENBQUNtQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQztNQUNyRXBCLGVBQWUsRUFBRSxJQUFJLENBQUNoQixLQUFLLENBQUM0QixJQUFJLEdBQUcsSUFBSSxDQUFDNUIsS0FBSyxDQUFDNEIsSUFBSSxDQUFDQyxFQUFFLEdBQUc7SUFDMUQsQ0FBQztFQUNIO0VBRUFtQixNQUFNQSxDQUFBLEVBQUc7SUFDUCxPQUNFOUYsTUFBQSxDQUFBVyxPQUFBLENBQUFvRixhQUFBLENBQUN2RixpQkFBQSxDQUFBRyxPQUFnQixFQUFBQyxRQUFBO01BQ2ZrRCxlQUFlLEVBQUUsSUFBSSxDQUFDVSxLQUFLLENBQUNWLGVBQWdCO01BQzVDZCxRQUFRLEVBQUUsSUFBSSxDQUFDQSxRQUFTO01BQ3hCaUIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDTyxLQUFLLENBQUNQLGtCQUFtQjtNQUNsRGhCLFNBQVMsRUFBRSxJQUFJLENBQUNBLFNBQVU7TUFDMUJzQixnQkFBZ0IsRUFBRSxJQUFJLENBQUNBLGdCQUFpQjtNQUN4Q0gsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDSSxLQUFLLENBQUNKLGdCQUFpQjtNQUM5QzRCLGdCQUFnQixFQUFFLElBQUksQ0FBQ0EsZ0JBQWlCO01BQ3hDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNBLG1CQUFvQjtNQUM5Q0MsaUJBQWlCLEVBQUUsSUFBSSxDQUFDQSxpQkFBa0I7TUFDMUNMLGFBQWEsRUFBRSxJQUFJLENBQUNyQixLQUFLLENBQUNxQixhQUFjO01BQ3hDaEIsTUFBTSxFQUFFLElBQUksQ0FBQ0E7SUFBTyxHQUNoQixJQUFJLENBQUMvQixLQUFLLENBQ2YsQ0FBQztFQUVOO0VBRUFxRCxrQkFBa0JBLENBQUNDLFNBQVMsRUFBRTtJQUM1QixJQUFJLElBQUksQ0FBQ3RELEtBQUssQ0FBQzRCLElBQUksS0FBSzBCLFNBQVMsQ0FBQzFCLElBQUksRUFBRTtNQUN0QyxJQUFJLENBQUNqQix1QkFBdUIsQ0FBQyxDQUFDO0lBQ2hDO0VBQ0Y7RUFFQTRDLG9CQUFvQkEsQ0FBQSxFQUFHO0lBQ3JCLElBQUksQ0FBQ2hCLElBQUksQ0FBQ2lCLE9BQU8sQ0FBQyxDQUFDO0VBQ3JCO0VBK0NBcEMsNEJBQTRCQSxDQUFBLEVBQUc7SUFDN0IsSUFBSSxJQUFJLENBQUNwQixLQUFLLENBQUNtQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLElBQUksQ0FBQ1gsZ0JBQWdCLENBQUNyQixPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3hGLElBQUksQ0FBQ0osS0FBSyxDQUFDbUMsTUFBTSxDQUFDc0IsR0FBRyxDQUFDLHlCQUF5QixFQUFFLElBQUksQ0FBQ2hDLGdCQUFnQixDQUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNuRjtFQUNGO0VBUUFtQiwrQkFBK0JBLENBQUNGLFFBQVEsRUFBRTtJQUN4QyxJQUFJLElBQUksQ0FBQ3JCLEtBQUssQ0FBQ21DLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixDQUFDLEtBQUtmLFFBQVEsRUFBRTtNQUNwRSxJQUFJLENBQUNyQixLQUFLLENBQUNtQyxNQUFNLENBQUNzQixHQUFHLENBQUMsNEJBQTRCLEVBQUVwQyxRQUFRLENBQUM7SUFDL0Q7RUFDRjtFQUVBTSxlQUFlQSxDQUFBLEVBQUc7SUFDaEIsT0FBTyxDQUFDLElBQUksQ0FBQ3pCLFFBQVEsQ0FBQ3dELE9BQU8sQ0FBQyxDQUFDLElBQzdCLENBQUMsSUFBSSxDQUFDdkQsU0FBUyxDQUFDdUQsT0FBTyxDQUFDLENBQUMsSUFDekIsQ0FBQyxJQUFJLENBQUNqQyxnQkFBZ0IsQ0FBQ2lDLE9BQU8sQ0FBQyxDQUFDLElBQ2hDLElBQUksQ0FBQzFELEtBQUssQ0FBQzRCLElBQUksS0FBSyxJQUFJO0VBQzVCO0VBRUFqQix1QkFBdUJBLENBQUEsRUFBRztJQUN4QixNQUFNZ0QsY0FBYyxHQUFHLElBQUksQ0FBQ2hDLGVBQWUsQ0FBQyxDQUFDO0lBQzdDLElBQUlnQyxjQUFjLEtBQUssSUFBSSxDQUFDakMsS0FBSyxDQUFDcUIsYUFBYSxFQUFFO01BQy9DLElBQUksQ0FBQ2hDLFFBQVEsQ0FBQztRQUFDZ0MsYUFBYSxFQUFFWTtNQUFjLENBQUMsQ0FBQztJQUNoRDtFQUNGO0FBa0JGO0FBQUNDLE9BQUEsQ0FBQWhFLDBCQUFBLEdBQUFBLDBCQUFBO0FBQUFoQixlQUFBLENBdExZZ0IsMEJBQTBCLGVBQ2xCO0VBQ2pCO0VBQ0FnQyxJQUFJLEVBQUVpQyxrQkFBUyxDQUFDQyxLQUFLLENBQUM7SUFDcEJqQyxFQUFFLEVBQUVnQyxrQkFBUyxDQUFDRSxNQUFNLENBQUNDO0VBQ3ZCLENBQUMsQ0FBQztFQUVGO0VBQ0FsQyxPQUFPLEVBQUUrQixrQkFBUyxDQUFDQyxLQUFLLENBQUM7SUFDdkI1QixTQUFTLEVBQUUyQixrQkFBUyxDQUFDSSxJQUFJLENBQUNELFVBQVU7SUFDcENqQyxNQUFNLEVBQUU4QixrQkFBUyxDQUFDSSxJQUFJLENBQUNEO0VBQ3pCLENBQUMsQ0FBQyxDQUFDQSxVQUFVO0VBQ2JFLEtBQUssRUFBRUwsa0JBQVMsQ0FBQ00sVUFBVSxDQUFDQyxLQUFLLENBQUM7RUFDbENDLFNBQVMsRUFBRVIsa0JBQVMsQ0FBQ1MsSUFBSSxDQUFDTixVQUFVO0VBQ3BDTyxVQUFVLEVBQUVWLGtCQUFTLENBQUNTLElBQUksQ0FBQ04sVUFBVTtFQUVyQztFQUNBUSxhQUFhLEVBQUVYLGtCQUFTLENBQUNZLE1BQU0sQ0FBQ1QsVUFBVTtFQUMxQ1UsU0FBUyxFQUFFYixrQkFBUyxDQUFDWSxNQUFNLENBQUNULFVBQVU7RUFDdENXLFFBQVEsRUFBRWQsa0JBQVMsQ0FBQ1ksTUFBTSxDQUFDVCxVQUFVO0VBQ3JDN0IsTUFBTSxFQUFFMEIsa0JBQVMsQ0FBQ1ksTUFBTSxDQUFDVDtBQUMzQixDQUFDO0FBQUEsSUFBQVksUUFBQSxHQW1LWSxJQUFBQyxtQ0FBdUIsRUFBQ2pGLDBCQUEwQixFQUFFO0VBQ2pFZ0MsSUFBSSxXQUFBQSxDQUFBO0lBQUEsTUFBQWtELElBQUEsR0FBQTFILE9BQUE7SUFBQSxJQUFBMEgsSUFBQSxDQUFBQyxJQUFBLElBQUFELElBQUEsQ0FBQUMsSUFBQTtNQUFBQyxPQUFBLENBQUFkLEtBQUE7SUFBQTtJQUFBLE9BQUE5RyxPQUFBO0VBQUE7QUFhTixDQUFDLENBQUM7QUFBQXdHLE9BQUEsQ0FBQS9GLE9BQUEsR0FBQStHLFFBQUEifQ==