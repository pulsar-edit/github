"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reporterProxy = require("../reporter-proxy");
var _eventKit = require("event-kit");
var _commitDetailItem = _interopRequireDefault(require("../items/commit-detail-item"));
var _uriPattern = _interopRequireDefault(require("../atom/uri-pattern"));
var _recentCommitsView = _interopRequireDefault(require("../views/recent-commits-view"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class RecentCommitsController extends _react.default.Component {
  constructor(props, context) {
    super(props, context);
    _defineProperty(this, "updateSelectedCommit", () => {
      const activeItem = this.props.workspace.getActivePaneItem();
      const pattern = new _uriPattern.default(decodeURIComponent(_commitDetailItem.default.buildURI(this.props.repository.getWorkingDirectoryPath(), '{sha}')));
      if (activeItem && activeItem.getURI) {
        const match = pattern.matches(activeItem.getURI());
        const {
          sha
        } = match.getParams();
        if (match.ok() && sha && sha !== this.state.selectedCommitSha) {
          return new Promise(resolve => this.setState({
            selectedCommitSha: sha
          }, resolve));
        }
      }
      return Promise.resolve();
    });
    _defineProperty(this, "openCommit", async ({
      sha,
      preserveFocus
    }) => {
      const workdir = this.props.repository.getWorkingDirectoryPath();
      const uri = _commitDetailItem.default.buildURI(workdir, sha);
      const item = await this.props.workspace.open(uri, {
        pending: true
      });
      if (preserveFocus) {
        item.preventFocus();
        this.setFocus(this.constructor.focus.RECENT_COMMIT);
      }
      (0, _reporterProxy.addEvent)('open-commit-in-pane', {
        package: 'github',
        from: this.constructor.name
      });
    });
    _defineProperty(this, "selectNextCommit", () => this.setSelectedCommitIndex(this.getSelectedCommitIndex() + 1));
    _defineProperty(this, "selectPreviousCommit", () => this.setSelectedCommitIndex(Math.max(this.getSelectedCommitIndex() - 1, 0)));
    this.subscriptions = new _eventKit.CompositeDisposable(this.props.workspace.onDidChangeActivePaneItem(this.updateSelectedCommit));
    this.refView = new _refHolder.default();
    this.state = {
      selectedCommitSha: ''
    };
  }
  render() {
    return _react.default.createElement(_recentCommitsView.default, {
      ref: this.refView.setter,
      commits: this.props.commits,
      isLoading: this.props.isLoading,
      undoLastCommit: this.props.undoLastCommit,
      openCommit: this.openCommit,
      selectNextCommit: this.selectNextCommit,
      selectPreviousCommit: this.selectPreviousCommit,
      selectedCommitSha: this.state.selectedCommitSha,
      commands: this.props.commands,
      clipboard: atom.clipboard
    });
  }

  // When no commit is selected, `getSelectedCommitIndex` returns -1 & the commit at index 0 (first commit) is selected

  getSelectedCommitIndex() {
    return this.props.commits.findIndex(commit => commit.getSha() === this.state.selectedCommitSha);
  }
  setSelectedCommitIndex(ind) {
    const commit = this.props.commits[ind];
    if (commit) {
      return new Promise(resolve => this.setState({
        selectedCommitSha: commit.getSha()
      }, resolve));
    } else {
      return Promise.resolve();
    }
  }
  getFocus(element) {
    return this.refView.map(view => view.getFocus(element)).getOr(null);
  }
  setFocus(focus) {
    return this.refView.map(view => {
      const wasFocused = view.setFocus(focus);
      if (wasFocused && this.getSelectedCommitIndex() === -1) {
        this.setSelectedCommitIndex(0);
      }
      return wasFocused;
    }).getOr(false);
  }
  advanceFocusFrom(focus) {
    return this.refView.map(view => view.advanceFocusFrom(focus)).getOr(Promise.resolve(null));
  }
  retreatFocusFrom(focus) {
    return this.refView.map(view => view.retreatFocusFrom(focus)).getOr(Promise.resolve(null));
  }
}
exports.default = RecentCommitsController;
_defineProperty(RecentCommitsController, "propTypes", {
  commits: _propTypes.default.arrayOf(_propTypes.default.object).isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  undoLastCommit: _propTypes.default.func.isRequired,
  workspace: _propTypes.default.object.isRequired,
  repository: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired
});
_defineProperty(RecentCommitsController, "focus", _recentCommitsView.default.focus);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfcmVwb3J0ZXJQcm94eSIsIl9ldmVudEtpdCIsIl9jb21taXREZXRhaWxJdGVtIiwiX3VyaVBhdHRlcm4iLCJfcmVjZW50Q29tbWl0c1ZpZXciLCJfcmVmSG9sZGVyIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ0IiwiaSIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsInIiLCJlIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiUmVjZW50Q29tbWl0c0NvbnRyb2xsZXIiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJjb250ZXh0IiwiYWN0aXZlSXRlbSIsIndvcmtzcGFjZSIsImdldEFjdGl2ZVBhbmVJdGVtIiwicGF0dGVybiIsIlVSSVBhdHRlcm4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJDb21taXREZXRhaWxJdGVtIiwiYnVpbGRVUkkiLCJyZXBvc2l0b3J5IiwiZ2V0V29ya2luZ0RpcmVjdG9yeVBhdGgiLCJnZXRVUkkiLCJtYXRjaCIsIm1hdGNoZXMiLCJzaGEiLCJnZXRQYXJhbXMiLCJvayIsInN0YXRlIiwic2VsZWN0ZWRDb21taXRTaGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFN0YXRlIiwicHJlc2VydmVGb2N1cyIsIndvcmtkaXIiLCJ1cmkiLCJpdGVtIiwib3BlbiIsInBlbmRpbmciLCJwcmV2ZW50Rm9jdXMiLCJzZXRGb2N1cyIsImZvY3VzIiwiUkVDRU5UX0NPTU1JVCIsImFkZEV2ZW50IiwicGFja2FnZSIsImZyb20iLCJuYW1lIiwic2V0U2VsZWN0ZWRDb21taXRJbmRleCIsImdldFNlbGVjdGVkQ29tbWl0SW5kZXgiLCJNYXRoIiwibWF4Iiwic3Vic2NyaXB0aW9ucyIsIkNvbXBvc2l0ZURpc3Bvc2FibGUiLCJvbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtIiwidXBkYXRlU2VsZWN0ZWRDb21taXQiLCJyZWZWaWV3IiwiUmVmSG9sZGVyIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInJlZiIsInNldHRlciIsImNvbW1pdHMiLCJpc0xvYWRpbmciLCJ1bmRvTGFzdENvbW1pdCIsIm9wZW5Db21taXQiLCJzZWxlY3ROZXh0Q29tbWl0Iiwic2VsZWN0UHJldmlvdXNDb21taXQiLCJjb21tYW5kcyIsImNsaXBib2FyZCIsImF0b20iLCJmaW5kSW5kZXgiLCJjb21taXQiLCJnZXRTaGEiLCJpbmQiLCJnZXRGb2N1cyIsImVsZW1lbnQiLCJtYXAiLCJ2aWV3IiwiZ2V0T3IiLCJ3YXNGb2N1c2VkIiwiYWR2YW5jZUZvY3VzRnJvbSIsInJldHJlYXRGb2N1c0Zyb20iLCJleHBvcnRzIiwiUHJvcFR5cGVzIiwiYXJyYXlPZiIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJib29sIiwiZnVuYyIsIlJlY2VudENvbW1pdHNWaWV3Il0sInNvdXJjZXMiOlsicmVjZW50LWNvbW1pdHMtY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7YWRkRXZlbnR9IGZyb20gJy4uL3JlcG9ydGVyLXByb3h5JztcbmltcG9ydCB7Q29tcG9zaXRlRGlzcG9zYWJsZX0gZnJvbSAnZXZlbnQta2l0JztcblxuaW1wb3J0IENvbW1pdERldGFpbEl0ZW0gZnJvbSAnLi4vaXRlbXMvY29tbWl0LWRldGFpbC1pdGVtJztcbmltcG9ydCBVUklQYXR0ZXJuIGZyb20gJy4uL2F0b20vdXJpLXBhdHRlcm4nO1xuaW1wb3J0IFJlY2VudENvbW1pdHNWaWV3IGZyb20gJy4uL3ZpZXdzL3JlY2VudC1jb21taXRzLXZpZXcnO1xuaW1wb3J0IFJlZkhvbGRlciBmcm9tICcuLi9tb2RlbHMvcmVmLWhvbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY2VudENvbW1pdHNDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjb21taXRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KS5pc1JlcXVpcmVkLFxuICAgIGlzTG9hZGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB1bmRvTGFzdENvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB3b3Jrc3BhY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICByZXBvc2l0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29tbWFuZHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgfVxuXG4gIHN0YXRpYyBmb2N1cyA9IFJlY2VudENvbW1pdHNWaWV3LmZvY3VzXG5cbiAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZShcbiAgICAgIHRoaXMucHJvcHMud29ya3NwYWNlLm9uRGlkQ2hhbmdlQWN0aXZlUGFuZUl0ZW0odGhpcy51cGRhdGVTZWxlY3RlZENvbW1pdCksXG4gICAgKTtcblxuICAgIHRoaXMucmVmVmlldyA9IG5ldyBSZWZIb2xkZXIoKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7c2VsZWN0ZWRDb21taXRTaGE6ICcnfTtcbiAgfVxuXG4gIHVwZGF0ZVNlbGVjdGVkQ29tbWl0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLnByb3BzLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lSXRlbSgpO1xuXG4gICAgY29uc3QgcGF0dGVybiA9IG5ldyBVUklQYXR0ZXJuKGRlY29kZVVSSUNvbXBvbmVudChcbiAgICAgIENvbW1pdERldGFpbEl0ZW0uYnVpbGRVUkkoXG4gICAgICAgIHRoaXMucHJvcHMucmVwb3NpdG9yeS5nZXRXb3JraW5nRGlyZWN0b3J5UGF0aCgpLFxuICAgICAgICAne3NoYX0nKSxcbiAgICApKTtcblxuICAgIGlmIChhY3RpdmVJdGVtICYmIGFjdGl2ZUl0ZW0uZ2V0VVJJKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4ubWF0Y2hlcyhhY3RpdmVJdGVtLmdldFVSSSgpKTtcbiAgICAgIGNvbnN0IHtzaGF9ID0gbWF0Y2guZ2V0UGFyYW1zKCk7XG4gICAgICBpZiAobWF0Y2gub2soKSAmJiBzaGEgJiYgc2hhICE9PSB0aGlzLnN0YXRlLnNlbGVjdGVkQ29tbWl0U2hhKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkQ29tbWl0U2hhOiBzaGF9LCByZXNvbHZlKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJlY2VudENvbW1pdHNWaWV3XG4gICAgICAgIHJlZj17dGhpcy5yZWZWaWV3LnNldHRlcn1cbiAgICAgICAgY29tbWl0cz17dGhpcy5wcm9wcy5jb21taXRzfVxuICAgICAgICBpc0xvYWRpbmc9e3RoaXMucHJvcHMuaXNMb2FkaW5nfVxuICAgICAgICB1bmRvTGFzdENvbW1pdD17dGhpcy5wcm9wcy51bmRvTGFzdENvbW1pdH1cbiAgICAgICAgb3BlbkNvbW1pdD17dGhpcy5vcGVuQ29tbWl0fVxuICAgICAgICBzZWxlY3ROZXh0Q29tbWl0PXt0aGlzLnNlbGVjdE5leHRDb21taXR9XG4gICAgICAgIHNlbGVjdFByZXZpb3VzQ29tbWl0PXt0aGlzLnNlbGVjdFByZXZpb3VzQ29tbWl0fVxuICAgICAgICBzZWxlY3RlZENvbW1pdFNoYT17dGhpcy5zdGF0ZS5zZWxlY3RlZENvbW1pdFNoYX1cbiAgICAgICAgY29tbWFuZHM9e3RoaXMucHJvcHMuY29tbWFuZHN9XG4gICAgICAgIGNsaXBib2FyZD17YXRvbS5jbGlwYm9hcmR9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBvcGVuQ29tbWl0ID0gYXN5bmMgKHtzaGEsIHByZXNlcnZlRm9jdXN9KSA9PiB7XG4gICAgY29uc3Qgd29ya2RpciA9IHRoaXMucHJvcHMucmVwb3NpdG9yeS5nZXRXb3JraW5nRGlyZWN0b3J5UGF0aCgpO1xuICAgIGNvbnN0IHVyaSA9IENvbW1pdERldGFpbEl0ZW0uYnVpbGRVUkkod29ya2Rpciwgc2hhKTtcbiAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy5wcm9wcy53b3Jrc3BhY2Uub3Blbih1cmksIHtwZW5kaW5nOiB0cnVlfSk7XG4gICAgaWYgKHByZXNlcnZlRm9jdXMpIHtcbiAgICAgIGl0ZW0ucHJldmVudEZvY3VzKCk7XG4gICAgICB0aGlzLnNldEZvY3VzKHRoaXMuY29uc3RydWN0b3IuZm9jdXMuUkVDRU5UX0NPTU1JVCk7XG4gICAgfVxuICAgIGFkZEV2ZW50KCdvcGVuLWNvbW1pdC1pbi1wYW5lJywge3BhY2thZ2U6ICdnaXRodWInLCBmcm9tOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWV9KTtcbiAgfVxuXG4gIC8vIFdoZW4gbm8gY29tbWl0IGlzIHNlbGVjdGVkLCBgZ2V0U2VsZWN0ZWRDb21taXRJbmRleGAgcmV0dXJucyAtMSAmIHRoZSBjb21taXQgYXQgaW5kZXggMCAoZmlyc3QgY29tbWl0KSBpcyBzZWxlY3RlZFxuICBzZWxlY3ROZXh0Q29tbWl0ID0gKCkgPT4gdGhpcy5zZXRTZWxlY3RlZENvbW1pdEluZGV4KHRoaXMuZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpICsgMSk7XG5cbiAgc2VsZWN0UHJldmlvdXNDb21taXQgPSAoKSA9PiB0aGlzLnNldFNlbGVjdGVkQ29tbWl0SW5kZXgoTWF0aC5tYXgodGhpcy5nZXRTZWxlY3RlZENvbW1pdEluZGV4KCkgLSAxLCAwKSk7XG5cbiAgZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jb21taXRzLmZpbmRJbmRleChjb21taXQgPT4gY29tbWl0LmdldFNoYSgpID09PSB0aGlzLnN0YXRlLnNlbGVjdGVkQ29tbWl0U2hhKTtcbiAgfVxuXG4gIHNldFNlbGVjdGVkQ29tbWl0SW5kZXgoaW5kKSB7XG4gICAgY29uc3QgY29tbWl0ID0gdGhpcy5wcm9wcy5jb21taXRzW2luZF07XG4gICAgaWYgKGNvbW1pdCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRDb21taXRTaGE6IGNvbW1pdC5nZXRTaGEoKX0sIHJlc29sdmUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZvY3VzKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZWaWV3Lm1hcCh2aWV3ID0+IHZpZXcuZ2V0Rm9jdXMoZWxlbWVudCkpLmdldE9yKG51bGwpO1xuICB9XG5cbiAgc2V0Rm9jdXMoZm9jdXMpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZWaWV3Lm1hcCh2aWV3ID0+IHtcbiAgICAgIGNvbnN0IHdhc0ZvY3VzZWQgPSB2aWV3LnNldEZvY3VzKGZvY3VzKTtcbiAgICAgIGlmICh3YXNGb2N1c2VkICYmIHRoaXMuZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpID09PSAtMSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkQ29tbWl0SW5kZXgoMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2FzRm9jdXNlZDtcbiAgICB9KS5nZXRPcihmYWxzZSk7XG4gIH1cblxuICBhZHZhbmNlRm9jdXNGcm9tKGZvY3VzKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmVmlldy5tYXAodmlldyA9PiB2aWV3LmFkdmFuY2VGb2N1c0Zyb20oZm9jdXMpKS5nZXRPcihQcm9taXNlLnJlc29sdmUobnVsbCkpO1xuICB9XG5cbiAgcmV0cmVhdEZvY3VzRnJvbShmb2N1cykge1xuICAgIHJldHVybiB0aGlzLnJlZlZpZXcubWFwKHZpZXcgPT4gdmlldy5yZXRyZWF0Rm9jdXNGcm9tKGZvY3VzKSkuZ2V0T3IoUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxpQkFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sa0JBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLFVBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUE2QyxTQUFBRCx1QkFBQVMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLGdCQUFBSCxHQUFBLEVBQUFJLEdBQUEsRUFBQUMsS0FBQSxJQUFBRCxHQUFBLEdBQUFFLGNBQUEsQ0FBQUYsR0FBQSxPQUFBQSxHQUFBLElBQUFKLEdBQUEsSUFBQU8sTUFBQSxDQUFBQyxjQUFBLENBQUFSLEdBQUEsRUFBQUksR0FBQSxJQUFBQyxLQUFBLEVBQUFBLEtBQUEsRUFBQUksVUFBQSxRQUFBQyxZQUFBLFFBQUFDLFFBQUEsb0JBQUFYLEdBQUEsQ0FBQUksR0FBQSxJQUFBQyxLQUFBLFdBQUFMLEdBQUE7QUFBQSxTQUFBTSxlQUFBTSxDQUFBLFFBQUFD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