"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reporterProxy = require("../reporter-proxy");
var _eventKit = require("event-kit");
var _commitDetailItem = _interopRequireDefault(require("../items/commit-detail-item"));
var _uriPattern = _interopRequireDefault(require("../atom/uri-pattern"));
var _recentCommitsView = _interopRequireDefault(require("../views/recent-commits-view"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class RecentCommitsController extends _react.default.Component {
  constructor(props, context) {
    super(props, context);
    _defineProperty(this, "updateSelectedCommit", () => {
      const activeItem = this.props.workspace.getActivePaneItem();
      const pattern = new _uriPattern.default(decodeURIComponent(_commitDetailItem.default.buildURI(this.props.repository.getWorkingDirectoryPath(), '{sha}')));
      if (activeItem && activeItem.getURI) {
        const match = pattern.matches(activeItem.getURI());
        const {
          sha
        } = match.getParams();
        if (match.ok() && sha && sha !== this.state.selectedCommitSha) {
          return new Promise(resolve => this.setState({
            selectedCommitSha: sha
          }, resolve));
        }
      }
      return Promise.resolve();
    });
    _defineProperty(this, "openCommit", async ({
      sha,
      preserveFocus
    }) => {
      const workdir = this.props.repository.getWorkingDirectoryPath();
      const uri = _commitDetailItem.default.buildURI(workdir, sha);
      const item = await this.props.workspace.open(uri, {
        pending: true
      });
      if (preserveFocus) {
        item.preventFocus();
        this.setFocus(this.constructor.focus.RECENT_COMMIT);
      }
      (0, _reporterProxy.addEvent)('open-commit-in-pane', {
        package: 'github',
        from: this.constructor.name
      });
    });
    _defineProperty(this, "selectNextCommit", () => this.setSelectedCommitIndex(this.getSelectedCommitIndex() + 1));
    _defineProperty(this, "selectPreviousCommit", () => this.setSelectedCommitIndex(Math.max(this.getSelectedCommitIndex() - 1, 0)));
    this.subscriptions = new _eventKit.CompositeDisposable(this.props.workspace.onDidChangeActivePaneItem(this.updateSelectedCommit));
    this.refView = new _refHolder.default();
    this.state = {
      selectedCommitSha: ''
    };
  }
  render() {
    return _react.default.createElement(_recentCommitsView.default, {
      ref: this.refView.setter,
      commits: this.props.commits,
      isLoading: this.props.isLoading,
      undoLastCommit: this.props.undoLastCommit,
      openCommit: this.openCommit,
      selectNextCommit: this.selectNextCommit,
      selectPreviousCommit: this.selectPreviousCommit,
      selectedCommitSha: this.state.selectedCommitSha,
      commands: this.props.commands,
      clipboard: atom.clipboard
    });
  }
  getSelectedCommitIndex() {
    return this.props.commits.findIndex(commit => commit.getSha() === this.state.selectedCommitSha);
  }
  setSelectedCommitIndex(ind) {
    const commit = this.props.commits[ind];
    if (commit) {
      return new Promise(resolve => this.setState({
        selectedCommitSha: commit.getSha()
      }, resolve));
    } else {
      return Promise.resolve();
    }
  }
  getFocus(element) {
    return this.refView.map(view => view.getFocus(element)).getOr(null);
  }
  setFocus(focus) {
    return this.refView.map(view => {
      const wasFocused = view.setFocus(focus);
      if (wasFocused && this.getSelectedCommitIndex() === -1) {
        this.setSelectedCommitIndex(0);
      }
      return wasFocused;
    }).getOr(false);
  }
  advanceFocusFrom(focus) {
    return this.refView.map(view => view.advanceFocusFrom(focus)).getOr(Promise.resolve(null));
  }
  retreatFocusFrom(focus) {
    return this.refView.map(view => view.retreatFocusFrom(focus)).getOr(Promise.resolve(null));
  }
}
exports.default = RecentCommitsController;
_defineProperty(RecentCommitsController, "propTypes", {
  commits: _propTypes.default.arrayOf(_propTypes.default.object).isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  undoLastCommit: _propTypes.default.func.isRequired,
  workspace: _propTypes.default.object.isRequired,
  repository: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired
});
_defineProperty(RecentCommitsController, "focus", _recentCommitsView.default.focus);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWNlbnRDb21taXRzQ29udHJvbGxlciIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImNvbnRleHQiLCJhY3RpdmVJdGVtIiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlUGFuZUl0ZW0iLCJwYXR0ZXJuIiwiVVJJUGF0dGVybiIsImRlY29kZVVSSUNvbXBvbmVudCIsIkNvbW1pdERldGFpbEl0ZW0iLCJidWlsZFVSSSIsInJlcG9zaXRvcnkiLCJnZXRXb3JraW5nRGlyZWN0b3J5UGF0aCIsImdldFVSSSIsIm1hdGNoIiwibWF0Y2hlcyIsInNoYSIsImdldFBhcmFtcyIsIm9rIiwic3RhdGUiLCJzZWxlY3RlZENvbW1pdFNoYSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0U3RhdGUiLCJwcmVzZXJ2ZUZvY3VzIiwid29ya2RpciIsInVyaSIsIml0ZW0iLCJvcGVuIiwicGVuZGluZyIsInByZXZlbnRGb2N1cyIsInNldEZvY3VzIiwiZm9jdXMiLCJSRUNFTlRfQ09NTUlUIiwiYWRkRXZlbnQiLCJwYWNrYWdlIiwiZnJvbSIsIm5hbWUiLCJzZXRTZWxlY3RlZENvbW1pdEluZGV4IiwiZ2V0U2VsZWN0ZWRDb21taXRJbmRleCIsIk1hdGgiLCJtYXgiLCJzdWJzY3JpcHRpb25zIiwiQ29tcG9zaXRlRGlzcG9zYWJsZSIsIm9uRGlkQ2hhbmdlQWN0aXZlUGFuZUl0ZW0iLCJ1cGRhdGVTZWxlY3RlZENvbW1pdCIsInJlZlZpZXciLCJSZWZIb2xkZXIiLCJyZW5kZXIiLCJzZXR0ZXIiLCJjb21taXRzIiwiaXNMb2FkaW5nIiwidW5kb0xhc3RDb21taXQiLCJvcGVuQ29tbWl0Iiwic2VsZWN0TmV4dENvbW1pdCIsInNlbGVjdFByZXZpb3VzQ29tbWl0IiwiY29tbWFuZHMiLCJhdG9tIiwiY2xpcGJvYXJkIiwiZmluZEluZGV4IiwiY29tbWl0IiwiZ2V0U2hhIiwiaW5kIiwiZ2V0Rm9jdXMiLCJlbGVtZW50IiwibWFwIiwidmlldyIsImdldE9yIiwid2FzRm9jdXNlZCIsImFkdmFuY2VGb2N1c0Zyb20iLCJyZXRyZWF0Rm9jdXNGcm9tIiwiUHJvcFR5cGVzIiwiYXJyYXlPZiIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJib29sIiwiZnVuYyIsIlJlY2VudENvbW1pdHNWaWV3Il0sInNvdXJjZXMiOlsicmVjZW50LWNvbW1pdHMtY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7YWRkRXZlbnR9IGZyb20gJy4uL3JlcG9ydGVyLXByb3h5JztcbmltcG9ydCB7Q29tcG9zaXRlRGlzcG9zYWJsZX0gZnJvbSAnZXZlbnQta2l0JztcblxuaW1wb3J0IENvbW1pdERldGFpbEl0ZW0gZnJvbSAnLi4vaXRlbXMvY29tbWl0LWRldGFpbC1pdGVtJztcbmltcG9ydCBVUklQYXR0ZXJuIGZyb20gJy4uL2F0b20vdXJpLXBhdHRlcm4nO1xuaW1wb3J0IFJlY2VudENvbW1pdHNWaWV3IGZyb20gJy4uL3ZpZXdzL3JlY2VudC1jb21taXRzLXZpZXcnO1xuaW1wb3J0IFJlZkhvbGRlciBmcm9tICcuLi9tb2RlbHMvcmVmLWhvbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY2VudENvbW1pdHNDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjb21taXRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KS5pc1JlcXVpcmVkLFxuICAgIGlzTG9hZGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB1bmRvTGFzdENvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB3b3Jrc3BhY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICByZXBvc2l0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29tbWFuZHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgfVxuXG4gIHN0YXRpYyBmb2N1cyA9IFJlY2VudENvbW1pdHNWaWV3LmZvY3VzXG5cbiAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZShcbiAgICAgIHRoaXMucHJvcHMud29ya3NwYWNlLm9uRGlkQ2hhbmdlQWN0aXZlUGFuZUl0ZW0odGhpcy51cGRhdGVTZWxlY3RlZENvbW1pdCksXG4gICAgKTtcblxuICAgIHRoaXMucmVmVmlldyA9IG5ldyBSZWZIb2xkZXIoKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7c2VsZWN0ZWRDb21taXRTaGE6ICcnfTtcbiAgfVxuXG4gIHVwZGF0ZVNlbGVjdGVkQ29tbWl0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLnByb3BzLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lSXRlbSgpO1xuXG4gICAgY29uc3QgcGF0dGVybiA9IG5ldyBVUklQYXR0ZXJuKGRlY29kZVVSSUNvbXBvbmVudChcbiAgICAgIENvbW1pdERldGFpbEl0ZW0uYnVpbGRVUkkoXG4gICAgICAgIHRoaXMucHJvcHMucmVwb3NpdG9yeS5nZXRXb3JraW5nRGlyZWN0b3J5UGF0aCgpLFxuICAgICAgICAne3NoYX0nKSxcbiAgICApKTtcblxuICAgIGlmIChhY3RpdmVJdGVtICYmIGFjdGl2ZUl0ZW0uZ2V0VVJJKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4ubWF0Y2hlcyhhY3RpdmVJdGVtLmdldFVSSSgpKTtcbiAgICAgIGNvbnN0IHtzaGF9ID0gbWF0Y2guZ2V0UGFyYW1zKCk7XG4gICAgICBpZiAobWF0Y2gub2soKSAmJiBzaGEgJiYgc2hhICE9PSB0aGlzLnN0YXRlLnNlbGVjdGVkQ29tbWl0U2hhKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkQ29tbWl0U2hhOiBzaGF9LCByZXNvbHZlKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJlY2VudENvbW1pdHNWaWV3XG4gICAgICAgIHJlZj17dGhpcy5yZWZWaWV3LnNldHRlcn1cbiAgICAgICAgY29tbWl0cz17dGhpcy5wcm9wcy5jb21taXRzfVxuICAgICAgICBpc0xvYWRpbmc9e3RoaXMucHJvcHMuaXNMb2FkaW5nfVxuICAgICAgICB1bmRvTGFzdENvbW1pdD17dGhpcy5wcm9wcy51bmRvTGFzdENvbW1pdH1cbiAgICAgICAgb3BlbkNvbW1pdD17dGhpcy5vcGVuQ29tbWl0fVxuICAgICAgICBzZWxlY3ROZXh0Q29tbWl0PXt0aGlzLnNlbGVjdE5leHRDb21taXR9XG4gICAgICAgIHNlbGVjdFByZXZpb3VzQ29tbWl0PXt0aGlzLnNlbGVjdFByZXZpb3VzQ29tbWl0fVxuICAgICAgICBzZWxlY3RlZENvbW1pdFNoYT17dGhpcy5zdGF0ZS5zZWxlY3RlZENvbW1pdFNoYX1cbiAgICAgICAgY29tbWFuZHM9e3RoaXMucHJvcHMuY29tbWFuZHN9XG4gICAgICAgIGNsaXBib2FyZD17YXRvbS5jbGlwYm9hcmR9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBvcGVuQ29tbWl0ID0gYXN5bmMgKHtzaGEsIHByZXNlcnZlRm9jdXN9KSA9PiB7XG4gICAgY29uc3Qgd29ya2RpciA9IHRoaXMucHJvcHMucmVwb3NpdG9yeS5nZXRXb3JraW5nRGlyZWN0b3J5UGF0aCgpO1xuICAgIGNvbnN0IHVyaSA9IENvbW1pdERldGFpbEl0ZW0uYnVpbGRVUkkod29ya2Rpciwgc2hhKTtcbiAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy5wcm9wcy53b3Jrc3BhY2Uub3Blbih1cmksIHtwZW5kaW5nOiB0cnVlfSk7XG4gICAgaWYgKHByZXNlcnZlRm9jdXMpIHtcbiAgICAgIGl0ZW0ucHJldmVudEZvY3VzKCk7XG4gICAgICB0aGlzLnNldEZvY3VzKHRoaXMuY29uc3RydWN0b3IuZm9jdXMuUkVDRU5UX0NPTU1JVCk7XG4gICAgfVxuICAgIGFkZEV2ZW50KCdvcGVuLWNvbW1pdC1pbi1wYW5lJywge3BhY2thZ2U6ICdnaXRodWInLCBmcm9tOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWV9KTtcbiAgfVxuXG4gIC8vIFdoZW4gbm8gY29tbWl0IGlzIHNlbGVjdGVkLCBgZ2V0U2VsZWN0ZWRDb21taXRJbmRleGAgcmV0dXJucyAtMSAmIHRoZSBjb21taXQgYXQgaW5kZXggMCAoZmlyc3QgY29tbWl0KSBpcyBzZWxlY3RlZFxuICBzZWxlY3ROZXh0Q29tbWl0ID0gKCkgPT4gdGhpcy5zZXRTZWxlY3RlZENvbW1pdEluZGV4KHRoaXMuZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpICsgMSk7XG5cbiAgc2VsZWN0UHJldmlvdXNDb21taXQgPSAoKSA9PiB0aGlzLnNldFNlbGVjdGVkQ29tbWl0SW5kZXgoTWF0aC5tYXgodGhpcy5nZXRTZWxlY3RlZENvbW1pdEluZGV4KCkgLSAxLCAwKSk7XG5cbiAgZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jb21taXRzLmZpbmRJbmRleChjb21taXQgPT4gY29tbWl0LmdldFNoYSgpID09PSB0aGlzLnN0YXRlLnNlbGVjdGVkQ29tbWl0U2hhKTtcbiAgfVxuXG4gIHNldFNlbGVjdGVkQ29tbWl0SW5kZXgoaW5kKSB7XG4gICAgY29uc3QgY29tbWl0ID0gdGhpcy5wcm9wcy5jb21taXRzW2luZF07XG4gICAgaWYgKGNvbW1pdCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRDb21taXRTaGE6IGNvbW1pdC5nZXRTaGEoKX0sIHJlc29sdmUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZvY3VzKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZWaWV3Lm1hcCh2aWV3ID0+IHZpZXcuZ2V0Rm9jdXMoZWxlbWVudCkpLmdldE9yKG51bGwpO1xuICB9XG5cbiAgc2V0Rm9jdXMoZm9jdXMpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZWaWV3Lm1hcCh2aWV3ID0+IHtcbiAgICAgIGNvbnN0IHdhc0ZvY3VzZWQgPSB2aWV3LnNldEZvY3VzKGZvY3VzKTtcbiAgICAgIGlmICh3YXNGb2N1c2VkICYmIHRoaXMuZ2V0U2VsZWN0ZWRDb21taXRJbmRleCgpID09PSAtMSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkQ29tbWl0SW5kZXgoMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2FzRm9jdXNlZDtcbiAgICB9KS5nZXRPcihmYWxzZSk7XG4gIH1cblxuICBhZHZhbmNlRm9jdXNGcm9tKGZvY3VzKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmVmlldy5tYXAodmlldyA9PiB2aWV3LmFkdmFuY2VGb2N1c0Zyb20oZm9jdXMpKS5nZXRPcihQcm9taXNlLnJlc29sdmUobnVsbCkpO1xuICB9XG5cbiAgcmV0cmVhdEZvY3VzRnJvbShmb2N1cykge1xuICAgIHJldHVybiB0aGlzLnJlZlZpZXcubWFwKHZpZXcgPT4gdmlldy5yZXRyZWF0Rm9jdXNGcm9tKGZvY3VzKSkuZ2V0T3IoUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQTZDO0FBQUE7QUFBQTtBQUFBO0FBRTlCLE1BQU1BLHVCQUF1QixTQUFTQyxjQUFLLENBQUNDLFNBQVMsQ0FBQztFQVluRUMsV0FBVyxDQUFDQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtJQUMxQixLQUFLLENBQUNELEtBQUssRUFB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