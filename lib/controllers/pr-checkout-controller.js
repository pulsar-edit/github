"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.BarePullRequestCheckoutController = exports.checkoutStates = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reactRelay = require("react-relay");
var _enableableOperation = _interopRequireDefault(require("../models/enableable-operation"));
var _gitShellOutStrategy = require("../git-shell-out-strategy");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class CheckoutState {
  constructor(name) {
    this.name = name;
  }
  when(cases) {
    return cases[this.name] || cases.default;
  }
}
const checkoutStates = {
  HIDDEN: new CheckoutState('hidden'),
  DISABLED: new CheckoutState('disabled'),
  BUSY: new CheckoutState('busy'),
  CURRENT: new CheckoutState('current')
};
exports.checkoutStates = checkoutStates;
class BarePullRequestCheckoutController extends _react.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      checkoutInProgress: false
    };
    this.checkoutOp = new _enableableOperation.default(() => this.checkout().catch(e => {
      if (!(e instanceof _gitShellOutStrategy.GitError)) {
        throw e;
      }
    }));
    this.checkoutOp.toggleState(this, 'checkoutInProgress');
  }
  render() {
    return this.props.children(this.nextCheckoutOp());
  }
  nextCheckoutOp() {
    const {
      repository,
      pullRequest
    } = this.props;
    if (this.props.isAbsent) {
      return this.checkoutOp.disable(checkoutStates.HIDDEN, 'No repository found');
    }
    if (this.props.isLoading) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'Loading');
    }
    if (!this.props.isPresent) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'No repository found');
    }
    if (this.props.isMerging) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'Merge in progress');
    }
    if (this.props.isRebasing) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'Rebase in progress');
    }
    if (this.state.checkoutInProgress) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'Checking out...');
    }

    // determine if pullRequest.headRepository is null
    // this can happen if a repository has been deleted.
    if (!pullRequest.headRepository) {
      return this.checkoutOp.disable(checkoutStates.DISABLED, 'Pull request head repository does not exist');
    }

    // Determine if we already have this PR checked out.

    const headPush = this.props.branches.getHeadBranch().getPush();
    const headRemote = this.props.remotes.withName(headPush.getRemoteName());

    // (detect checkout from pull/### refspec)
    const fromPullRefspec = headRemote.getOwner() === repository.owner.login && headRemote.getRepo() === repository.name && headPush.getShortRemoteRef() === `pull/${pullRequest.number}/head`;

    // (detect checkout from head repository)
    const fromHeadRepo = headRemote.getOwner() === pullRequest.headRepository.owner.login && headRemote.getRepo() === pullRequest.headRepository.name && headPush.getShortRemoteRef() === pullRequest.headRefName;
    if (fromPullRefspec || fromHeadRepo) {
      return this.checkoutOp.disable(checkoutStates.CURRENT, 'Current');
    }
    return this.checkoutOp.enable();
  }
  async checkout() {
    const {
      pullRequest
    } = this.props;
    const {
      headRepository
    } = pullRequest;
    const fullHeadRef = `refs/heads/${pullRequest.headRefName}`;
    let sourceRemoteName, localRefName;

    // Discover or create a remote pointing to the repo containing the pull request's head ref.
    // If the local repository already has the head repository specified as a remote, that remote will be used, so
    // that any related configuration is picked up for the fetch. Otherwise, the head repository fetch URL is used
    // directly.
    const headRemotes = this.props.remotes.matchingGitHubRepository(headRepository.owner.login, headRepository.name);
    if (headRemotes.length > 0) {
      sourceRemoteName = headRemotes[0].getName();
    } else {
      const url = {
        https: headRepository.url + '.git',
        ssh: headRepository.sshUrl
      }[this.props.remotes.mostUsedProtocol(['https', 'ssh'])];

      // This will throw if a remote with this name already exists (and points somewhere else, or we would have found
      // it above). ¯\_(ツ)_/¯
      const remote = await this.props.localRepository.addRemote(headRepository.owner.login, url);
      sourceRemoteName = remote.getName();
    }

    // Identify an existing local ref that already corresponds to the pull request, if one exists. Otherwise, generate
    // a new local ref name.
    const pullTargets = this.props.branches.getPullTargets(sourceRemoteName, fullHeadRef);
    if (pullTargets.length > 0) {
      localRefName = pullTargets[0].getName();

      // Check out the existing local ref.
      await this.props.localRepository.checkout(localRefName);
      try {
        await this.props.localRepository.pull(fullHeadRef, {
          remoteName: sourceRemoteName,
          ffOnly: true
        });
      } finally {
        (0, _reporterProxy.incrementCounter)('checkout-pr');
      }
      return;
    }
    await this.props.localRepository.fetch(fullHeadRef, {
      remoteName: sourceRemoteName
    });

    // Check out the local ref and set it up to track the head ref.
    await this.props.localRepository.checkout(`pr-${pullRequest.number}/${headRepository.owner.login}/${pullRequest.headRefName}`, {
      createNew: true,
      track: true,
      startPoint: `refs/remotes/${sourceRemoteName}/${pullRequest.headRefName}`
    });
    (0, _reporterProxy.incrementCounter)('checkout-pr');
  }
}
exports.BarePullRequestCheckoutController = BarePullRequestCheckoutController;
_defineProperty(BarePullRequestCheckoutController, "propTypes", {
  // GraphQL response
  repository: _propTypes.default.shape({
    name: _propTypes.default.string.isRequired,
    owner: _propTypes.default.shape({
      login: _propTypes.default.string.isRequired
    }).isRequired
  }).isRequired,
  pullRequest: _propTypes.default.shape({
    number: _propTypes.default.number.isRequired,
    headRefName: _propTypes.default.string.isRequired,
    headRepository: _propTypes.default.shape({
      name: _propTypes.default.string.isRequired,
      url: _propTypes.default.string.isRequired,
      sshUrl: _propTypes.default.string.isRequired,
      owner: _propTypes.default.shape({
        login: _propTypes.default.string.isRequired
      })
    })
  }).isRequired,
  // Repository model and attributes
  localRepository: _propTypes.default.object.isRequired,
  isAbsent: _propTypes.default.bool.isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  isPresent: _propTypes.default.bool.isRequired,
  isMerging: _propTypes.default.bool.isRequired,
  isRebasing: _propTypes.default.bool.isRequired,
  branches: _propTypes2.BranchSetPropType.isRequired,
  remotes: _propTypes2.RemoteSetPropType.isRequired,
  children: _propTypes.default.func.isRequired
});
var _default = (0, _reactRelay.createFragmentContainer)(BarePullRequestCheckoutController, {
  repository: function () {
    const node = require("./__generated__/prCheckoutController_repository.graphql");
    if (node.hash && node.hash !== "b2212745240c03ff8fc7cb13dfc63183") {
      console.error("The definition of 'prCheckoutController_repository' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
    }
    return require("./__generated__/prCheckoutController_repository.graphql");
  },
  pullRequest: function () {
    const node = require("./__generated__/prCheckoutController_pullRequest.graphql");
    if (node.hash && node.hash !== "66e001f389a2c4f74c1369cf69b31268") {
      console.error("The definition of 'prCheckoutController_pullRequest' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
    }
    return require("./__generated__/prCheckoutController_pullRequest.graphql");
  }
});
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGVja291dFN0YXRlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwid2hlbiIsImNhc2VzIiwiZGVmYXVsdCIsImNoZWNrb3V0U3RhdGVzIiwiSElEREVOIiwiRElTQUJMRUQiLCJCVVNZIiwiQ1VSUkVOVCIsIkJhcmVQdWxsUmVxdWVzdENoZWNrb3V0Q29udHJvbGxlciIsIlJlYWN0IiwiQ29tcG9uZW50IiwicHJvcHMiLCJzdGF0ZSIsImNoZWNrb3V0SW5Qcm9ncmVzcyIsImNoZWNrb3V0T3AiLCJFbmFibGVhYmxlT3BlcmF0aW9uIiwiY2hlY2tvdXQiLCJjYXRjaCIsImUiLCJHaXRFcnJvciIsInRvZ2dsZVN0YXRlIiwicmVuZGVyIiwiY2hpbGRyZW4iLCJuZXh0Q2hlY2tvdXRPcCIsInJlcG9zaXRvcnkiLCJwdWxsUmVxdWVzdCIsImlzQWJzZW50IiwiZGlzYWJsZSIsImlzTG9hZGluZyIsImlzUHJlc2VudCIsImlzTWVyZ2luZyIsImlzUmViYXNpbmciLCJoZWFkUmVwb3NpdG9yeSIsImhlYWRQdXNoIiwiYnJhbmNoZXMiLCJnZXRIZWFkQnJhbmNoIiwiZ2V0UHVzaCIsImhlYWRSZW1vdGUiLCJyZW1vdGVzIiwid2l0aE5hbWUiLCJnZXRSZW1vdGVOYW1lIiwiZnJvbVB1bGxSZWZzcGVjIiwiZ2V0T3duZXIiLCJvd25lciIsImxvZ2luIiwiZ2V0UmVwbyIsImdldFNob3J0UmVtb3RlUmVmIiwibnVtYmVyIiwiZnJvbUhlYWRSZXBvIiwiaGVhZFJlZk5hbWUiLCJlbmFibGUiLCJmdWxsSGVhZFJlZiIsInNvdXJjZVJlbW90ZU5hbWUiLCJsb2NhbFJlZk5hbWUiLCJoZWFkUmVtb3RlcyIsIm1hdGNoaW5nR2l0SHViUmVwb3NpdG9yeSIsImxlbmd0aCIsImdldE5hbWUiLCJ1cmwiLCJodHRwcyIsInNzaCIsInNzaFVybCIsIm1vc3RVc2VkUHJvdG9jb2wiLCJyZW1vdGUiLCJsb2NhbFJlcG9zaXRvcnkiLCJhZGRSZW1vdGUiLCJwdWxsVGFyZ2V0cyIsImdldFB1bGxUYXJnZXRzIiwicHVsbCIsInJlbW90ZU5hbWUiLCJmZk9ubHkiLCJpbmNyZW1lbnRDb3VudGVyIiwiZmV0Y2giLCJjcmVhdGVOZXciLCJ0cmFjayIsInN0YXJ0UG9pbnQiLCJQcm9wVHlwZXMiLCJzaGFwZSIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJvYmplY3QiLCJib29sIiwiQnJhbmNoU2V0UHJvcFR5cGUiLCJSZW1vdGVTZXRQcm9wVHlwZSIsImZ1bmMiLCJjcmVhdGVGcmFnbWVudENvbnRhaW5lciJdLCJzb3VyY2VzIjpbInByLWNoZWNrb3V0LWNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge2dyYXBocWwsIGNyZWF0ZUZyYWdtZW50Q29udGFpbmVyfSBmcm9tICdyZWFjdC1yZWxheSc7XG5cbmltcG9ydCBFbmFibGVhYmxlT3BlcmF0aW9uIGZyb20gJy4uL21vZGVscy9lbmFibGVhYmxlLW9wZXJhdGlvbic7XG5pbXBvcnQge0dpdEVycm9yfSBmcm9tICcuLi9naXQtc2hlbGwtb3V0LXN0cmF0ZWd5JztcbmltcG9ydCB7UmVtb3RlU2V0UHJvcFR5cGUsIEJyYW5jaFNldFByb3BUeXBlfSBmcm9tICcuLi9wcm9wLXR5cGVzJztcbmltcG9ydCB7aW5jcmVtZW50Q291bnRlcn0gZnJvbSAnLi4vcmVwb3J0ZXItcHJveHknO1xuXG5jbGFzcyBDaGVja291dFN0YXRlIHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cblxuICB3aGVuKGNhc2VzKSB7XG4gICAgcmV0dXJuIGNhc2VzW3RoaXMubmFtZV0gfHwgY2FzZXMuZGVmYXVsdDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY2hlY2tvdXRTdGF0ZXMgPSB7XG4gIEhJRERFTjogbmV3IENoZWNrb3V0U3RhdGUoJ2hpZGRlbicpLFxuICBESVNBQkxFRDogbmV3IENoZWNrb3V0U3RhdGUoJ2Rpc2FibGVkJyksXG4gIEJVU1k6IG5ldyBDaGVja291dFN0YXRlKCdidXN5JyksXG4gIENVUlJFTlQ6IG5ldyBDaGVja291dFN0YXRlKCdjdXJyZW50JyksXG59O1xuXG5leHBvcnQgY2xhc3MgQmFyZVB1bGxSZXF1ZXN0Q2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvLyBHcmFwaFFMIHJlc3BvbnNlXG4gICAgcmVwb3NpdG9yeTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgIG93bmVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBsb2dpbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgfSkuaXNSZXF1aXJlZCxcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIHB1bGxSZXF1ZXN0OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgbnVtYmVyOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICBoZWFkUmVmTmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgaGVhZFJlcG9zaXRvcnk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgdXJsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHNzaFVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBvd25lcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICBsb2dpbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICB9KSxcbiAgICAgIH0pLFxuICAgIH0pLmlzUmVxdWlyZWQsXG5cbiAgICAvLyBSZXBvc2l0b3J5IG1vZGVsIGFuZCBhdHRyaWJ1dGVzXG4gICAgbG9jYWxSZXBvc2l0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgaXNBYnNlbnQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIGlzUHJlc2VudDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBpc01lcmdpbmc6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgaXNSZWJhc2luZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBicmFuY2hlczogQnJhbmNoU2V0UHJvcFR5cGUuaXNSZXF1aXJlZCxcbiAgICByZW1vdGVzOiBSZW1vdGVTZXRQcm9wVHlwZS5pc1JlcXVpcmVkLFxuXG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjaGVja291dEluUHJvZ3Jlc3M6IGZhbHNlLFxuICAgIH07XG5cbiAgICB0aGlzLmNoZWNrb3V0T3AgPSBuZXcgRW5hYmxlYWJsZU9wZXJhdGlvbihcbiAgICAgICgpID0+IHRoaXMuY2hlY2tvdXQoKS5jYXRjaChlID0+IHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIEdpdEVycm9yKSkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICk7XG4gICAgdGhpcy5jaGVja291dE9wLnRvZ2dsZVN0YXRlKHRoaXMsICdjaGVja291dEluUHJvZ3Jlc3MnKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbih0aGlzLm5leHRDaGVja291dE9wKCkpO1xuICB9XG5cbiAgbmV4dENoZWNrb3V0T3AoKSB7XG4gICAgY29uc3Qge3JlcG9zaXRvcnksIHB1bGxSZXF1ZXN0fSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pc0Fic2VudCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tvdXRPcC5kaXNhYmxlKGNoZWNrb3V0U3RhdGVzLkhJRERFTiwgJ05vIHJlcG9zaXRvcnkgZm91bmQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoZWNrb3V0T3AuZGlzYWJsZShjaGVja291dFN0YXRlcy5ESVNBQkxFRCwgJ0xvYWRpbmcnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuaXNQcmVzZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGVja291dE9wLmRpc2FibGUoY2hlY2tvdXRTdGF0ZXMuRElTQUJMRUQsICdObyByZXBvc2l0b3J5IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuaXNNZXJnaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGVja291dE9wLmRpc2FibGUoY2hlY2tvdXRTdGF0ZXMuRElTQUJMRUQsICdNZXJnZSBpbiBwcm9ncmVzcycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmlzUmViYXNpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoZWNrb3V0T3AuZGlzYWJsZShjaGVja291dFN0YXRlcy5ESVNBQkxFRCwgJ1JlYmFzZSBpbiBwcm9ncmVzcycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLmNoZWNrb3V0SW5Qcm9ncmVzcykge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tvdXRPcC5kaXNhYmxlKGNoZWNrb3V0U3RhdGVzLkRJU0FCTEVELCAnQ2hlY2tpbmcgb3V0Li4uJyk7XG4gICAgfVxuXG4gICAgLy8gZGV0ZXJtaW5lIGlmIHB1bGxSZXF1ZXN0LmhlYWRSZXBvc2l0b3J5IGlzIG51bGxcbiAgICAvLyB0aGlzIGNhbiBoYXBwZW4gaWYgYSByZXBvc2l0b3J5IGhhcyBiZWVuIGRlbGV0ZWQuXG4gICAgaWYgKCFwdWxsUmVxdWVzdC5oZWFkUmVwb3NpdG9yeSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tvdXRPcC5kaXNhYmxlKGNoZWNrb3V0U3RhdGVzLkRJU0FCTEVELCAnUHVsbCByZXF1ZXN0IGhlYWQgcmVwb3NpdG9yeSBkb2VzIG5vdCBleGlzdCcpO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBpZiB3ZSBhbHJlYWR5IGhhdmUgdGhpcyBQUiBjaGVja2VkIG91dC5cblxuICAgIGNvbnN0IGhlYWRQdXNoID0gdGhpcy5wcm9wcy5icmFuY2hlcy5nZXRIZWFkQnJhbmNoKCkuZ2V0UHVzaCgpO1xuICAgIGNvbnN0IGhlYWRSZW1vdGUgPSB0aGlzLnByb3BzLnJlbW90ZXMud2l0aE5hbWUoaGVhZFB1c2guZ2V0UmVtb3RlTmFtZSgpKTtcblxuICAgIC8vIChkZXRlY3QgY2hlY2tvdXQgZnJvbSBwdWxsLyMjIyByZWZzcGVjKVxuICAgIGNvbnN0IGZyb21QdWxsUmVmc3BlYyA9XG4gICAgICBoZWFkUmVtb3RlLmdldE93bmVyKCkgPT09IHJlcG9zaXRvcnkub3duZXIubG9naW4gJiZcbiAgICAgIGhlYWRSZW1vdGUuZ2V0UmVwbygpID09PSByZXBvc2l0b3J5Lm5hbWUgJiZcbiAgICAgIGhlYWRQdXNoLmdldFNob3J0UmVtb3RlUmVmKCkgPT09IGBwdWxsLyR7cHVsbFJlcXVlc3QubnVtYmVyfS9oZWFkYDtcblxuICAgIC8vIChkZXRlY3QgY2hlY2tvdXQgZnJvbSBoZWFkIHJlcG9zaXRvcnkpXG4gICAgY29uc3QgZnJvbUhlYWRSZXBvID1cbiAgICAgIGhlYWRSZW1vdGUuZ2V0T3duZXIoKSA9PT0gcHVsbFJlcXVlc3QuaGVhZFJlcG9zaXRvcnkub3duZXIubG9naW4gJiZcbiAgICAgIGhlYWRSZW1vdGUuZ2V0UmVwbygpID09PSBwdWxsUmVxdWVzdC5oZWFkUmVwb3NpdG9yeS5uYW1lICYmXG4gICAgICBoZWFkUHVzaC5nZXRTaG9ydFJlbW90ZVJlZigpID09PSBwdWxsUmVxdWVzdC5oZWFkUmVmTmFtZTtcblxuICAgIGlmIChmcm9tUHVsbFJlZnNwZWMgfHwgZnJvbUhlYWRSZXBvKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGVja291dE9wLmRpc2FibGUoY2hlY2tvdXRTdGF0ZXMuQ1VSUkVOVCwgJ0N1cnJlbnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jaGVja291dE9wLmVuYWJsZSgpO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tvdXQoKSB7XG4gICAgY29uc3Qge3B1bGxSZXF1ZXN0fSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2hlYWRSZXBvc2l0b3J5fSA9IHB1bGxSZXF1ZXN0O1xuXG4gICAgY29uc3QgZnVsbEhlYWRSZWYgPSBgcmVmcy9oZWFkcy8ke3B1bGxSZXF1ZXN0LmhlYWRSZWZOYW1lfWA7XG5cbiAgICBsZXQgc291cmNlUmVtb3RlTmFtZSwgbG9jYWxSZWZOYW1lO1xuXG4gICAgLy8gRGlzY292ZXIgb3IgY3JlYXRlIGEgcmVtb3RlIHBvaW50aW5nIHRvIHRoZSByZXBvIGNvbnRhaW5pbmcgdGhlIHB1bGwgcmVxdWVzdCdzIGhlYWQgcmVmLlxuICAgIC8vIElmIHRoZSBsb2NhbCByZXBvc2l0b3J5IGFscmVhZHkgaGFzIHRoZSBoZWFkIHJlcG9zaXRvcnkgc3BlY2lmaWVkIGFzIGEgcmVtb3RlLCB0aGF0IHJlbW90ZSB3aWxsIGJlIHVzZWQsIHNvXG4gICAgLy8gdGhhdCBhbnkgcmVsYXRlZCBjb25maWd1cmF0aW9uIGlzIHBpY2tlZCB1cCBmb3IgdGhlIGZldGNoLiBPdGhlcndpc2UsIHRoZSBoZWFkIHJlcG9zaXRvcnkgZmV0Y2ggVVJMIGlzIHVzZWRcbiAgICAvLyBkaXJlY3RseS5cbiAgICBjb25zdCBoZWFkUmVtb3RlcyA9IHRoaXMucHJvcHMucmVtb3Rlcy5tYXRjaGluZ0dpdEh1YlJlcG9zaXRvcnkoaGVhZFJlcG9zaXRvcnkub3duZXIubG9naW4sIGhlYWRSZXBvc2l0b3J5Lm5hbWUpO1xuICAgIGlmIChoZWFkUmVtb3Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzb3VyY2VSZW1vdGVOYW1lID0gaGVhZFJlbW90ZXNbMF0uZ2V0TmFtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1cmwgPSB7XG4gICAgICAgIGh0dHBzOiBoZWFkUmVwb3NpdG9yeS51cmwgKyAnLmdpdCcsXG4gICAgICAgIHNzaDogaGVhZFJlcG9zaXRvcnkuc3NoVXJsLFxuICAgICAgfVt0aGlzLnByb3BzLnJlbW90ZXMubW9zdFVzZWRQcm90b2NvbChbJ2h0dHBzJywgJ3NzaCddKV07XG5cbiAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBpZiBhIHJlbW90ZSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cyAoYW5kIHBvaW50cyBzb21ld2hlcmUgZWxzZSwgb3Igd2Ugd291bGQgaGF2ZSBmb3VuZFxuICAgICAgLy8gaXQgYWJvdmUpLiDCr1xcXyjjg4QpXy/Cr1xuICAgICAgY29uc3QgcmVtb3RlID0gYXdhaXQgdGhpcy5wcm9wcy5sb2NhbFJlcG9zaXRvcnkuYWRkUmVtb3RlKGhlYWRSZXBvc2l0b3J5Lm93bmVyLmxvZ2luLCB1cmwpO1xuICAgICAgc291cmNlUmVtb3RlTmFtZSA9IHJlbW90ZS5nZXROYW1lKCk7XG4gICAgfVxuXG4gICAgLy8gSWRlbnRpZnkgYW4gZXhpc3RpbmcgbG9jYWwgcmVmIHRoYXQgYWxyZWFkeSBjb3JyZXNwb25kcyB0byB0aGUgcHVsbCByZXF1ZXN0LCBpZiBvbmUgZXhpc3RzLiBPdGhlcndpc2UsIGdlbmVyYXRlXG4gICAgLy8gYSBuZXcgbG9jYWwgcmVmIG5hbWUuXG4gICAgY29uc3QgcHVsbFRhcmdldHMgPSB0aGlzLnByb3BzLmJyYW5jaGVzLmdldFB1bGxUYXJnZXRzKHNvdXJjZVJlbW90ZU5hbWUsIGZ1bGxIZWFkUmVmKTtcbiAgICBpZiAocHVsbFRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgbG9jYWxSZWZOYW1lID0gcHVsbFRhcmdldHNbMF0uZ2V0TmFtZSgpO1xuXG4gICAgICAvLyBDaGVjayBvdXQgdGhlIGV4aXN0aW5nIGxvY2FsIHJlZi5cbiAgICAgIGF3YWl0IHRoaXMucHJvcHMubG9jYWxSZXBvc2l0b3J5LmNoZWNrb3V0KGxvY2FsUmVmTmFtZSk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnByb3BzLmxvY2FsUmVwb3NpdG9yeS5wdWxsKGZ1bGxIZWFkUmVmLCB7cmVtb3RlTmFtZTogc291cmNlUmVtb3RlTmFtZSwgZmZPbmx5OiB0cnVlfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpbmNyZW1lbnRDb3VudGVyKCdjaGVja291dC1wcicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5sb2NhbFJlcG9zaXRvcnkuZmV0Y2goZnVsbEhlYWRSZWYsIHtyZW1vdGVOYW1lOiBzb3VyY2VSZW1vdGVOYW1lfSk7XG5cbiAgICAvLyBDaGVjayBvdXQgdGhlIGxvY2FsIHJlZiBhbmQgc2V0IGl0IHVwIHRvIHRyYWNrIHRoZSBoZWFkIHJlZi5cbiAgICBhd2FpdCB0aGlzLnByb3BzLmxvY2FsUmVwb3NpdG9yeS5jaGVja291dChcbiAgICAgIGBwci0ke3B1bGxSZXF1ZXN0Lm51bWJlcn0vJHtoZWFkUmVwb3NpdG9yeS5vd25lci5sb2dpbn0vJHtwdWxsUmVxdWVzdC5oZWFkUmVmTmFtZX1gLFxuICAgICAge2NyZWF0ZU5ldzogdHJ1ZSwgdHJhY2s6IHRydWUsIHN0YXJ0UG9pbnQ6IGByZWZzL3JlbW90ZXMvJHtzb3VyY2VSZW1vdGVOYW1lfS8ke3B1bGxSZXF1ZXN0LmhlYWRSZWZOYW1lfWAsXG4gICAgICB9KTtcblxuICAgIGluY3JlbWVudENvdW50ZXIoJ2NoZWNrb3V0LXByJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRnJhZ21lbnRDb250YWluZXIoQmFyZVB1bGxSZXF1ZXN0Q2hlY2tvdXRDb250cm9sbGVyLCB7XG4gIHJlcG9zaXRvcnk6IGdyYXBocWxgXG4gICAgZnJhZ21lbnQgcHJDaGVja291dENvbnRyb2xsZXJfcmVwb3NpdG9yeSBvbiBSZXBvc2l0b3J5IHtcbiAgICAgIG5hbWVcbiAgICAgIG93bmVyIHtcbiAgICAgICAgbG9naW5cbiAgICAgIH1cbiAgICB9XG4gIGAsXG4gIHB1bGxSZXF1ZXN0OiBncmFwaHFsYFxuICAgIGZyYWdtZW50IHByQ2hlY2tvdXRDb250cm9sbGVyX3B1bGxSZXF1ZXN0IG9uIFB1bGxSZXF1ZXN0IHtcbiAgICAgIG51bWJlclxuICAgICAgaGVhZFJlZk5hbWVcbiAgICAgIGhlYWRSZXBvc2l0b3J5IHtcbiAgICAgICAgbmFtZVxuICAgICAgICB1cmxcbiAgICAgICAgc3NoVXJsXG4gICAgICAgIG93bmVyIHtcbiAgICAgICAgICBsb2dpblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgLFxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQW1EO0FBQUE7QUFBQTtBQUFBO0FBRW5ELE1BQU1BLGFBQWEsQ0FBQztFQUNsQkMsV0FBVyxDQUFDQyxJQUFJLEVBQUU7SUFDaEIsSUFBSSxDQUFDQSxJQUFJLEdBQUdBLElBQUk7RUFDbEI7RUFFQUMsSUFBSSxDQUFDQyxLQUFLLEVBQUU7SUFDVixPQUFPQSxLQUFLLENBQUMsSUFBSSxDQUFDRixJQUFJLENBQUMsSUFBSUUsS0FBSyxDQUFDQyxPQUFPO0VBQzFDO0FBQ0Y7QUFFTyxNQUFNQyxjQUFjLEdBQUc7RUFDNUJDLE1BQU0sRUFBRSxJQUFJUCxhQUFhLENBQUMsUUFBUSxDQUFDO0VBQ25DUSxRQUFRLEVBQUUsSUFBSVIsYUFBYSxDQUFDLFVBQVUsQ0FBQztFQUN2Q1MsSUFBSSxFQUFFLElBQUlULGFBQWEsQ0FBQyxNQUFNLENBQUM7RUFDL0JVLE9BQU8sRUFBRSxJQUFJVixhQUFhLENBQUMsU0FBUztBQUN0QyxDQUFDO0FBQUM7QUFFSyxNQUFNVyxpQ0FBaUMsU0FBU0MsY0FBSyxDQUFDQyxTQUFTLENBQUM7RUFtQ3JFWixXQUFXLENBQUNhLEtB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