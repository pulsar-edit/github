"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _branchView = _interopRequireDefault(require("../views/branch-view"));
var _branchMenuView = _interopRequireDefault(require("../views/branch-menu-view"));
var _pushPullView = _interopRequireDefault(require("../views/push-pull-view"));
var _changedFilesCountView = _interopRequireDefault(require("../views/changed-files-count-view"));
var _githubTileView = _interopRequireDefault(require("../views/github-tile-view"));
var _tooltip = _interopRequireDefault(require("../atom/tooltip"));
var _commands = _interopRequireWildcard(require("../atom/commands"));
var _observeModel = _interopRequireDefault(require("../views/observe-model"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
var _yubikiri = _interopRequireDefault(require("yubikiri"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class StatusBarTileController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "fetchData", repository => {
      return (0, _yubikiri.default)({
        currentBranch: repository.getCurrentBranch(),
        branches: repository.getBranches(),
        statusesForChangedFiles: repository.getStatusesForChangedFiles(),
        currentRemote: async query => repository.getRemoteForBranch((await query.currentBranch).getName()),
        aheadCount: async query => repository.getAheadCount((await query.currentBranch).getName()),
        behindCount: async query => repository.getBehindCount((await query.currentBranch).getName()),
        originExists: async () => (await repository.getRemotes()).withName('origin').isPresent()
      });
    });
    _defineProperty(this, "handleOpenGitTimingsView", e => {
      e && e.preventDefault();
      this.props.workspace.open('atom-github://debug/timings');
    });
    _defineProperty(this, "checkout", (branchName, options) => {
      return this.props.repository.checkout(branchName, options);
    });
    this.refBranchViewRoot = new _refHolder.default();
  }
  getChangedFilesCount(data) {
    const {
      stagedFiles,
      unstagedFiles,
      mergeConflictFiles
    } = data.statusesForChangedFiles;
    const changedFiles = new Set();
    for (const filePath in unstagedFiles) {
      changedFiles.add(filePath);
    }
    for (const filePath in stagedFiles) {
      changedFiles.add(filePath);
    }
    for (const filePath in mergeConflictFiles) {
      changedFiles.add(filePath);
    }
    return changedFiles.size;
  }
  render() {
    return _react.default.createElement(_observeModel.default, {
      model: this.props.repository,
      fetchData: this.fetchData
    }, data => data ? this.renderWithData(data) : null);
  }
  renderWithData(data) {
    let changedFilesCount, mergeConflictsPresent;
    if (data.statusesForChangedFiles) {
      changedFilesCount = this.getChangedFilesCount(data);
      mergeConflictsPresent = Object.keys(data.statusesForChangedFiles.mergeConflictFiles).length > 0;
    }
    const repoProps = {
      repository: this.props.repository,
      currentBranch: data.currentBranch,
      branches: data.branches,
      currentRemote: data.currentRemote,
      aheadCount: data.aheadCount,
      behindCount: data.behindCount,
      originExists: data.originExists,
      changedFilesCount,
      mergeConflictsPresent
    };
    return _react.default.createElement(_react.Fragment, null, this.renderTiles(repoProps), _react.default.createElement(_githubTileView.default, {
      didClick: this.props.toggleGithubTab
    }), _react.default.createElement(_changedFilesCountView.default, {
      didClick: this.props.toggleGitTab,
      changedFilesCount: repoProps.changedFilesCount,
      mergeConflictsPresent: repoProps.mergeConflictsPresent
    }));
  }
  renderTiles(repoProps) {
    if (!this.props.repository.showStatusBarTiles()) {
      return null;
    }
    const operationStates = this.props.repository.getOperationStates();
    const pushInProgress = operationStates.isPushInProgress();
    const pullInProgress = operationStates.isPullInProgress();
    const fetchInProgress = operationStates.isFetchInProgress();
    return _react.default.createElement(_react.Fragment, null, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: "atom-workspace"
    }, _react.default.createElement(_commands.Command, {
      command: "github:fetch",
      callback: this.fetch(repoProps)
    }), _react.default.createElement(_commands.Command, {
      command: "github:pull",
      callback: this.pull(repoProps)
    }), _react.default.createElement(_commands.Command, {
      command: "github:push",
      callback: () => this.push(repoProps)({
        force: false,
        setUpstream: !repoProps.currentRemote.isPresent()
      })
    }), _react.default.createElement(_commands.Command, {
      command: "github:force-push",
      callback: () => this.push(repoProps)({
        force: true,
        setUpstream: !repoProps.currentRemote.isPresent()
      })
    })), _react.default.createElement(_branchView.default, {
      refRoot: this.refBranchViewRoot.setter,
      workspace: this.props.workspace,
      checkout: this.checkout,
      currentBranch: repoProps.currentBranch
    }), _react.default.createElement(_tooltip.default, {
      manager: this.props.tooltips,
      target: this.refBranchViewRoot,
      trigger: "click",
      className: "github-StatusBarTileController-tooltipMenu"
    }, _react.default.createElement(_branchMenuView.default, {
      workspace: this.props.workspace,
      notificationManager: this.props.notificationManager,
      commands: this.props.commands,
      checkout: this.checkout,
      branches: repoProps.branches,
      currentBranch: repoProps.currentBranch
    })), _react.default.createElement(_pushPullView.default, {
      isSyncing: fetchInProgress || pullInProgress || pushInProgress,
      isFetching: fetchInProgress,
      isPulling: pullInProgress,
      isPushing: pushInProgress,
      push: this.push(repoProps),
      pull: this.pull(repoProps),
      fetch: this.fetch(repoProps),
      tooltipManager: this.props.tooltips,
      currentBranch: repoProps.currentBranch,
      currentRemote: repoProps.currentRemote,
      behindCount: repoProps.behindCount,
      aheadCount: repoProps.aheadCount,
      originExists: repoProps.originExists
    }));
  }
  push(data) {
    return ({
      force,
      setUpstream
    } = {}) => {
      return this.props.repository.push(data.currentBranch.getName(), {
        force,
        setUpstream,
        refSpec: data.currentBranch.getRefSpec('PUSH')
      });
    };
  }
  pull(data) {
    return () => {
      return this.props.repository.pull(data.currentBranch.getName(), {
        refSpec: data.currentBranch.getRefSpec('PULL')
      });
    };
  }
  fetch(data) {
    return () => {
      const upstream = data.currentBranch.getUpstream();
      return this.props.repository.fetch(upstream.getRemoteRef(), {
        remoteName: upstream.getRemoteName()
      });
    };
  }
}
exports.default = StatusBarTileController;
_defineProperty(StatusBarTileController, "propTypes", {
  workspace: _propTypes.default.object.isRequired,
  notificationManager: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  tooltips: _propTypes.default.object.isRequired,
  confirm: _propTypes.default.func.isRequired,
  repository: _propTypes.default.object.isRequired,
  toggleGitTab: _propTypes.default.func,
  toggleGithubTab: _propTypes.default.func
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9icmFuY2hWaWV3IiwiX2JyYW5jaE1lbnVWaWV3IiwiX3B1c2hQdWxsVmlldyIsIl9jaGFuZ2VkRmlsZXNDb3VudFZpZXciLCJfZ2l0aHViVGlsZVZpZXciLCJfdG9vbHRpcCIsIl9jb21tYW5kcyIsIl9vYnNlcnZlTW9kZWwiLCJfcmVmSG9sZGVyIiwiX3l1YmlraXJpIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFyZyIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsImlucHV0IiwiaGludCIsInByaW0iLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsInVuZGVmaW5lZCIsInJlcyIsIlR5cGVFcnJvciIsIk51bWJlciIsIlN0YXR1c0JhclRpbGVDb250cm9sbGVyIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwicmVwb3NpdG9yeSIsInl1YmlraXJpIiwiY3VycmVudEJyYW5jaCIsImdldEN1cnJlbnRCcmFuY2giLCJicmFuY2hlcyIsImdldEJyYW5jaGVzIiwic3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXMiLCJnZXRTdGF0dXNlc0ZvckNoYW5nZWRGaWxlcyIsImN1cnJlbnRSZW1vdGUiLCJxdWVyeSIsImdldFJlbW90ZUZvckJyYW5jaCIsImdldE5hbWUiLCJhaGVhZENvdW50IiwiZ2V0QWhlYWRDb3VudCIsImJlaGluZENvdW50IiwiZ2V0QmVoaW5kQ291bnQiLCJvcmlnaW5FeGlzdHMiLCJnZXRSZW1vdGVzIiwid2l0aE5hbWUiLCJpc1ByZXNlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIndvcmtzcGFjZSIsIm9wZW4iLCJicmFuY2hOYW1lIiwib3B0aW9ucyIsImNoZWNrb3V0IiwicmVmQnJhbmNoVmlld1Jvb3QiLCJSZWZIb2xkZXIiLCJnZXRDaGFuZ2VkRmlsZXNDb3VudCIsImRhdGEiLCJzdGFnZWRGaWxlcyIsInVuc3RhZ2VkRmlsZXMiLCJtZXJnZUNvbmZsaWN0RmlsZXMiLCJjaGFuZ2VkRmlsZXMiLCJTZXQiLCJmaWxlUGF0aCIsImFkZCIsInNpemUiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwibW9kZWwiLCJmZXRjaERhdGEiLCJyZW5kZXJXaXRoRGF0YSIsImNoYW5nZWRGaWxlc0NvdW50IiwibWVyZ2VDb25mbGljdHNQcmVzZW50Iiwia2V5cyIsImxlbmd0aCIsInJlcG9Qcm9wcyIsIkZyYWdtZW50IiwicmVuZGVyVGlsZXMiLCJkaWRDbGljayIsInRvZ2dsZUdpdGh1YlRhYiIsInRvZ2dsZUdpdFRhYiIsInNob3dTdGF0dXNCYXJUaWxlcyIsIm9wZXJhdGlvblN0YXRlcyIsImdldE9wZXJhdGlvblN0YXRlcyIsInB1c2hJblByb2dyZXNzIiwiaXNQdXNoSW5Qcm9ncmVzcyIsInB1bGxJblByb2dyZXNzIiwiaXNQdWxsSW5Qcm9ncmVzcyIsImZldGNoSW5Qcm9ncmVzcyIsImlzRmV0Y2hJblByb2dyZXNzIiwicmVnaXN0cnkiLCJjb21tYW5kcyIsInRhcmdldCIsIkNvbW1hbmQiLCJjb21tYW5kIiwiY2FsbGJhY2siLCJmZXRjaCIsInB1bGwiLCJwdXNoIiwiZm9yY2UiLCJzZXRVcHN0cmVhbSIsInJlZlJvb3QiLCJzZXR0ZXIiLCJtYW5hZ2VyIiwidG9vbHRpcHMiLCJ0cmlnZ2VyIiwiY2xhc3NOYW1lIiwibm90aWZpY2F0aW9uTWFuYWdlciIsImlzU3luY2luZyIsImlzRmV0Y2hpbmciLCJpc1B1bGxpbmciLCJpc1B1c2hpbmciLCJ0b29sdGlwTWFuYWdlciIsInJlZlNwZWMiLCJnZXRSZWZTcGVjIiwidXBzdHJlYW0iLCJnZXRVcHN0cmVhbSIsImdldFJlbW90ZVJlZiIsInJlbW90ZU5hbWUiLCJnZXRSZW1vdGVOYW1lIiwiZXhwb3J0cyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJjb25maXJtIiwiZnVuYyJdLCJzb3VyY2VzIjpbInN0YXR1cy1iYXItdGlsZS1jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0ZyYWdtZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5pbXBvcnQgQnJhbmNoVmlldyBmcm9tICcuLi92aWV3cy9icmFuY2gtdmlldyc7XG5pbXBvcnQgQnJhbmNoTWVudVZpZXcgZnJvbSAnLi4vdmlld3MvYnJhbmNoLW1lbnUtdmlldyc7XG5pbXBvcnQgUHVzaFB1bGxWaWV3IGZyb20gJy4uL3ZpZXdzL3B1c2gtcHVsbC12aWV3JztcbmltcG9ydCBDaGFuZ2VkRmlsZXNDb3VudFZpZXcgZnJvbSAnLi4vdmlld3MvY2hhbmdlZC1maWxlcy1jb3VudC12aWV3JztcbmltcG9ydCBHaXRodWJUaWxlVmlldyBmcm9tICcuLi92aWV3cy9naXRodWItdGlsZS12aWV3JztcbmltcG9ydCBUb29sdGlwIGZyb20gJy4uL2F0b20vdG9vbHRpcCc7XG5pbXBvcnQgQ29tbWFuZHMsIHtDb21tYW5kfSBmcm9tICcuLi9hdG9tL2NvbW1hbmRzJztcbmltcG9ydCBPYnNlcnZlTW9kZWwgZnJvbSAnLi4vdmlld3Mvb2JzZXJ2ZS1tb2RlbCc7XG5pbXBvcnQgUmVmSG9sZGVyIGZyb20gJy4uL21vZGVscy9yZWYtaG9sZGVyJztcbmltcG9ydCB5dWJpa2lyaSBmcm9tICd5dWJpa2lyaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXR1c0JhclRpbGVDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICB3b3Jrc3BhY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBub3RpZmljYXRpb25NYW5hZ2VyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29tbWFuZHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICB0b29sdGlwczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbmZpcm06IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgcmVwb3NpdG9yeTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRvZ2dsZUdpdFRhYjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgdG9nZ2xlR2l0aHViVGFiOiBQcm9wVHlwZXMuZnVuYyxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5yZWZCcmFuY2hWaWV3Um9vdCA9IG5ldyBSZWZIb2xkZXIoKTtcbiAgfVxuXG4gIGdldENoYW5nZWRGaWxlc0NvdW50KGRhdGEpIHtcbiAgICBjb25zdCB7c3RhZ2VkRmlsZXMsIHVuc3RhZ2VkRmlsZXMsIG1lcmdlQ29uZmxpY3RGaWxlc30gPSBkYXRhLnN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzO1xuICAgIGNvbnN0IGNoYW5nZWRGaWxlcyA9IG5ldyBTZXQoKTtcblxuICAgIGZvciAoY29uc3QgZmlsZVBhdGggaW4gdW5zdGFnZWRGaWxlcykge1xuICAgICAgY2hhbmdlZEZpbGVzLmFkZChmaWxlUGF0aCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgZmlsZVBhdGggaW4gc3RhZ2VkRmlsZXMpIHtcbiAgICAgIGNoYW5nZWRGaWxlcy5hZGQoZmlsZVBhdGgpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIGluIG1lcmdlQ29uZmxpY3RGaWxlcykge1xuICAgICAgY2hhbmdlZEZpbGVzLmFkZChmaWxlUGF0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZWRGaWxlcy5zaXplO1xuICB9XG5cbiAgZmV0Y2hEYXRhID0gcmVwb3NpdG9yeSA9PiB7XG4gICAgcmV0dXJuIHl1YmlraXJpKHtcbiAgICAgIGN1cnJlbnRCcmFuY2g6IHJlcG9zaXRvcnkuZ2V0Q3VycmVudEJyYW5jaCgpLFxuICAgICAgYnJhbmNoZXM6IHJlcG9zaXRvcnkuZ2V0QnJhbmNoZXMoKSxcbiAgICAgIHN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzOiByZXBvc2l0b3J5LmdldFN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzKCksXG4gICAgICBjdXJyZW50UmVtb3RlOiBhc3luYyBxdWVyeSA9PiByZXBvc2l0b3J5LmdldFJlbW90ZUZvckJyYW5jaCgoYXdhaXQgcXVlcnkuY3VycmVudEJyYW5jaCkuZ2V0TmFtZSgpKSxcbiAgICAgIGFoZWFkQ291bnQ6IGFzeW5jIHF1ZXJ5ID0+IHJlcG9zaXRvcnkuZ2V0QWhlYWRDb3VudCgoYXdhaXQgcXVlcnkuY3VycmVudEJyYW5jaCkuZ2V0TmFtZSgpKSxcbiAgICAgIGJlaGluZENvdW50OiBhc3luYyBxdWVyeSA9PiByZXBvc2l0b3J5LmdldEJlaGluZENvdW50KChhd2FpdCBxdWVyeS5jdXJyZW50QnJhbmNoKS5nZXROYW1lKCkpLFxuICAgICAgb3JpZ2luRXhpc3RzOiBhc3luYyAoKSA9PiAoYXdhaXQgcmVwb3NpdG9yeS5nZXRSZW1vdGVzKCkpLndpdGhOYW1lKCdvcmlnaW4nKS5pc1ByZXNlbnQoKSxcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPE9ic2VydmVNb2RlbCBtb2RlbD17dGhpcy5wcm9wcy5yZXBvc2l0b3J5fSBmZXRjaERhdGE9e3RoaXMuZmV0Y2hEYXRhfT5cbiAgICAgICAge2RhdGEgPT4gKGRhdGEgPyB0aGlzLnJlbmRlcldpdGhEYXRhKGRhdGEpIDogbnVsbCl9XG4gICAgICA8L09ic2VydmVNb2RlbD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyV2l0aERhdGEoZGF0YSkge1xuICAgIGxldCBjaGFuZ2VkRmlsZXNDb3VudCwgbWVyZ2VDb25mbGljdHNQcmVzZW50O1xuICAgIGlmIChkYXRhLnN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzKSB7XG4gICAgICBjaGFuZ2VkRmlsZXNDb3VudCA9IHRoaXMuZ2V0Q2hhbmdlZEZpbGVzQ291bnQoZGF0YSk7XG4gICAgICBtZXJnZUNvbmZsaWN0c1ByZXNlbnQgPSBPYmplY3Qua2V5cyhkYXRhLnN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzLm1lcmdlQ29uZmxpY3RGaWxlcykubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICBjb25zdCByZXBvUHJvcHMgPSB7XG4gICAgICByZXBvc2l0b3J5OiB0aGlzLnByb3BzLnJlcG9zaXRvcnksXG4gICAgICBjdXJyZW50QnJhbmNoOiBkYXRhLmN1cnJlbnRCcmFuY2gsXG4gICAgICBicmFuY2hlczogZGF0YS5icmFuY2hlcyxcbiAgICAgIGN1cnJlbnRSZW1vdGU6IGRhdGEuY3VycmVudFJlbW90ZSxcbiAgICAgIGFoZWFkQ291bnQ6IGRhdGEuYWhlYWRDb3VudCxcbiAgICAgIGJlaGluZENvdW50OiBkYXRhLmJlaGluZENvdW50LFxuICAgICAgb3JpZ2luRXhpc3RzOiBkYXRhLm9yaWdpbkV4aXN0cyxcbiAgICAgIGNoYW5nZWRGaWxlc0NvdW50LFxuICAgICAgbWVyZ2VDb25mbGljdHNQcmVzZW50LFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZyYWdtZW50PlxuICAgICAgICB7dGhpcy5yZW5kZXJUaWxlcyhyZXBvUHJvcHMpfVxuICAgICAgICA8R2l0aHViVGlsZVZpZXcgZGlkQ2xpY2s9e3RoaXMucHJvcHMudG9nZ2xlR2l0aHViVGFifSAvPlxuICAgICAgICA8Q2hhbmdlZEZpbGVzQ291bnRWaWV3XG4gICAgICAgICAgZGlkQ2xpY2s9e3RoaXMucHJvcHMudG9nZ2xlR2l0VGFifVxuICAgICAgICAgIGNoYW5nZWRGaWxlc0NvdW50PXtyZXBvUHJvcHMuY2hhbmdlZEZpbGVzQ291bnR9XG4gICAgICAgICAgbWVyZ2VDb25mbGljdHNQcmVzZW50PXtyZXBvUHJvcHMubWVyZ2VDb25mbGljdHNQcmVzZW50fVxuICAgICAgICAvPlxuICAgICAgPC9GcmFnbWVudD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyVGlsZXMocmVwb1Byb3BzKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnJlcG9zaXRvcnkuc2hvd1N0YXR1c0JhclRpbGVzKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZXJhdGlvblN0YXRlcyA9IHRoaXMucHJvcHMucmVwb3NpdG9yeS5nZXRPcGVyYXRpb25TdGF0ZXMoKTtcbiAgICBjb25zdCBwdXNoSW5Qcm9ncmVzcyA9IG9wZXJhdGlvblN0YXRlcy5pc1B1c2hJblByb2dyZXNzKCk7XG4gICAgY29uc3QgcHVsbEluUHJvZ3Jlc3MgPSBvcGVyYXRpb25TdGF0ZXMuaXNQdWxsSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IGZldGNoSW5Qcm9ncmVzcyA9IG9wZXJhdGlvblN0YXRlcy5pc0ZldGNoSW5Qcm9ncmVzcygpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxGcmFnbWVudD5cbiAgICAgICAgPENvbW1hbmRzIHJlZ2lzdHJ5PXt0aGlzLnByb3BzLmNvbW1hbmRzfSB0YXJnZXQ9XCJhdG9tLXdvcmtzcGFjZVwiPlxuICAgICAgICAgIDxDb21tYW5kIGNvbW1hbmQ9XCJnaXRodWI6ZmV0Y2hcIiBjYWxsYmFjaz17dGhpcy5mZXRjaChyZXBvUHJvcHMpfSAvPlxuICAgICAgICAgIDxDb21tYW5kIGNvbW1hbmQ9XCJnaXRodWI6cHVsbFwiIGNhbGxiYWNrPXt0aGlzLnB1bGwocmVwb1Byb3BzKX0gLz5cbiAgICAgICAgICA8Q29tbWFuZFxuICAgICAgICAgICAgY29tbWFuZD1cImdpdGh1YjpwdXNoXCJcbiAgICAgICAgICAgIGNhbGxiYWNrPXsoKSA9PiB0aGlzLnB1c2gocmVwb1Byb3BzKSh7Zm9yY2U6IGZhbHNlLCBzZXRVcHN0cmVhbTogIXJlcG9Qcm9wcy5jdXJyZW50UmVtb3RlLmlzUHJlc2VudCgpfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Q29tbWFuZFxuICAgICAgICAgICAgY29tbWFuZD1cImdpdGh1Yjpmb3JjZS1wdXNoXCJcbiAgICAgICAgICAgIGNhbGxiYWNrPXsoKSA9PiB0aGlzLnB1c2gocmVwb1Byb3BzKSh7Zm9yY2U6IHRydWUsIHNldFVwc3RyZWFtOiAhcmVwb1Byb3BzLmN1cnJlbnRSZW1vdGUuaXNQcmVzZW50KCl9KX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0NvbW1hbmRzPlxuICAgICAgICA8QnJhbmNoVmlld1xuICAgICAgICAgIHJlZlJvb3Q9e3RoaXMucmVmQnJhbmNoVmlld1Jvb3Quc2V0dGVyfVxuICAgICAgICAgIHdvcmtzcGFjZT17dGhpcy5wcm9wcy53b3Jrc3BhY2V9XG4gICAgICAgICAgY2hlY2tvdXQ9e3RoaXMuY2hlY2tvdXR9XG4gICAgICAgICAgY3VycmVudEJyYW5jaD17cmVwb1Byb3BzLmN1cnJlbnRCcmFuY2h9XG4gICAgICAgIC8+XG4gICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgbWFuYWdlcj17dGhpcy5wcm9wcy50b29sdGlwc31cbiAgICAgICAgICB0YXJnZXQ9e3RoaXMucmVmQnJhbmNoVmlld1Jvb3R9XG4gICAgICAgICAgdHJpZ2dlcj1cImNsaWNrXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJnaXRodWItU3RhdHVzQmFyVGlsZUNvbnRyb2xsZXItdG9vbHRpcE1lbnVcIj5cbiAgICAgICAgICA8QnJhbmNoTWVudVZpZXdcbiAgICAgICAgICAgIHdvcmtzcGFjZT17dGhpcy5wcm9wcy53b3Jrc3BhY2V9XG4gICAgICAgICAgICBub3RpZmljYXRpb25NYW5hZ2VyPXt0aGlzLnByb3BzLm5vdGlmaWNhdGlvbk1hbmFnZXJ9XG4gICAgICAgICAgICBjb21tYW5kcz17dGhpcy5wcm9wcy5jb21tYW5kc31cbiAgICAgICAgICAgIGNoZWNrb3V0PXt0aGlzLmNoZWNrb3V0fVxuICAgICAgICAgICAgYnJhbmNoZXM9e3JlcG9Qcm9wcy5icmFuY2hlc31cbiAgICAgICAgICAgIGN1cnJlbnRCcmFuY2g9e3JlcG9Qcm9wcy5jdXJyZW50QnJhbmNofVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgPFB1c2hQdWxsVmlld1xuICAgICAgICAgIGlzU3luY2luZz17ZmV0Y2hJblByb2dyZXNzIHx8IHB1bGxJblByb2dyZXNzIHx8IHB1c2hJblByb2dyZXNzfVxuICAgICAgICAgIGlzRmV0Y2hpbmc9e2ZldGNoSW5Qcm9ncmVzc31cbiAgICAgICAgICBpc1B1bGxpbmc9e3B1bGxJblByb2dyZXNzfVxuICAgICAgICAgIGlzUHVzaGluZz17cHVzaEluUHJvZ3Jlc3N9XG4gICAgICAgICAgcHVzaD17dGhpcy5wdXNoKHJlcG9Qcm9wcyl9XG4gICAgICAgICAgcHVsbD17dGhpcy5wdWxsKHJlcG9Qcm9wcyl9XG4gICAgICAgICAgZmV0Y2g9e3RoaXMuZmV0Y2gocmVwb1Byb3BzKX1cbiAgICAgICAgICB0b29sdGlwTWFuYWdlcj17dGhpcy5wcm9wcy50b29sdGlwc31cbiAgICAgICAgICBjdXJyZW50QnJhbmNoPXtyZXBvUHJvcHMuY3VycmVudEJyYW5jaH1cbiAgICAgICAgICBjdXJyZW50UmVtb3RlPXtyZXBvUHJvcHMuY3VycmVudFJlbW90ZX1cbiAgICAgICAgICBiZWhpbmRDb3VudD17cmVwb1Byb3BzLmJlaGluZENvdW50fVxuICAgICAgICAgIGFoZWFkQ291bnQ9e3JlcG9Qcm9wcy5haGVhZENvdW50fVxuICAgICAgICAgIG9yaWdpbkV4aXN0cz17cmVwb1Byb3BzLm9yaWdpbkV4aXN0c31cbiAgICAgICAgLz5cbiAgICAgIDwvRnJhZ21lbnQ+XG4gICAgKTtcbiAgfVxuXG4gIGhhbmRsZU9wZW5HaXRUaW1pbmdzVmlldyA9IGUgPT4ge1xuICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMucHJvcHMud29ya3NwYWNlLm9wZW4oJ2F0b20tZ2l0aHViOi8vZGVidWcvdGltaW5ncycpO1xuICB9XG5cbiAgY2hlY2tvdXQgPSAoYnJhbmNoTmFtZSwgb3B0aW9ucykgPT4ge1xuICAgIHJldHVybiB0aGlzLnByb3BzLnJlcG9zaXRvcnkuY2hlY2tvdXQoYnJhbmNoTmFtZSwgb3B0aW9ucyk7XG4gIH1cblxuICBwdXNoKGRhdGEpIHtcbiAgICByZXR1cm4gKHtmb3JjZSwgc2V0VXBzdHJlYW19ID0ge30pID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnJlcG9zaXRvcnkucHVzaChkYXRhLmN1cnJlbnRCcmFuY2guZ2V0TmFtZSgpLCB7XG4gICAgICAgIGZvcmNlLFxuICAgICAgICBzZXRVcHN0cmVhbSxcbiAgICAgICAgcmVmU3BlYzogZGF0YS5jdXJyZW50QnJhbmNoLmdldFJlZlNwZWMoJ1BVU0gnKSxcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICBwdWxsKGRhdGEpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucmVwb3NpdG9yeS5wdWxsKGRhdGEuY3VycmVudEJyYW5jaC5nZXROYW1lKCksIHtcbiAgICAgICAgcmVmU3BlYzogZGF0YS5jdXJyZW50QnJhbmNoLmdldFJlZlNwZWMoJ1BVTEwnKSxcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICBmZXRjaChkYXRhKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IHVwc3RyZWFtID0gZGF0YS5jdXJyZW50QnJhbmNoLmdldFVwc3RyZWFtKCk7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5yZXBvc2l0b3J5LmZldGNoKHVwc3RyZWFtLmdldFJlbW90ZVJlZigpLCB7XG4gICAgICAgIHJlbW90ZU5hbWU6IHVwc3Ry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