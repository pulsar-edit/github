"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _branchView = _interopRequireDefault(require("../views/branch-view"));
var _branchMenuView = _interopRequireDefault(require("../views/branch-menu-view"));
var _pushPullView = _interopRequireDefault(require("../views/push-pull-view"));
var _changedFilesCountView = _interopRequireDefault(require("../views/changed-files-count-view"));
var _githubTileView = _interopRequireDefault(require("../views/github-tile-view"));
var _tooltip = _interopRequireDefault(require("../atom/tooltip"));
var _commands = _interopRequireWildcard(require("../atom/commands"));
var _observeModel = _interopRequireDefault(require("../views/observe-model"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
var _yubikiri = _interopRequireDefault(require("yubikiri"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class StatusBarTileController extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "fetchData", repository => {
      return (0, _yubikiri.default)({
        currentBranch: repository.getCurrentBranch(),
        branches: repository.getBranches(),
        statusesForChangedFiles: repository.getStatusesForChangedFiles(),
        currentRemote: async query => repository.getRemoteForBranch((await query.currentBranch).getName()),
        aheadCount: async query => repository.getAheadCount((await query.currentBranch).getName()),
        behindCount: async query => repository.getBehindCount((await query.currentBranch).getName()),
        originExists: async () => (await repository.getRemotes()).withName('origin').isPresent()
      });
    });
    _defineProperty(this, "handleOpenGitTimingsView", e => {
      e && e.preventDefault();
      this.props.workspace.open('atom-github://debug/timings');
    });
    _defineProperty(this, "checkout", (branchName, options) => {
      return this.props.repository.checkout(branchName, options);
    });
    this.refBranchViewRoot = new _refHolder.default();
  }
  getChangedFilesCount(data) {
    const {
      stagedFiles,
      unstagedFiles,
      mergeConflictFiles
    } = data.statusesForChangedFiles;
    const changedFiles = new Set();
    for (const filePath in unstagedFiles) {
      changedFiles.add(filePath);
    }
    for (const filePath in stagedFiles) {
      changedFiles.add(filePath);
    }
    for (const filePath in mergeConflictFiles) {
      changedFiles.add(filePath);
    }
    return changedFiles.size;
  }
  render() {
    return _react.default.createElement(_observeModel.default, {
      model: this.props.repository,
      fetchData: this.fetchData
    }, data => data ? this.renderWithData(data) : null);
  }
  renderWithData(data) {
    let changedFilesCount, mergeConflictsPresent;
    if (data.statusesForChangedFiles) {
      changedFilesCount = this.getChangedFilesCount(data);
      mergeConflictsPresent = Object.keys(data.statusesForChangedFiles.mergeConflictFiles).length > 0;
    }
    const repoProps = {
      repository: this.props.repository,
      currentBranch: data.currentBranch,
      branches: data.branches,
      currentRemote: data.currentRemote,
      aheadCount: data.aheadCount,
      behindCount: data.behindCount,
      originExists: data.originExists,
      changedFilesCount,
      mergeConflictsPresent
    };
    return _react.default.createElement(_react.Fragment, null, this.renderTiles(repoProps), _react.default.createElement(_githubTileView.default, {
      didClick: this.props.toggleGithubTab
    }), _react.default.createElement(_changedFilesCountView.default, {
      didClick: this.props.toggleGitTab,
      changedFilesCount: repoProps.changedFilesCount,
      mergeConflictsPresent: repoProps.mergeConflictsPresent
    }));
  }
  renderTiles(repoProps) {
    if (!this.props.repository.showStatusBarTiles()) {
      return null;
    }
    const operationStates = this.props.repository.getOperationStates();
    const pushInProgress = operationStates.isPushInProgress();
    const pullInProgress = operationStates.isPullInProgress();
    const fetchInProgress = operationStates.isFetchInProgress();
    return _react.default.createElement(_react.Fragment, null, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: "atom-workspace"
    }, _react.default.createElement(_commands.Command, {
      command: "github:fetch",
      callback: this.fetch(repoProps)
    }), _react.default.createElement(_commands.Command, {
      command: "github:pull",
      callback: this.pull(repoProps)
    }), _react.default.createElement(_commands.Command, {
      command: "github:push",
      callback: () => this.push(repoProps)({
        force: false,
        setUpstream: !repoProps.currentRemote.isPresent()
      })
    }), _react.default.createElement(_commands.Command, {
      command: "github:force-push",
      callback: () => this.push(repoProps)({
        force: true,
        setUpstream: !repoProps.currentRemote.isPresent()
      })
    })), _react.default.createElement(_branchView.default, {
      refRoot: this.refBranchViewRoot.setter,
      workspace: this.props.workspace,
      checkout: this.checkout,
      currentBranch: repoProps.currentBranch
    }), _react.default.createElement(_tooltip.default, {
      manager: this.props.tooltips,
      target: this.refBranchViewRoot,
      trigger: "click",
      className: "github-StatusBarTileController-tooltipMenu"
    }, _react.default.createElement(_branchMenuView.default, {
      workspace: this.props.workspace,
      notificationManager: this.props.notificationManager,
      commands: this.props.commands,
      checkout: this.checkout,
      branches: repoProps.branches,
      currentBranch: repoProps.currentBranch
    })), _react.default.createElement(_pushPullView.default, {
      isSyncing: fetchInProgress || pullInProgress || pushInProgress,
      isFetching: fetchInProgress,
      isPulling: pullInProgress,
      isPushing: pushInProgress,
      push: this.push(repoProps),
      pull: this.pull(repoProps),
      fetch: this.fetch(repoProps),
      tooltipManager: this.props.tooltips,
      currentBranch: repoProps.currentBranch,
      currentRemote: repoProps.currentRemote,
      behindCount: repoProps.behindCount,
      aheadCount: repoProps.aheadCount,
      originExists: repoProps.originExists
    }));
  }
  push(data) {
    return ({
      force,
      setUpstream
    } = {}) => {
      return this.props.repository.push(data.currentBranch.getName(), {
        force,
        setUpstream,
        refSpec: data.currentBranch.getRefSpec('PUSH')
      });
    };
  }
  pull(data) {
    return () => {
      return this.props.repository.pull(data.currentBranch.getName(), {
        refSpec: data.currentBranch.getRefSpec('PULL')
      });
    };
  }
  fetch(data) {
    return () => {
      const upstream = data.currentBranch.getUpstream();
      return this.props.repository.fetch(upstream.getRemoteRef(), {
        remoteName: upstream.getRemoteName()
      });
    };
  }
}
exports.default = StatusBarTileController;
_defineProperty(StatusBarTileController, "propTypes", {
  workspace: _propTypes.default.object.isRequired,
  notificationManager: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  tooltips: _propTypes.default.object.isRequired,
  confirm: _propTypes.default.func.isRequired,
  repository: _propTypes.default.object.isRequired,
  toggleGitTab: _propTypes.default.func,
  toggleGithubTab: _propTypes.default.func
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9icmFuY2hWaWV3IiwiX2JyYW5jaE1lbnVWaWV3IiwiX3B1c2hQdWxsVmlldyIsIl9jaGFuZ2VkRmlsZXNDb3VudFZpZXciLCJfZ2l0aHViVGlsZVZpZXciLCJfdG9vbHRpcCIsIl9jb21tYW5kcyIsIl9vYnNlcnZlTW9kZWwiLCJfcmVmSG9sZGVyIiwiX3l1YmlraXJpIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiU3RhdHVzQmFyVGlsZUNvbnRyb2xsZXIiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJyZXBvc2l0b3J5IiwieXViaWtpcmkiLCJjdXJyZW50QnJhbmNoIiwiZ2V0Q3VycmVudEJyYW5jaCIsImJyYW5jaGVzIiwiZ2V0QnJhbmNoZXMiLCJzdGF0dXNlc0ZvckNoYW5nZWRGaWxlcyIsImdldFN0YXR1c2VzRm9yQ2hhbmdlZEZpbGVzIiwiY3VycmVudFJlbW90ZSIsInF1ZXJ5IiwiZ2V0UmVtb3RlRm9yQnJhbmNoIiwiZ2V0TmFtZSIsImFoZWFkQ291bnQiLCJnZXRBaGVhZENvdW50IiwiYmVoaW5kQ291bnQiLCJnZXRCZWhpbmRDb3VudCIsIm9yaWdpbkV4aXN0cyIsImdldFJlbW90ZXMiLCJ3aXRoTmFtZSIsImlzUHJlc2VudCIsInByZXZlbnREZWZhdWx0Iiwid29ya3NwYWNlIiwib3BlbiIsImJyYW5jaE5hbWUiLCJvcHRpb25zIiwiY2hlY2tvdXQiLCJyZWZCcmFuY2hWaWV3Um9vdCIsIlJlZkhvbGRlciIsImdldENoYW5nZWRGaWxlc0NvdW50IiwiZGF0YSIsInN0YWdlZEZpbGVzIiwidW5zdGFnZWRGaWxlcyIsIm1lcmdlQ29uZmxpY3RGaWxlcyIsImNoYW5nZWRGaWxlcyIsIlNldCIsImZpbGVQYXRoIiwiYWRkIiwic2l6ZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJtb2RlbCIsImZldGNoRGF0YSIsInJlbmRlcldpdGhEYXRhIiwiY2hhbmdlZEZpbGVzQ291bnQiLCJtZXJnZUNvbmZsaWN0c1ByZXNlbnQiLCJrZXlzIiwibGVuZ3RoIiwicmVwb1Byb3BzIiwiRnJhZ21lbnQiLCJyZW5kZXJUaWxlcyIsImRpZENsaWNrIiwidG9nZ2xlR2l0aHViVGFiIiwidG9nZ2xlR2l0VGFiIiwic2hvd1N0YXR1c0JhclRpbGVzIiwib3BlcmF0aW9uU3RhdGVzIiwiZ2V0T3BlcmF0aW9uU3RhdGVzIiwicHVzaEluUHJvZ3Jlc3MiLCJpc1B1c2hJblByb2dyZXNzIiwicHVsbEluUHJvZ3Jlc3MiLCJpc1B1bGxJblByb2dyZXNzIiwiZmV0Y2hJblByb2dyZXNzIiwiaXNGZXRjaEluUHJvZ3Jlc3MiLCJyZWdpc3RyeSIsImNvbW1hbmRzIiwidGFyZ2V0IiwiQ29tbWFuZCIsImNvbW1hbmQiLCJjYWxsYmFjayIsImZldGNoIiwicHVsbCIsInB1c2giLCJmb3JjZSIsInNldFVwc3RyZWFtIiwicmVmUm9vdCIsInNldHRlciIsIm1hbmFnZXIiLCJ0b29sdGlwcyIsInRyaWdnZXIiLCJjbGFzc05hbWUiLCJub3RpZmljYXRpb25NYW5hZ2VyIiwiaXNTeW5jaW5nIiwiaXNGZXRjaGluZyIsImlzUHVsbGluZyIsImlzUHVzaGluZyIsInRvb2x0aXBNYW5hZ2VyIiwicmVmU3BlYyIsImdldFJlZlNwZWMiLCJ1cHN0cmVhbSIsImdldFVwc3RyZWFtIiwiZ2V0UmVtb3RlUmVmIiwicmVtb3RlTmFtZSIsImdldFJlbW90ZU5hbWUiLCJleHBvcnRzIiwiUHJvcFR5cGVzIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsImNvbmZpcm0iLCJmdW5jIl0sInNvdXJjZXMiOlsic3RhdHVzLWJhci10aWxlLWNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7RnJhZ21lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmltcG9ydCBCcmFuY2hWaWV3IGZyb20gJy4uL3ZpZXdzL2JyYW5jaC12aWV3JztcbmltcG9ydCBCcmFuY2hNZW51VmlldyBmcm9tICcuLi92aWV3cy9icmFuY2gtbWVudS12aWV3JztcbmltcG9ydCBQdXNoUHVsbFZpZXcgZnJvbSAnLi4vdmlld3MvcHVzaC1wdWxsLXZpZXcnO1xuaW1wb3J0IENoYW5nZWRGaWxlc0NvdW50VmlldyBmcm9tICcuLi92aWV3cy9jaGFuZ2VkLWZpbGVzLWNvdW50LXZpZXcnO1xuaW1wb3J0IEdpdGh1YlRpbGVWaWV3IGZyb20gJy4uL3ZpZXdzL2dpdGh1Yi10aWxlLXZpZXcnO1xuaW1wb3J0IFRvb2x0aXAgZnJvbSAnLi4vYXRvbS90b29sdGlwJztcbmltcG9ydCBDb21tYW5kcywge0NvbW1hbmR9IGZyb20gJy4uL2F0b20vY29tbWFuZHMnO1xuaW1wb3J0IE9ic2VydmVNb2RlbCBmcm9tICcuLi92aWV3cy9vYnNlcnZlLW1vZGVsJztcbmltcG9ydCBSZWZIb2xkZXIgZnJvbSAnLi4vbW9kZWxzL3JlZi1ob2xkZXInO1xuaW1wb3J0IHl1YmlraXJpIGZyb20gJ3l1YmlraXJpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdHVzQmFyVGlsZUNvbnRyb2xsZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHdvcmtzcGFjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIG5vdGlmaWNhdGlvbk1hbmFnZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb21tYW5kczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRvb2x0aXBzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29uZmlybTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICByZXBvc2l0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdG9nZ2xlR2l0VGFiOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB0b2dnbGVHaXRodWJUYWI6IFByb3BUeXBlcy5mdW5jLFxuICB9XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnJlZkJyYW5jaFZpZXdSb290ID0gbmV3IFJlZkhvbGRlcigpO1xuICB9XG5cbiAgZ2V0Q2hhbmdlZEZpbGVzQ291bnQoZGF0YSkge1xuICAgIGNvbnN0IHtzdGFnZWRGaWxlcywgdW5zdGFnZWRGaWxlcywgbWVyZ2VDb25mbGljdEZpbGVzfSA9IGRhdGEuc3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXM7XG4gICAgY29uc3QgY2hhbmdlZEZpbGVzID0gbmV3IFNldCgpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBpbiB1bnN0YWdlZEZpbGVzKSB7XG4gICAgICBjaGFuZ2VkRmlsZXMuYWRkKGZpbGVQYXRoKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBpbiBzdGFnZWRGaWxlcykge1xuICAgICAgY2hhbmdlZEZpbGVzLmFkZChmaWxlUGF0aCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgZmlsZVBhdGggaW4gbWVyZ2VDb25mbGljdEZpbGVzKSB7XG4gICAgICBjaGFuZ2VkRmlsZXMuYWRkKGZpbGVQYXRoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlZEZpbGVzLnNpemU7XG4gIH1cblxuICBmZXRjaERhdGEgPSByZXBvc2l0b3J5ID0+IHtcbiAgICByZXR1cm4geXViaWtpcmkoe1xuICAgICAgY3VycmVudEJyYW5jaDogcmVwb3NpdG9yeS5nZXRDdXJyZW50QnJhbmNoKCksXG4gICAgICBicmFuY2hlczogcmVwb3NpdG9yeS5nZXRCcmFuY2hlcygpLFxuICAgICAgc3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXM6IHJlcG9zaXRvcnkuZ2V0U3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXMoKSxcbiAgICAgIGN1cnJlbnRSZW1vdGU6IGFzeW5jIHF1ZXJ5ID0+IHJlcG9zaXRvcnkuZ2V0UmVtb3RlRm9yQnJhbmNoKChhd2FpdCBxdWVyeS5jdXJyZW50QnJhbmNoKS5nZXROYW1lKCkpLFxuICAgICAgYWhlYWRDb3VudDogYXN5bmMgcXVlcnkgPT4gcmVwb3NpdG9yeS5nZXRBaGVhZENvdW50KChhd2FpdCBxdWVyeS5jdXJyZW50QnJhbmNoKS5nZXROYW1lKCkpLFxuICAgICAgYmVoaW5kQ291bnQ6IGFzeW5jIHF1ZXJ5ID0+IHJlcG9zaXRvcnkuZ2V0QmVoaW5kQ291bnQoKGF3YWl0IHF1ZXJ5LmN1cnJlbnRCcmFuY2gpLmdldE5hbWUoKSksXG4gICAgICBvcmlnaW5FeGlzdHM6IGFzeW5jICgpID0+IChhd2FpdCByZXBvc2l0b3J5LmdldFJlbW90ZXMoKSkud2l0aE5hbWUoJ29yaWdpbicpLmlzUHJlc2VudCgpLFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8T2JzZXJ2ZU1vZGVsIG1vZGVsPXt0aGlzLnByb3BzLnJlcG9zaXRvcnl9IGZldGNoRGF0YT17dGhpcy5mZXRjaERhdGF9PlxuICAgICAgICB7ZGF0YSA9PiAoZGF0YSA/IHRoaXMucmVuZGVyV2l0aERhdGEoZGF0YSkgOiBudWxsKX1cbiAgICAgIDwvT2JzZXJ2ZU1vZGVsPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJXaXRoRGF0YShkYXRhKSB7XG4gICAgbGV0IGNoYW5nZWRGaWxlc0NvdW50LCBtZXJnZUNvbmZsaWN0c1ByZXNlbnQ7XG4gICAgaWYgKGRhdGEuc3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXMpIHtcbiAgICAgIGNoYW5nZWRGaWxlc0NvdW50ID0gdGhpcy5nZXRDaGFuZ2VkRmlsZXNDb3VudChkYXRhKTtcbiAgICAgIG1lcmdlQ29uZmxpY3RzUHJlc2VudCA9IE9iamVjdC5rZXlzKGRhdGEuc3RhdHVzZXNGb3JDaGFuZ2VkRmlsZXMubWVyZ2VDb25mbGljdEZpbGVzKS5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcG9Qcm9wcyA9IHtcbiAgICAgIHJlcG9zaXRvcnk6IHRoaXMucHJvcHMucmVwb3NpdG9yeSxcbiAgICAgIGN1cnJlbnRCcmFuY2g6IGRhdGEuY3VycmVudEJyYW5jaCxcbiAgICAgIGJyYW5jaGVzOiBkYXRhLmJyYW5jaGVzLFxuICAgICAgY3VycmVudFJlbW90ZTogZGF0YS5jdXJyZW50UmVtb3RlLFxuICAgICAgYWhlYWRDb3VudDogZGF0YS5haGVhZENvdW50LFxuICAgICAgYmVoaW5kQ291bnQ6IGRhdGEuYmVoaW5kQ291bnQsXG4gICAgICBvcmlnaW5FeGlzdHM6IGRhdGEub3JpZ2luRXhpc3RzLFxuICAgICAgY2hhbmdlZEZpbGVzQ291bnQsXG4gICAgICBtZXJnZUNvbmZsaWN0c1ByZXNlbnQsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8RnJhZ21lbnQ+XG4gICAgICAgIHt0aGlzLnJlbmRlclRpbGVzKHJlcG9Qcm9wcyl9XG4gICAgICAgIDxHaXRodWJUaWxlVmlldyBkaWRDbGljaz17dGhpcy5wcm9wcy50b2dnbGVHaXRodWJUYWJ9IC8+XG4gICAgICAgIDxDaGFuZ2VkRmlsZXNDb3VudFZpZXdcbiAgICAgICAgICBkaWRDbGljaz17dGhpcy5wcm9wcy50b2dnbGVHaXRUYWJ9XG4gICAgICAgICAgY2hhbmdlZEZpbGVzQ291bnQ9e3JlcG9Qcm9wcy5jaGFuZ2VkRmlsZXNDb3VudH1cbiAgICAgICAgICBtZXJnZUNvbmZsaWN0c1ByZXNlbnQ9e3JlcG9Qcm9wcy5tZXJnZUNvbmZsaWN0c1ByZXNlbnR9XG4gICAgICAgIC8+XG4gICAgICA8L0ZyYWdtZW50PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJUaWxlcyhyZXBvUHJvcHMpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmVwb3NpdG9yeS5zaG93U3RhdHVzQmFyVGlsZXMoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgb3BlcmF0aW9uU3RhdGVzID0gdGhpcy5wcm9wcy5yZXBvc2l0b3J5LmdldE9wZXJhdGlvblN0YXRlcygpO1xuICAgIGNvbnN0IHB1c2hJblByb2dyZXNzID0gb3BlcmF0aW9uU3RhdGVzLmlzUHVzaEluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBwdWxsSW5Qcm9ncmVzcyA9IG9wZXJhdGlvblN0YXRlcy5pc1B1bGxJblByb2dyZXNzKCk7XG4gICAgY29uc3QgZmV0Y2hJblByb2dyZXNzID0gb3BlcmF0aW9uU3RhdGVzLmlzRmV0Y2hJblByb2dyZXNzKCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZyYWdtZW50PlxuICAgICAgICA8Q29tbWFuZHMgcmVnaXN0cnk9e3RoaXMucHJvcHMuY29tbWFuZHN9IHRhcmdldD1cImF0b20td29ya3NwYWNlXCI+XG4gICAgICAgICAgPENvbW1hbmQgY29tbWFuZD1cImdpdGh1YjpmZXRjaFwiIGNhbGxiYWNrPXt0aGlzLmZldGNoKHJlcG9Qcm9wcyl9IC8+XG4gICAgICAgICAgPENvbW1hbmQgY29tbWFuZD1cImdpdGh1YjpwdWxsXCIgY2FsbGJhY2s9e3RoaXMucHVsbChyZXBvUHJvcHMpfSAvPlxuICAgICAgICAgIDxDb21tYW5kXG4gICAgICAgICAgICBjb21tYW5kPVwiZ2l0aHViOnB1c2hcIlxuICAgICAgICAgICAgY2FsbGJhY2s9eygpID0+IHRoaXMucHVzaChyZXBvUHJvcHMpKHtmb3JjZTogZmFsc2UsIHNldFVwc3RyZWFtOiAhcmVwb1Byb3BzLmN1cnJlbnRSZW1vdGUuaXNQcmVzZW50KCl9KX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxDb21tYW5kXG4gICAgICAgICAgICBjb21tYW5kPVwiZ2l0aHViOmZvcmNlLXB1c2hcIlxuICAgICAgICAgICAgY2FsbGJhY2s9eygpID0+IHRoaXMucHVzaChyZXBvUHJvcHMpKHtmb3JjZTogdHJ1ZSwgc2V0VXBzdHJlYW06ICFyZXBvUHJvcHMuY3VycmVudFJlbW90ZS5pc1ByZXNlbnQoKX0pfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ29tbWFuZHM+XG4gICAgICAgIDxCcmFuY2hWaWV3XG4gICAgICAgICAgcmVmUm9vdD17dGhpcy5yZWZCcmFuY2hWaWV3Um9vdC5zZXR0ZXJ9XG4gICAgICAgICAgd29ya3NwYWNlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgICBjaGVja291dD17dGhpcy5jaGVja291dH1cbiAgICAgICAgICBjdXJyZW50QnJhbmNoPXtyZXBvUHJvcHMuY3VycmVudEJyYW5jaH1cbiAgICAgICAgLz5cbiAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICBtYW5hZ2VyPXt0aGlzLnByb3BzLnRvb2x0aXBzfVxuICAgICAgICAgIHRhcmdldD17dGhpcy5yZWZCcmFuY2hWaWV3Um9vdH1cbiAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImdpdGh1Yi1TdGF0dXNCYXJUaWxlQ29udHJvbGxlci10b29sdGlwTWVudVwiPlxuICAgICAgICAgIDxCcmFuY2hNZW51Vmlld1xuICAgICAgICAgICAgd29ya3NwYWNlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbk1hbmFnZXI9e3RoaXMucHJvcHMubm90aWZpY2F0aW9uTWFuYWdlcn1cbiAgICAgICAgICAgIGNvbW1hbmRzPXt0aGlzLnByb3BzLmNvbW1hbmRzfVxuICAgICAgICAgICAgY2hlY2tvdXQ9e3RoaXMuY2hlY2tvdXR9XG4gICAgICAgICAgICBicmFuY2hlcz17cmVwb1Byb3BzLmJyYW5jaGVzfVxuICAgICAgICAgICAgY3VycmVudEJyYW5jaD17cmVwb1Byb3BzLmN1cnJlbnRCcmFuY2h9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8UHVzaFB1bGxWaWV3XG4gICAgICAgICAgaXNTeW5jaW5nPXtmZXRjaEluUHJvZ3Jlc3MgfHwgcHVsbEluUHJvZ3Jlc3MgfHwgcHVzaEluUHJvZ3Jlc3N9XG4gICAgICAgICAgaXNGZXRjaGluZz17ZmV0Y2hJblByb2dyZXNzfVxuICAgICAgICAgIGlzUHVsbGluZz17cHVsbEluUHJvZ3Jlc3N9XG4gICAgICAgICAgaXNQdXNoaW5nPXtwdXNoSW5Qcm9ncmVzc31cbiAgICAgICAgICBwdXNoPXt0aGlzLnB1c2gocmVwb1Byb3BzKX1cbiAgICAgICAgICBwdWxsPXt0aGlzLnB1bGwocmVwb1Byb3BzKX1cbiAgICAgICAgICBmZXRjaD17dGhpcy5mZXRjaChyZXBvUHJvcHMpfVxuICAgICAgICAgIHRvb2x0aXBNYW5hZ2VyPXt0aGlzLnByb3BzLnRvb2x0aXBzfVxuICAgICAgICAgIGN1cnJlbnRCcmFuY2g9e3JlcG9Qcm9wcy5jdXJyZW50QnJhbmNofVxuICAgICAgICAgIGN1cnJlbnRSZW1vdGU9e3JlcG9Qcm9wcy5jdXJyZW50UmVtb3RlfVxuICAgICAgICAgIGJlaGluZENvdW50PXtyZXBvUHJvcHMuYmVoaW5kQ291bnR9XG4gICAgICAgICAgYWhlYWRDb3VudD17cmVwb1Byb3BzLmFoZWFkQ291bnR9XG4gICAgICAgICAgb3JpZ2luRXhpc3RzPXtyZXBvUHJvcHMub3JpZ2luRXhpc3RzfVxuICAgICAgICAvPlxuICAgICAgPC9GcmFnbWVudD5cbiAgICApO1xuICB9XG5cbiAgaGFuZGxlT3BlbkdpdFRpbWluZ3NWaWV3ID0gZSA9PiB7XG4gICAgZSAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy53b3Jrc3BhY2Uub3BlbignYXRvbS1naXRodWI6Ly9kZWJ1Zy90aW1pbmdzJyk7XG4gIH1cblxuICBjaGVja291dCA9IChicmFuY2hOYW1lLCBvcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMucmVwb3NpdG9yeS5jaGVja291dChicmFuY2hOYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIHB1c2goZGF0YSkge1xuICAgIHJldHVybiAoe2ZvcmNlLCBzZXRVcHN0cmVhbX0gPSB7fSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucmVwb3NpdG9yeS5wdXNoKGRhdGEuY3VycmVudEJyYW5jaC5nZXROYW1lKCksIHtcbiAgICAgICAgZm9yY2UsXG4gICAgICAgIHNldFVwc3RyZWFtLFxuICAgICAgICByZWZTcGVjOiBkYXRhLmN1cnJlbnRCcmFuY2guZ2V0UmVmU3BlYygnUFVTSCcpLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHB1bGwoZGF0YSkge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5yZXBvc2l0b3J5LnB1bGwoZGF0YS5jdXJyZW50QnJhbmNoLmdldE5hbWUoKSwge1xuICAgICAgICByZWZTcGVjOiBkYXRhLmN1cnJlbnRCcmFuY2guZ2V0UmVmU3BlYygnUFVMTCcpLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIGZldGNoKGRhdGEpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgdXBzdHJlYW0gPSBkYXRhLmN1cnJlbnRCcmFuY2guZ2V0VXBzdHJlYW0oKTtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnJlcG9zaXRvcnkuZmV0Y2godXBzdHJlYW0uZ2V0UmVtb3RlUmVmKCksIHtcbiAgICAgICAgcmVtb3RlTmFtZTogdXBzdHJlYW0uZ2V0UmVtb3RlTmFtZSgpLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxu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