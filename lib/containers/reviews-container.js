"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _yubikiri = _interopRequireDefault(require("yubikiri"));
var _reactRelay = require("react-relay");
var _helpers = require("../helpers");
var _propTypes2 = require("../prop-types");
var _keytarStrategy = require("../shared/keytar-strategy");
var _prPatchContainer = _interopRequireDefault(require("./pr-patch-container"));
var _observeModel = _interopRequireDefault(require("../views/observe-model"));
var _loadingView = _interopRequireDefault(require("../views/loading-view"));
var _githubLoginView = _interopRequireDefault(require("../views/github-login-view"));
var _errorView = _interopRequireDefault(require("../views/error-view"));
var _queryErrorView = _interopRequireDefault(require("../views/query-error-view"));
var _relayNetworkLayerManager = _interopRequireDefault(require("../relay-network-layer-manager"));
var _relayEnvironment = _interopRequireDefault(require("../views/relay-environment"));
var _reviewsController = _interopRequireDefault(require("../controllers/reviews-controller"));
var _aggregatedReviewsContainer = _interopRequireDefault(require("./aggregated-reviews-container"));
var _commentPositioningContainer = _interopRequireDefault(require("./comment-positioning-container"));
var _graphql;
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class ReviewsContainer extends _react.default.Component {
  constructor(...args) {
    super(...args);
    _defineProperty(this, "renderWithToken", token => {
      if (!token) {
        return _react.default.createElement(_loadingView.default, null);
      }
      if (token instanceof Error) {
        return _react.default.createElement(_queryErrorView.default, {
          error: token,
          retry: this.handleTokenRetry,
          login: this.handleLogin,
          logout: this.handleLogout
        });
      }
      if (token === _keytarStrategy.UNAUTHENTICATED) {
        return _react.default.createElement(_githubLoginView.default, {
          onLogin: this.handleLogin
        });
      }
      if (token === _keytarStrategy.INSUFFICIENT) {
        return _react.default.createElement(_githubLoginView.default, {
          onLogin: this.handleLogin
        }, _react.default.createElement("p", null, "Your token no longer has sufficient authorizations. Please re-authenticate and generate a new one."));
      }
      return _react.default.createElement(_prPatchContainer.default, {
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.number,
        endpoint: this.props.endpoint,
        token: token,
        largeDiffThreshold: Infinity
      }, (error, patch) => this.renderWithPatch(error, {
        token,
        patch
      }));
    });
    _defineProperty(this, "fetchToken", loginModel => loginModel.getToken(this.props.endpoint.getLoginAccount()));
    _defineProperty(this, "fetchRepositoryData", repository => {
      return (0, _yubikiri.default)({
        branches: repository.getBranches(),
        remotes: repository.getRemotes(),
        isAbsent: repository.isAbsent(),
        isLoading: repository.isLoading(),
        isPresent: repository.isPresent(),
        isMerging: repository.isMerging(),
        isRebasing: repository.isRebasing()
      });
    });
    _defineProperty(this, "handleLogin", token => this.props.loginModel.setToken(this.props.endpoint.getLoginAccount(), token));
    _defineProperty(this, "handleLogout", () => this.props.loginModel.removeToken(this.props.endpoint.getLoginAccount()));
    _defineProperty(this, "handleTokenRetry", () => this.props.loginModel.didUpdate());
  }
  render() {
    return _react.default.createElement(_observeModel.default, {
      model: this.props.loginModel,
      fetchData: this.fetchToken
    }, this.renderWithToken);
  }
  renderWithPatch(error, {
    token,
    patch
  }) {
    if (error) {
      return _react.default.createElement(_errorView.default, {
        descriptions: [error]
      });
    }
    return _react.default.createElement(_observeModel.default, {
      model: this.props.repository,
      fetchData: this.fetchRepositoryData
    }, repoData => this.renderWithRepositoryData(repoData, {
      token,
      patch
    }));
  }
  renderWithRepositoryData(repoData, {
    token,
    patch
  }) {
    const environment = _relayNetworkLayerManager.default.getEnvironmentForHost(this.props.endpoint, token);
    const query = _graphql || (_graphql = function () {
      const node = require("./__generated__/reviewsContainerQuery.graphql");
      if (node.hash && node.hash !== "b05cc30cb078003afba9bd8c2de989fa") {
        console.error("The definition of 'reviewsContainerQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
      }
      return require("./__generated__/reviewsContainerQuery.graphql");
    });
    const variables = {
      repoOwner: this.props.owner,
      repoName: this.props.repo,
      prNumber: this.props.number,
      reviewCount: _helpers.PAGE_SIZE,
      reviewCursor: null,
      threadCount: _helpers.PAGE_SIZE,
      threadCursor: null,
      commentCount: _helpers.PAGE_SIZE,
      commentCursor: null
    };
    return _react.default.createElement(_relayEnvironment.default.Provider, {
      value: environment
    }, _react.default.createElement(_reactRelay.QueryRenderer, {
      environment: environment,
      query: query,
      variables: variables,
      render: queryResult => this.renderWithQuery(queryResult, {
        repoData,
        patch
      })
    }));
  }
  renderWithQuery({
    error,
    props,
    retry
  }, {
    repoData,
    patch
  }) {
    if (error) {
      return _react.default.createElement(_queryErrorView.default, {
        error: error,
        login: this.handleLogin,
        retry: retry,
        logout: this.handleLogout
      });
    }
    if (!props || !repoData || !patch) {
      return _react.default.createElement(_loadingView.default, null);
    }
    return _react.default.createElement(_aggregatedReviewsContainer.default, {
      pullRequest: props.repository.pullRequest,
      reportRelayError: this.props.reportRelayError
    }, ({
      errors,
      summaries,
      commentThreads,
      refetch
    }) => {
      if (errors && errors.length > 0) {
        return errors.map((err, i) => _react.default.createElement(_errorView.default, {
          key: `error-${i}`,
          title: "Pagination error",
          descriptions: [err.stack]
        }));
      }
      const aggregationResult = {
        summaries,
        commentThreads,
        refetch
      };
      return this.renderWithResult({
        aggregationResult,
        queryProps: props,
        repoData,
        patch,
        refetch
      });
    });
  }
  renderWithResult({
    aggregationResult,
    queryProps,
    repoData,
    patch
  }) {
    return _react.default.createElement(_commentPositioningContainer.default, _extends({
      multiFilePatch: patch
    }, aggregationResult, {
      prCommitSha: queryProps.repository.pullRequest.headRefOid,
      localRepository: this.props.repository
    }), commentTranslations => {
      return _react.default.createElement(_reviewsController.default, _extends({}, this.props, aggregationResult, {
        commentTranslations: commentTranslations,
        localRepository: this.props.repository,
        multiFilePatch: patch,
        repository: queryProps.repository,
        pullRequest: queryProps.repository.pullRequest,
        viewer: queryProps.viewer
      }, repoData));
    });
  }
}
exports.default = ReviewsContainer;
_defineProperty(ReviewsContainer, "propTypes", {
  // Connection
  endpoint: _propTypes2.EndpointPropType.isRequired,
  // Pull request selection criteria
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  number: _propTypes.default.number.isRequired,
  workdir: _propTypes.default.string.isRequired,
  // Package models
  repository: _propTypes.default.object.isRequired,
  loginModel: _propTypes2.GithubLoginModelPropType.isRequired,
  workdirContextPool: _propTypes2.WorkdirContextPoolPropType.isRequired,
  initThreadID: _propTypes.default.string,
  // Atom environment
  workspace: _propTypes.default.object.isRequired,
  config: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  tooltips: _propTypes.default.object.isRequired,
  confirm: _propTypes.default.func.isRequired,
  // Action methods
  reportRelayError: _propTypes.default.func.isRequired
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfeXViaWtpcmkiLCJfcmVhY3RSZWxheSIsIl9oZWxwZXJzIiwiX3Byb3BUeXBlczIiLCJfa2V5dGFyU3RyYXRlZ3kiLCJfcHJQYXRjaENvbnRhaW5lciIsIl9vYnNlcnZlTW9kZWwiLCJfbG9hZGluZ1ZpZXciLCJfZ2l0aHViTG9naW5WaWV3IiwiX2Vycm9yVmlldyIsIl9xdWVyeUVycm9yVmlldyIsIl9yZWxheU5ldHdvcmtMYXllck1hbmFnZXIiLCJfcmVsYXlFbnZpcm9ubWVudCIsIl9yZXZpZXdzQ29udHJvbGxlciIsIl9hZ2dyZWdhdGVkUmV2aWV3c0NvbnRhaW5lciIsIl9jb21tZW50UG9zaXRpb25pbmdDb250YWluZXIiLCJfZ3JhcGhxbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2V4dGVuZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJiaW5kIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiX2RlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidCIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsInIiLCJlIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJSZXZpZXdzQ29udGFpbmVyIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJ0b2tlbiIsImNyZWF0ZUVsZW1lbnQiLCJFcnJvciIsImVycm9yIiwicmV0cnkiLCJoYW5kbGVUb2tlblJldHJ5IiwibG9naW4iLCJoYW5kbGVMb2dpbiIsImxvZ291dCIsImhhbmRsZUxvZ291dCIsIlVOQVVUSEVOVElDQVRFRCIsIm9uTG9naW4iLCJJTlNVRkZJQ0lFTlQiLCJvd25lciIsInByb3BzIiwicmVwbyIsIm51bWJlciIsImVuZHBvaW50IiwibGFyZ2VEaWZmVGhyZXNob2xkIiwiSW5maW5pdHkiLCJwYXRjaCIsInJlbmRlcldpdGhQYXRjaCIsImxvZ2luTW9kZWwiLCJnZXRUb2tlbiIsImdldExvZ2luQWNjb3VudCIsInJlcG9zaXRvcnkiLCJ5dWJpa2lyaSIsImJyYW5jaGVzIiwiZ2V0QnJhbmNoZXMiLCJyZW1vdGVzIiwiZ2V0UmVtb3RlcyIsImlzQWJzZW50IiwiaXNMb2FkaW5nIiwiaXNQcmVzZW50IiwiaXNNZXJnaW5nIiwiaXNSZWJhc2luZyIsInNldFRva2VuIiwicmVtb3ZlVG9rZW4iLCJkaWRVcGRhdGUiLCJyZW5kZXIiLCJtb2RlbCIsImZldGNoRGF0YSIsImZldGNoVG9rZW4iLCJyZW5kZXJXaXRoVG9rZW4iLCJkZXNjcmlwdGlvbnMiLCJmZXRjaFJlcG9zaXRvcnlEYXRhIiwicmVwb0RhdGEiLCJyZW5kZXJXaXRoUmVwb3NpdG9yeURhdGEiLCJlbnZpcm9ubWVudCIsIlJlbGF5TmV0d29ya0xheWVyTWFuYWdlciIsImdldEVudmlyb25tZW50Rm9ySG9zdCIsInF1ZXJ5Iiwibm9kZSIsImhhc2giLCJjb25zb2xlIiwidmFyaWFibGVzIiwicmVwb093bmVyIiwicmVwb05hbWUiLCJwck51bWJlciIsInJldmlld0NvdW50IiwiUEFHRV9TSVpFIiwicmV2aWV3Q3Vyc29yIiwidGhyZWFkQ291bnQiLCJ0aHJlYWRDdXJzb3IiLCJjb21tZW50Q291bnQiLCJjb21tZW50Q3Vyc29yIiwiUHJvdmlkZXIiLCJRdWVyeVJlbmRlcmVyIiwicXVlcnlSZXN1bHQiLCJyZW5kZXJXaXRoUXVlcnkiLCJwdWxsUmVxdWVzdCIsInJlcG9ydFJlbGF5RXJyb3IiLCJlcnJvcnMiLCJzdW1tYXJpZXMiLCJjb21tZW50VGhyZWFkcyIsInJlZmV0Y2giLCJtYXAiLCJlcnIiLCJ0aXRsZSIsInN0YWNrIiwiYWdncmVnYXRpb25SZXN1bHQiLCJyZW5kZXJXaXRoUmVzdWx0IiwicXVlcnlQcm9wcyIsIm11bHRpRmlsZVBhdGNoIiwicHJDb21taXRTaGEiLCJoZWFkUmVmT2lkIiwibG9jYWxSZXBvc2l0b3J5IiwiY29tbWVudFRyYW5zbGF0aW9ucyIsInZpZXdlciIsImV4cG9ydHMiLCJFbmRwb2ludFByb3BUeXBlIiwiaXNSZXF1aXJlZCIsIlByb3BUeXBlcyIsInN0cmluZyIsIndvcmtkaXIiLCJvYmplY3QiLCJHaXRodWJMb2dpbk1vZGVsUHJvcFR5cGUiLCJ3b3JrZGlyQ29udGV4dFBvb2wiLCJXb3JrZGlyQ29udGV4dFBvb2xQcm9wVHlwZSIsImluaXRUaHJlYWRJRCIsIndvcmtzcGFjZSIsImNvbmZpZyIsImNvbW1hbmRzIiwidG9vbHRpcHMiLCJjb25maXJtIiwiZnVuYyJdLCJzb3VyY2VzIjpbInJldmlld3MtY29udGFpbmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHl1YmlraXJpIGZyb20gJ3l1YmlraXJpJztcbmltcG9ydCB7UXVlcnlSZW5kZXJlciwgZ3JhcGhxbH0gZnJvbSAncmVhY3QtcmVsYXknO1xuXG5pbXBvcnQge1BBR0VfU0laRX0gZnJvbSAnLi4vaGVscGVycyc7XG5pbXBvcnQge0dpdGh1YkxvZ2luTW9kZWxQcm9wVHlwZSwgRW5kcG9pbnRQcm9wVHlwZSwgV29ya2RpckNvbnRleHRQb29sUHJvcFR5cGV9IGZyb20gJy4uL3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtVTkFVVEhFTlRJQ0FURUQsIElOU1VGRklDSUVOVH0gZnJvbSAnLi4vc2hhcmVkL2tleXRhci1zdHJhdGVneSc7XG5pbXBvcnQgUHVsbFJlcXVlc3RQYXRjaENvbnRhaW5lciBmcm9tICcuL3ByLXBhdGNoLWNvbnRhaW5lcic7XG5pbXBvcnQgT2JzZXJ2ZU1vZGVsIGZyb20gJy4uL3ZpZXdzL29ic2VydmUtbW9kZWwnO1xuaW1wb3J0IExvYWRpbmdWaWV3IGZyb20gJy4uL3ZpZXdzL2xvYWRpbmctdmlldyc7XG5pbXBvcnQgR2l0aHViTG9naW5WaWV3IGZyb20gJy4uL3ZpZXdzL2dpdGh1Yi1sb2dpbi12aWV3JztcbmltcG9ydCBFcnJvclZpZXcgZnJvbSAnLi4vdmlld3MvZXJyb3Itdmlldyc7XG5pbXBvcnQgUXVlcnlFcnJvclZpZXcgZnJvbSAnLi4vdmlld3MvcXVlcnktZXJyb3Itdmlldyc7XG5pbXBvcnQgUmVsYXlOZXR3b3JrTGF5ZXJNYW5hZ2VyIGZyb20gJy4uL3JlbGF5LW5ldHdvcmstbGF5ZXItbWFuYWdlcic7XG5pbXBvcnQgUmVsYXlFbnZpcm9ubWVudCBmcm9tICcuLi92aWV3cy9yZWxheS1lbnZpcm9ubWVudCc7XG5pbXBvcnQgUmV2aWV3c0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvcmV2aWV3cy1jb250cm9sbGVyJztcbmltcG9ydCBBZ2dyZWdhdGVkUmV2aWV3c0NvbnRhaW5lciBmcm9tICcuL2FnZ3JlZ2F0ZWQtcmV2aWV3cy1jb250YWluZXInO1xuaW1wb3J0IENvbW1lbnRQb3NpdGlvbmluZ0NvbnRhaW5lciBmcm9tICcuL2NvbW1lbnQtcG9zaXRpb25pbmctY29udGFpbmVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmV2aWV3c0NvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLy8gQ29ubmVjdGlvblxuICAgIGVuZHBvaW50OiBFbmRwb2ludFByb3BUeXBlLmlzUmVxdWlyZWQsXG5cbiAgICAvLyBQdWxsIHJlcXVlc3Qgc2VsZWN0aW9uIGNyaXRlcmlhXG4gICAgb3duZXI6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICByZXBvOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgbnVtYmVyOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgd29ya2RpcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgLy8gUGFja2FnZSBtb2RlbHNcbiAgICByZXBvc2l0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgbG9naW5Nb2RlbDogR2l0aHViTG9naW5Nb2RlbFByb3BUeXBlLmlzUmVxdWlyZWQsXG4gICAgd29ya2RpckNvbnRleHRQb29sOiBXb3JrZGlyQ29udGV4dFBvb2xQcm9wVHlwZS5pc1JlcXVpcmVkLFxuICAgIGluaXRUaHJlYWRJRDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgIC8vIEF0b20gZW52aXJvbm1lbnRcbiAgICB3b3Jrc3BhY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb25maWc6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb21tYW5kczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRvb2x0aXBzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29uZmlybTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblxuICAgIC8vIEFjdGlvbiBtZXRob2RzXG4gICAgcmVwb3J0UmVsYXlFcnJvcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPE9ic2VydmVNb2RlbCBtb2RlbD17dGhpcy5wcm9wcy5sb2dpbk1vZGVsfSBmZXRjaERhdGE9e3RoaXMuZmV0Y2hUb2tlbn0+XG4gICAgICAgIHt0aGlzLnJlbmRlcldpdGhUb2tlbn1cbiAgICAgIDwvT2JzZXJ2ZU1vZGVsPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJXaXRoVG9rZW4gPSB0b2tlbiA9PiB7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIDxMb2FkaW5nVmlldyAvPjtcbiAgICB9XG5cbiAgICBpZiAodG9rZW4gaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFF1ZXJ5RXJyb3JWaWV3XG4gICAgICAgICAgZXJyb3I9e3Rva2VufVxuICAgICAgICAgIHJldHJ5PXt0aGlzLmhhbmRsZVRva2VuUmV0cnl9XG4gICAgICAgICAgbG9naW49e3RoaXMuaGFuZGxlTG9naW59XG4gICAgICAgICAgbG9nb3V0PXt0aGlzLmhhbmRsZUxvZ291dH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRva2VuID09PSBVTkFVVEhFTlRJQ0FURUQpIHtcbiAgICAgIHJldHVybiA8R2l0aHViTG9naW5WaWV3IG9uTG9naW49e3RoaXMuaGFuZGxlTG9naW59IC8+O1xuICAgIH1cblxuICAgIGlmICh0b2tlbiA9PT0gSU5TVUZGSUNJRU5UKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8R2l0aHViTG9naW5WaWV3IG9uTG9naW49e3RoaXMuaGFuZGxlTG9naW59PlxuICAgICAgICAgIDxwPlxuICAgICAgICAgICAgWW91ciB0b2tlbiBubyBsb25nZXIgaGFzIHN1ZmZpY2llbnQgYXV0aG9yaXphdGlvbnMuIFBsZWFzZSByZS1hdXRoZW50aWNhdGUgYW5kIGdlbmVyYXRlIGEgbmV3IG9uZS5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvR2l0aHViTG9naW5WaWV3PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFB1bGxSZXF1ZXN0UGF0Y2hDb250YWluZXJcbiAgICAgICAgb3duZXI9e3RoaXMucHJvcHMub3duZXJ9XG4gICAgICAgIHJlcG89e3RoaXMucHJvcHMucmVwb31cbiAgICAgICAgbnVtYmVyPXt0aGlzLnByb3BzLm51bWJlcn1cbiAgICAgICAgZW5kcG9pbnQ9e3RoaXMucHJvcHMuZW5kcG9pbnR9XG4gICAgICAgIHRva2VuPXt0b2tlbn1cbiAgICAgICAgbGFyZ2VEaWZmVGhyZXNob2xkPXtJbmZpbml0eX0+XG4gICAgICAgIHsoZXJyb3IsIHBhdGNoKSA9PiB0aGlzLnJlbmRlcldpdGhQYXRjaChlcnJvciwge3Rva2VuLCBwYXRjaH0pfVxuICAgICAgPC9QdWxsUmVxdWVzdFBhdGNoQ29udGFpbmVyPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJXaXRoUGF0Y2goZXJyb3IsIHt0b2tlbiwgcGF0Y2h9KSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gPEVycm9yVmlldyBkZXNjcmlwdGlvbnM9e1tlcnJvcl19IC8+O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8T2JzZXJ2ZU1vZGVsIG1vZGVsPXt0aGlzLnByb3BzLnJlcG9zaXRvcnl9IGZldGNoRGF0YT17dGhpcy5mZXRjaFJlcG9zaXRvcnlEYXRhfT5cbiAgICAgICAge3JlcG9EYXRhID0+IHRoaXMucmVuZGVyV2l0aFJlcG9zaXRvcnlEYXRhKHJlcG9EYXRhLCB7dG9rZW4sIHBhdGNofSl9XG4gICAgICA8L09ic2VydmVNb2RlbD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyV2l0aFJlcG9zaXRvcnlEYXRhKHJlcG9EYXRhLCB7dG9rZW4sIHBhdGNofSkge1xuICAgIGNvbnN0IGVudmlyb25tZW50ID0gUmVsYXlOZXR3b3JrTGF5ZXJNYW5hZ2VyLmdldEVudmlyb25tZW50Rm9ySG9zdCh0aGlzLnByb3BzLmVuZHBvaW50LCB0b2tlbik7XG4gICAgY29uc3QgcXVlcnkgPSBncmFwaHFsYFxuICAgICAgcXVlcnkgcmV2aWV3c0NvbnRhaW5lclF1ZXJ5XG4gICAgICAoXG4gICAgICAgICRyZXBvT3duZXI6IFN0cmluZyFcbiAgICAgICAgJHJlcG9OYW1lOiBTdHJpbmchXG4gICAgICAgICRwck51bWJlcjogSW50IVxuICAgICAgICAkcmV2aWV3Q291bnQ6IEludCFcbiAgICAgICAgJHJldmlld0N1cnNvcjogU3RyaW5nXG4gICAgICAgICR0aHJlYWRDb3VudDogSW50IVxuICAgICAgICAkdGhyZWFkQ3Vyc29yOiBTdHJpbmdcbiAgICAgICAgJGNvbW1lbnRDb3VudDogSW50IVxuICAgICAgICAkY29tbWVudEN1cnNvcjogU3RyaW5nXG4gICAgICApIHtcbiAgICAgICAgcmVwb3NpdG9yeShvd25lcjogJHJlcG9Pd25lciwgbmFtZTogJHJlcG9OYW1lKSB7XG4gICAgICAgICAgLi4ucmV2aWV3c0NvbnRyb2xsZXJfcmVwb3NpdG9yeVxuICAgICAgICAgIHB1bGxSZXF1ZXN0KG51bWJlcjogJHByTnVtYmVyKSB7XG4gICAgICAgICAgICBoZWFkUmVmT2lkXG4gICAgICAgICAgICAuLi5hZ2dyZWdhdGVkUmV2aWV3c0NvbnRhaW5lcl9wdWxsUmVxdWVzdCBAYXJndW1lbnRzKFxuICAgICAgICAgICAgICByZXZpZXdDb3VudDogJHJldmlld0NvdW50XG4gICAgICAgICAgICAgIHJldmlld0N1cnNvcjogJHJldmlld0N1cnNvclxuICAgICAgICAgICAgICB0aHJlYWRDb3VudDogJHRocmVhZENvdW50XG4gICAgICAgICAgICAgIHRocmVhZEN1cnNvcjogJHRocmVhZEN1cnNvclxuICAgICAgICAgICAgICBjb21tZW50Q291bnQ6ICRjb21tZW50Q291bnRcbiAgICAgICAgICAgICAgY29tbWVudEN1cnNvcjogJGNvbW1lbnRDdXJzb3JcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC4uLnJldmlld3NDb250cm9sbGVyX3B1bGxSZXF1ZXN0XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmlld2VyIHtcbiAgICAgICAgICAuLi5yZXZpZXdzQ29udHJvbGxlcl92aWV3ZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgY29uc3QgdmFyaWFibGVzID0ge1xuICAgICAgcmVwb093bmVyOiB0aGlzLnByb3BzLm93bmVyLFxuICAgICAgcmVwb05hbWU6IHRoaXMucHJvcHMucmVwbyxcbiAgICAgIHByTnVtYmVyOiB0aGlzLnByb3BzLm51bWJlcixcbiAgICAgIHJldmlld0NvdW50OiBQQUdFX1NJWkUsXG4gICAgICByZXZpZXdDdXJzb3I6IG51bGwsXG4gICAgICB0aHJlYWRDb3VudDogUEFHRV9TSVpFLFxuICAgICAgdGhyZWFkQ3Vyc29yOiBudWxsLFxuICAgICAgY29tbWVudENvdW50OiBQQUdFX1NJWkUsXG4gICAgICBjb21tZW50Q3Vyc29yOiBudWxsLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFJlbGF5RW52aXJvbm1lbnQuUHJvdmlkZXIgdmFsdWU9e2Vudmlyb25tZW50fT5cbiAgICAgICAgPFF1ZXJ5UmVuZGVyZXJcbiAgICAgICAgICBlbnZpcm9ubWVudD17ZW52aXJvbm1lbnR9XG4gICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgIHZhcmlhYmxlcz17dmFyaWFibGVzfVxuICAgICAgICAgIHJlbmRlcj17cXVlcnlSZXN1bHQgPT4gdGhpcy5yZW5kZXJXaXRoUXVlcnkocXVlcnlSZXN1bHQsIHtyZXBvRGF0YSwgcGF0Y2h9KX1cbiAgICAgICAgLz5cbiAgICAgIDwvUmVsYXlFbnZpcm9ubWVudC5Qcm92aWRlcj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyV2l0aFF1ZXJ5KHtlcnJvciwgcHJvcHMsIHJldHJ5fSwge3JlcG9EYXRhLCBwYXRjaH0pIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeUVycm9yVmlld1xuICAgICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgICBsb2dpbj17dGhpcy5oYW5kbGVMb2dpbn1cbiAgICAgICAgICByZXRyeT17cmV0cnl9XG4gICAgICAgICAgbG9nb3V0PXt0aGlzLmhhbmRsZUxvZ291dH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFwcm9wcyB8fCAhcmVwb0RhdGEgfHwgIXBhdGNoKSB7XG4gICAgICByZXR1cm4gPExvYWRpbmdWaWV3IC8+O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8QWdncmVnYXRlZFJldmlld3NDb250YWluZXJcbiAgICAgICAgcHVsbFJlcXVlc3Q9e3Byb3BzLnJlcG9zaXRvcnkucHVsbFJlcXVlc3R9XG4gICAgICAgIHJlcG9ydFJlbGF5RXJyb3I9e3RoaXMucHJvcHMucmVwb3J0UmVsYXlFcnJvcn0+XG4gICAgICAgIHsoe2Vycm9ycywgc3VtbWFyaWVzLCBjb21tZW50VGhyZWFkcywgcmVmZXRjaH0pID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3JzICYmIGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JzLm1hcCgoZXJyLCBpKSA9PiAoXG4gICAgICAgICAgICAgIDxFcnJvclZpZXdcbiAgICAgICAgICAgICAgICBrZXk9e2BlcnJvci0ke2l9YH1cbiAgICAgICAgICAgICAgICB0aXRsZT1cIlBhZ2luYXRpb24gZXJyb3JcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9ucz17W2Vyci5zdGFja119XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYWdncmVnYXRpb25SZXN1bHQgPSB7c3VtbWFyaWVzLCBjb21tZW50VGhyZWFkcywgcmVmZXRjaH07XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJXaXRoUmVzdWx0KHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0aW9uUmVzdWx0LFxuICAgICAgICAgICAgcXVlcnlQcm9wczogcHJvcHMsXG4gICAgICAgICAgICByZXBvRGF0YSxcbiAgICAgICAgICAgIHBhdGNoLFxuICAgICAgICAgICAgcmVmZXRjaCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfX1cbiAgICAgIDwvQWdncmVnYXRlZFJldmlld3NDb250YWluZXI+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcldpdGhSZXN1bHQoe2FnZ3JlZ2F0aW9uUmVzdWx0LCBxdWVyeVByb3BzLCByZXBvRGF0YSwgcGF0Y2h9KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDb21tZW50UG9zaXRpb25pbmdDb250YWluZXJcbiAgICAgICAgbXVsdGlGaWxlUGF0Y2g9e3BhdGNofVxuICAgICAgICB7Li4uYWdncmVnYXRpb25SZXN1bHR9XG4gICAgICAgIHByQ29tbWl0U2hhPXtxdWVyeVByb3BzLnJlcG9zaXRvcnkucHVsbFJlcXVlc3QuaGVhZFJlZk9pZH1cbiAgICAgICAgbG9jYWxSZXBvc2l0b3J5PXt0aGlzLnByb3BzLnJlcG9zaXRvcnl9PlxuICAgICAgICB7Y29tbWVudFRyYW5zbGF0aW9ucyA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxSZXZpZXdzQ29udHJvbGxlclxuICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgey4uLmFnZ3JlZ2F0aW9uUmVzdWx0fVxuICAgICAgICAgICAgICBjb21tZW50VHJhbnNsYXRpb25zPXtjb21tZW50VHJhbnNsYXRpb25zfVxuICAgICAgICAgICAgICBsb2NhbFJlcG9zaXRvcnk9e3RoaXMucHJvcHMucmVwb3NpdG9yeX1cbiAgICAgICAgICAgICAgbXVsdGlGaWxlUGF0Y2g9e3BhdGNofVxuICAgICAgICAgICAgICByZXBvc2l0b3J5PXtxdWVyeVByb3BzLnJlcG9zaXRvcnl9XG4gICAgICAgICAgICAgIHB1bGxSZXF1ZXN0PXtxdWVyeVByb3BzLnJlcG9zaXRvcnkucHVsbFJlcXVlc3R9XG4gICAgICAgICAgICAgIHZpZXdlcj17cXVlcnlQcm9wcy52aWV3ZXJ9XG4gICAgICAgICAgICAgIHsuLi5yZXBvRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfX1cbiAgICAgIDwvQ29tbWVudFBvc2l0aW9uaW5nQ29udGFpbmVyPlxuICAgICk7XG4gIH1cblxuICBmZXRjaFRva2VuID0gbG9naW5Nb2RlbCA9PiBsb2dpbk1vZGVsLmdldFRva2VuKHRoaXMucHJvcHMuZW5kcG9pbnQuZ2V0TG9naW5BY2NvdW50KCkpO1xuXG4gIGZldGNoUmVwb3NpdG9yeURhdGEgPSByZXBvc2l0b3J5ID0+IHtcbiAgICByZXR1cm4geXViaWtpcmkoe1xuICAgICAgYnJhbmNoZXM6IHJlcG9zaXRvcnkuZ2V0QnJhbmNoZXMoKSxcbiAgICAgIHJlbW90ZXM6IHJlcG9zaXRvcnkuZ2V0UmVtb3RlcygpLFxuICAgICAgaXNBYnNlbnQ6IHJlcG9zaXRvcnkuaXNBYnNlbnQoKSxcbiAgICAgIGlzTG9hZGluZzogcmVwb3NpdG9yeS5pc0xvYWRpbmcoKSxcbiAgICAgIGlzUHJlc2VudDogcmVwb3NpdG9yeS5pc1ByZXNlbnQoKSxcbiAgICAgIGlzTWVyZ2luZzogcmVwb3NpdG9yeS5pc01lcmdpbmcoKSxcbiAgICAgIGlzUmViYXNpbmc6IHJlcG9zaXRvcnkuaXNSZWJhc2luZygpLFxuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTG9naW4gPSB0b2tlbiA9PiB0aGlzLnByb3BzLmxvZ2luTW9kZWwuc2V0VG9rZW4odGhpcy5wcm9wcy5lbmRwb2ludC5nZXRMb2dpbkFjY291bnQoKSwgdG9rZW4pO1xuXG4gIGhhbmRsZUxvZ291dCA9ICgpID0+IHRoaXMucHJvcHMubG9naW5Nb2RlbC5yZW1vdmVUb2tlbih0aGlzLnByb3BzLmVuZHBvaW50LmdldExvZ2luQWNjb3VudCgpKTtcblxuICBoYW5kbGVUb2tlblJldHJ5ID0gKCkgPT4gdGhpcy5wcm9wcy5sb2dpbk1vZGVsLmRpZFVwZGF0ZSgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxRQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxXQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxlQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxpQkFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsYUFBQSxHQUFBVCxzQkFBQSxDQUFBQyxP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