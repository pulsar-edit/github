"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _atom = require("atom");
var _util = require("util");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const LAYER_NAMES = ['unchanged', 'addition', 'deletion', 'nonewline', 'hunk', 'patch'];
class PatchBuffer {
  constructor() {
    this.buffer = new _atom.TextBuffer();
    this.buffer.retain();
    this.layers = LAYER_NAMES.reduce((map, layerName) => {
      map[layerName] = this.buffer.addMarkerLayer();
      return map;
    }, {});
  }
  getBuffer() {
    return this.buffer;
  }
  getInsertionPoint() {
    return this.buffer.getEndPosition();
  }
  getLayer(layerName) {
    return this.layers[layerName];
  }
  findMarkers(layerName, ...args) {
    return this.layers[layerName].findMarkers(...args);
  }
  findAllMarkers(...args) {
    return LAYER_NAMES.reduce((arr, layerName) => {
      arr.push(...this.findMarkers(layerName, ...args));
      return arr;
    }, []);
  }
  markPosition(layerName, ...args) {
    return this.layers[layerName].markPosition(...args);
  }
  markRange(layerName, ...args) {
    return this.layers[layerName].markRange(...args);
  }
  clearAllLayers() {
    for (const layerName of LAYER_NAMES) {
      this.layers[layerName].clear();
    }
  }
  createInserterAt(insertionPoint) {
    return new Inserter(this, _atom.Point.fromObject(insertionPoint));
  }
  createInserterAtEnd() {
    return this.createInserterAt(this.getInsertionPoint());
  }
  createSubBuffer(rangeLike, options = {}) {
    const opts = _objectSpread({
      exclude: new Set()
    }, options);
    const range = _atom.Range.fromObject(rangeLike);
    const baseOffset = range.start.negate();
    const includedMarkersByLayer = LAYER_NAMES.reduce((map, layerName) => {
      map[layerName] = this.layers[layerName].findMarkers({
        intersectsRange: range
      }).filter(m => !opts.exclude.has(m));
      return map;
    }, {});
    const markerMap = new Map();
    const subBuffer = new PatchBuffer();
    subBuffer.getBuffer().setText(this.buffer.getTextInRange(range));
    for (const layerName of LAYER_NAMES) {
      for (const oldMarker of includedMarkersByLayer[layerName]) {
        const oldRange = oldMarker.getRange();
        const clippedStart = oldRange.start.isLessThanOrEqual(range.start) ? range.start : oldRange.start;
        const clippedEnd = oldRange.end.isGreaterThanOrEqual(range.end) ? range.end : oldRange.end;

        // Exclude non-empty markers that intersect *only* at the range start or end
        if (clippedStart.isEqual(clippedEnd) && !oldRange.start.isEqual(oldRange.end)) {
          continue;
        }
        const startOffset = clippedStart.row === range.start.row ? baseOffset : [baseOffset.row, 0];
        const endOffset = clippedEnd.row === range.start.row ? baseOffset : [baseOffset.row, 0];
        const newMarker = subBuffer.markRange(layerName, [clippedStart.translate(startOffset), clippedEnd.translate(endOffset)], oldMarker.getProperties());
        markerMap.set(oldMarker, newMarker);
      }
    }
    return {
      patchBuffer: subBuffer,
      markerMap
    };
  }
  extractPatchBuffer(rangeLike, options = {}) {
    const {
      patchBuffer: subBuffer,
      markerMap
    } = this.createSubBuffer(rangeLike, options);
    for (const oldMarker of markerMap.keys()) {
      oldMarker.destroy();
    }
    this.buffer.setTextInRange(rangeLike, '');
    return {
      patchBuffer: subBuffer,
      markerMap
    };
  }
  deleteLastNewline() {
    if (this.buffer.getLastLine() === '') {
      this.buffer.deleteRow(this.buffer.getLastRow());
    }
    return this;
  }
  adopt(original) {
    this.clearAllLayers();
    this.buffer.setText(original.getBuffer().getText());
    const markerMap = new Map();
    for (const layerName of LAYER_NAMES) {
      for (const originalMarker of original.getLayer(layerName).getMarkers()) {
        const newMarker = this.markRange(layerName, originalMarker.getRange(), originalMarker.getProperties());
        markerMap.set(originalMarker, newMarker);
      }
    }
    return markerMap;
  }

  /* istanbul ignore next */
  inspect(opts = {}) {
    /* istanbul ignore next */
    const options = _objectSpread({
      layerNames: LAYER_NAMES
    }, opts);
    let inspectString = '';
    const increasingMarkers = [];
    for (const layerName of options.layerNames) {
      for (const marker of this.findMarkers(layerName, {})) {
        increasingMarkers.push({
          layerName,
          point: marker.getRange().start,
          start: true,
          id: marker.id
        });
        increasingMarkers.push({
          layerName,
          point: marker.getRange().end,
          end: true,
          id: marker.id
        });
      }
    }
    increasingMarkers.sort((a, b) => {
      const cmp = a.point.compare(b.point);
      if (cmp !== 0) {
        return cmp;
      } else if (a.start && b.start) {
        return 0;
      } else if (a.start && !b.start) {
        return -1;
      } else if (!a.start && b.start) {
        return 1;
      } else {
        return 0;
      }
    });
    let inspectPoint = _atom.Point.fromObject([0, 0]);
    for (const marker of increasingMarkers) {
      if (!marker.point.isEqual(inspectPoint)) {
        inspectString += (0, _util.inspect)(this.buffer.getTextInRange([inspectPoint, marker.point])) + '\n';
      }
      if (marker.start) {
        inspectString += `  start ${marker.layerName}@${marker.id}\n`;
      } else if (marker.end) {
        inspectString += `  end ${marker.layerName}@${marker.id}\n`;
      }
      inspectPoint = marker.point;
    }
    return inspectString;
  }
}
exports.default = PatchBuffer;
class Inserter {
  constructor(patchBuffer, insertionPoint) {
    const clipped = patchBuffer.getBuffer().clipPosition(insertionPoint);
    this.patchBuffer = patchBuffer;
    this.startPoint = clipped.copy();
    this.insertionPoint = clipped.copy();
    this.markerBlueprints = [];
    this.markerMapCallbacks = [];
    this.markersBefore = new Set();
    this.markersAfter = new Set();
  }
  keepBefore(markers) {
    for (const marker of markers) {
      if (marker.getRange().end.isEqual(this.startPoint)) {
        this.markersBefore.add(marker);
      }
    }
    return this;
  }
  keepAfter(markers) {
    for (const marker of markers) {
      if (marker.getRange().start.isEqual(this.startPoint)) {
        this.markersAfter.add(marker);
      }
    }
    return this;
  }
  markWhile(layerName, block, markerOpts) {
    const start = this.insertionPoint.copy();
    block();
    const end = this.insertionPoint.copy();
    this.markerBlueprints.push({
      layerName,
      range: new _atom.Range(start, end),
      markerOpts
    });
    return this;
  }
  insert(text) {
    const insertedRange = this.patchBuffer.getBuffer().insert(this.insertionPoint, text);
    this.insertionPoint = insertedRange.end;
    return this;
  }
  insertMarked(text, layerName, markerOpts) {
    return this.markWhile(layerName, () => this.insert(text), markerOpts);
  }
  insertPatchBuffer(subPatchBuffer, opts) {
    const baseOffset = this.insertionPoint.copy();
    this.insert(subPatchBuffer.getBuffer().getText());
    const subMarkerMap = new Map();
    for (const layerName of LAYER_NAMES) {
      for (const oldMarker of subPatchBuffer.findMarkers(layerName, {})) {
        const startOffset = oldMarker.getRange().start.row === 0 ? baseOffset : [baseOffset.row, 0];
        const endOffset = oldMarker.getRange().end.row === 0 ? baseOffset : [baseOffset.row, 0];
        const range = oldMarker.getRange().translate(startOffset, endOffset);
        const markerOpts = _objectSpread({}, oldMarker.getProperties(), {
          callback: newMarker => {
            subMarkerMap.set(oldMarker, newMarker);
          }
        });
        this.markerBlueprints.push({
          layerName,
          range,
          markerOpts
        });
      }
    }
    this.markerMapCallbacks.push({
      markerMap: subMarkerMap,
      callback: opts.callback
    });
    return this;
  }
  apply() {
    for (const {
      layerName,
      range,
      markerOpts
    } of this.markerBlueprints) {
      const callback = markerOpts.callback;
      delete markerOpts.callback;
      const marker = this.patchBuffer.markRange(layerName, range, markerOpts);
      if (callback) {
        callback(marker);
      }
    }
    for (const {
      markerMap,
      callback
    } of this.markerMapCallbacks) {
      callback(markerMap);
    }
    for (const beforeMarker of this.markersBefore) {
      const isEmpty = beforeMarker.getRange().isEmpty();
      if (!beforeMarker.isReversed()) {
        beforeMarker.setHeadPosition(this.startPoint);
        if (isEmpty) {
          beforeMarker.setTailPosition(this.startPoint);
        }
      } else {
        beforeMarker.setTailPosition(this.startPoint);
        if (isEmpty) {
          beforeMarker.setHeadPosition(this.startPoint);
        }
      }
    }
    for (const afterMarker of this.markersAfter) {
      const isEmpty = afterMarker.getRange().isEmpty();
      if (!afterMarker.isReversed()) {
        afterMarker.setTailPosition(this.insertionPoint);
        if (isEmpty) {
          afterMarker.setHeadPosition(this.insertionPoint);
        }
      } else {
        afterMarker.setHeadPosition(this.insertionPoint);
        if (isEmpty) {
          afterMarker.setTailPosition(this.insertionPoint);
        }
      }
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMQVlFUl9OQU1FUyIsIlBhdGNoQnVmZmVyIiwiY29uc3RydWN0b3IiLCJidWZmZXIiLCJUZXh0QnVmZmVyIiwicmV0YWluIiwibGF5ZXJzIiwicmVkdWNlIiwibWFwIiwibGF5ZXJOYW1lIiwiYWRkTWFya2VyTGF5ZXIiLCJnZXRCdWZmZXIiLCJnZXRJbnNlcnRpb25Qb2ludCIsImdldEVuZFBvc2l0aW9uIiwiZ2V0TGF5ZXIiLCJmaW5kTWFya2VycyIsImFyZ3MiLCJmaW5kQWxsTWFya2VycyIsImFyciIsInB1c2giLCJtYXJrUG9zaXRpb24iLCJtYXJrUmFuZ2UiLCJjbGVhckFsbExheWVycyIsImNsZWFyIiwiY3JlYXRlSW5zZXJ0ZXJBdCIsImluc2VydGlvblBvaW50IiwiSW5zZXJ0ZXIiLCJQb2ludCIsImZyb21PYmplY3QiLCJjcmVhdGVJbnNlcnRlckF0RW5kIiwiY3JlYXRlU3ViQnVmZmVyIiwicmFuZ2VMaWtlIiwib3B0aW9ucyIsIm9wdHMiLCJleGNsdWRlIiwiU2V0IiwicmFuZ2UiLCJSYW5nZSIsImJhc2VPZmZzZXQiLCJzdGFydCIsIm5lZ2F0ZSIsImluY2x1ZGVkTWFya2Vyc0J5TGF5ZXIiLCJpbnRlcnNlY3RzUmFuZ2UiLCJmaWx0ZXIiLCJtIiwiaGFzIiwibWFya2VyTWFwIiwiTWFwIiwic3ViQnVmZmVyIiwic2V0VGV4dCIsImdldFRleHRJblJhbmdlIiwib2xkTWFya2VyIiwib2xkUmFuZ2UiLCJnZXRSYW5nZSIsImNsaXBwZWRTdGFydCIsImlzTGVzc1RoYW5PckVxdWFsIiwiY2xpcHBlZEVuZCIsImVuZCIsImlzR3JlYXRlclRoYW5PckVxdWFsIiwiaXNFcXVhbCIsInN0YXJ0T2Zmc2V0Iiwicm93IiwiZW5kT2Zmc2V0IiwibmV3TWFya2VyIiwidHJhbnNsYXRlIiwiZ2V0UHJvcGVydGllcyIsInNldCIsInBhdGNoQnVmZmVyIiwiZXh0cmFjdFBhdGNoQnVmZmVyIiwia2V5cyIsImRlc3Ryb3kiLCJzZXRUZXh0SW5SYW5nZSIsImRlbGV0ZUxhc3ROZXdsaW5lIiwiZ2V0TGFzdExpbmUiLCJkZWxldGVSb3ciLCJnZXRMYXN0Um93IiwiYWRvcHQiLCJvcmlnaW5hbCIsImdldFRleHQiLCJvcmlnaW5hbE1hcmtlciIsImdldE1hcmtlcnMiLCJpbnNwZWN0IiwibGF5ZXJOYW1lcyIsImluc3BlY3RTdHJpbmciLCJpbmNyZWFzaW5nTWFya2VycyIsIm1hcmtlciIsInBvaW50IiwiaWQiLCJzb3J0IiwiYSIsImIiLCJjbXAiLCJjb21wYXJlIiwiaW5zcGVjdFBvaW50IiwiY2xpcHBlZCIsImNsaXBQb3NpdGlvbiIsInN0YXJ0UG9pbnQiLCJjb3B5IiwibWFya2VyQmx1ZXByaW50cyIsIm1hcmtlck1hcENhbGxiYWNrcyIsIm1hcmtlcnNCZWZvcmUiLCJtYXJrZXJzQWZ0ZXIiLCJrZWVwQmVmb3JlIiwibWFya2VycyIsImFkZCIsImtlZXBBZnRlciIsIm1hcmtXaGlsZSIsImJsb2NrIiwibWFya2VyT3B0cyIsImluc2VydCIsInRleHQiLCJpbnNlcnRlZFJhbmdlIiwiaW5zZXJ0TWFya2VkIiwiaW5zZXJ0UGF0Y2hCdWZmZXIiLCJzdWJQYXRjaEJ1ZmZlciIsInN1Yk1hcmtlck1hcCIsImNhbGxiYWNrIiwiYXBwbHkiLCJiZWZvcmVNYXJrZXIiLCJpc0VtcHR5IiwiaXNSZXZlcnNlZCIsInNldEhlYWRQb3NpdGlvbiIsInNldFRhaWxQb3NpdGlvbiIsImFmdGVyTWFya2VyIl0sInNvdXJjZXMiOlsicGF0Y2gtYnVmZmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VGV4dEJ1ZmZlciwgUmFuZ2UsIFBvaW50fSBmcm9tICdhdG9tJztcbmltcG9ydCB7aW5zcGVjdH0gZnJvbSAndXRpbCc7XG5cbmNvbnN0IExBWUVSX05BTUVTID0gWyd1bmNoYW5nZWQnLCAnYWRkaXRpb24nLCAnZGVsZXRpb24nLCAnbm9uZXdsaW5lJywgJ2h1bmsnLCAncGF0Y2gnXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hCdWZmZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBUZXh0QnVmZmVyKCk7XG4gICAgdGhpcy5idWZmZXIucmV0YWluKCk7XG5cbiAgICB0aGlzLmxheWVycyA9IExBWUVSX05BTUVTLnJlZHVjZSgobWFwLCBsYXllck5hbWUpID0+IHtcbiAgICAgIG1hcFtsYXllck5hbWVdID0gdGhpcy5idWZmZXIuYWRkTWFya2VyTGF5ZXIoKTtcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfSwge30pO1xuICB9XG5cbiAgZ2V0QnVmZmVyKCkge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcjtcbiAgfVxuXG4gIGdldEluc2VydGlvblBvaW50KCkge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5nZXRFbmRQb3NpdGlvbigpO1xuICB9XG5cbiAgZ2V0TGF5ZXIobGF5ZXJOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5ZXJzW2xheWVyTmFtZV07XG4gIH1cblxuICBmaW5kTWFya2VycyhsYXllck5hbWUsIC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllcnNbbGF5ZXJOYW1lXS5maW5kTWFya2VycyguLi5hcmdzKTtcbiAgfVxuXG4gIGZpbmRBbGxNYXJrZXJzKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gTEFZRVJfTkFNRVMucmVkdWNlKChhcnIsIGxheWVyTmFtZSkgPT4ge1xuICAgICAgYXJyLnB1c2goLi4udGhpcy5maW5kTWFya2VycyhsYXllck5hbWUsIC4uLmFyZ3MpKTtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSwgW10pO1xuICB9XG5cbiAgbWFya1Bvc2l0aW9uKGxheWVyTmFtZSwgLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLmxheWVyc1tsYXllck5hbWVdLm1hcmtQb3NpdGlvbiguLi5hcmdzKTtcbiAgfVxuXG4gIG1hcmtSYW5nZShsYXllck5hbWUsIC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllcnNbbGF5ZXJOYW1lXS5tYXJrUmFuZ2UoLi4uYXJncyk7XG4gIH1cblxuICBjbGVhckFsbExheWVycygpIHtcbiAgICBmb3IgKGNvbnN0IGxheWVyTmFtZSBvZiBMQVlFUl9OQU1FUykge1xuICAgICAgdGhpcy5sYXllcnNbbGF5ZXJOYW1lXS5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUluc2VydGVyQXQoaW5zZXJ0aW9uUG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IEluc2VydGVyKHRoaXMsIFBvaW50LmZyb21PYmplY3QoaW5zZXJ0aW9uUG9pbnQpKTtcbiAgfVxuXG4gIGNyZWF0ZUluc2VydGVyQXRFbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSW5zZXJ0ZXJBdCh0aGlzLmdldEluc2VydGlvblBvaW50KCkpO1xuICB9XG5cbiAgY3JlYXRlU3ViQnVmZmVyKHJhbmdlTGlrZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIGV4Y2x1ZGU6IG5ldyBTZXQoKSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJhbmdlID0gUmFuZ2UuZnJvbU9iamVjdChyYW5nZUxpa2UpO1xuICAgIGNvbnN0IGJhc2VPZmZzZXQgPSByYW5nZS5zdGFydC5uZWdhdGUoKTtcbiAgICBjb25zdCBpbmNsdWRlZE1hcmtlcnNCeUxheWVyID0gTEFZRVJfTkFNRVMucmVkdWNlKChtYXAsIGxheWVyTmFtZSkgPT4ge1xuICAgICAgbWFwW2xheWVyTmFtZV0gPSB0aGlzLmxheWVyc1tsYXllck5hbWVdXG4gICAgICAgIC5maW5kTWFya2Vycyh7aW50ZXJzZWN0c1JhbmdlOiByYW5nZX0pXG4gICAgICAgIC5maWx0ZXIobSA9PiAhb3B0cy5leGNsdWRlLmhhcyhtKSk7XG4gICAgICByZXR1cm4gbWFwO1xuICAgIH0sIHt9KTtcbiAgICBjb25zdCBtYXJrZXJNYXAgPSBuZXcgTWFwKCk7XG5cbiAgICBjb25zdCBzdWJCdWZmZXIgPSBuZXcgUGF0Y2hCdWZmZXIoKTtcbiAgICBzdWJCdWZmZXIuZ2V0QnVmZmVyKCkuc2V0VGV4dCh0aGlzLmJ1ZmZlci5nZXRUZXh0SW5SYW5nZShyYW5nZSkpO1xuXG4gICAgZm9yIChjb25zdCBsYXllck5hbWUgb2YgTEFZRVJfTkFNRVMpIHtcbiAgICAgIGZvciAoY29uc3Qgb2xkTWFya2VyIG9mIGluY2x1ZGVkTWFya2Vyc0J5TGF5ZXJbbGF5ZXJOYW1lXSkge1xuICAgICAgICBjb25zdCBvbGRSYW5nZSA9IG9sZE1hcmtlci5nZXRSYW5nZSgpO1xuXG4gICAgICAgIGNvbnN0IGNsaXBwZWRTdGFydCA9IG9sZFJhbmdlLnN0YXJ0LmlzTGVzc1RoYW5PckVxdWFsKHJhbmdlLnN0YXJ0KSA/IHJhbmdlLnN0YXJ0IDogb2xkUmFuZ2Uuc3RhcnQ7XG4gICAgICAgIGNvbnN0IGNsaXBwZWRFbmQgPSBvbGRSYW5nZS5lbmQuaXNHcmVhdGVyVGhhbk9yRXF1YWwocmFuZ2UuZW5kKSA/IHJhbmdlLmVuZCA6IG9sZFJhbmdlLmVuZDtcblxuICAgICAgICAvLyBFeGNsdWRlIG5vbi1lbXB0eSBtYXJrZXJzIHRoYXQgaW50ZXJzZWN0ICpvbmx5KiBhdCB0aGUgcmFuZ2Ugc3RhcnQgb3IgZW5kXG4gICAgICAgIGlmIChjbGlwcGVkU3RhcnQuaXNFcXVhbChjbGlwcGVkRW5kKSAmJiAhb2xkUmFuZ2Uuc3RhcnQuaXNFcXVhbChvbGRSYW5nZS5lbmQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9IGNsaXBwZWRTdGFydC5yb3cgPT09IHJhbmdlLnN0YXJ0LnJvdyA/IGJhc2VPZmZzZXQgOiBbYmFzZU9mZnNldC5yb3csIDBdO1xuICAgICAgICBjb25zdCBlbmRPZmZzZXQgPSBjbGlwcGVkRW5kLnJvdyA9PT0gcmFuZ2Uuc3RhcnQucm93ID8gYmFzZU9mZnNldCA6IFtiYXNlT2Zmc2V0LnJvdywgMF07XG5cbiAgICAgICAgY29uc3QgbmV3TWFya2VyID0gc3ViQnVmZmVyLm1hcmtSYW5nZShcbiAgICAgICAgICBsYXllck5hbWUsXG4gICAgICAgICAgW2NsaXBwZWRTdGFydC50cmFuc2xhdGUoc3RhcnRPZmZzZXQpLCBjbGlwcGVkRW5kLnRyYW5zbGF0ZShlbmRPZmZzZXQpXSxcbiAgICAgICAgICBvbGRNYXJrZXIuZ2V0UHJvcGVydGllcygpLFxuICAgICAgICApO1xuICAgICAgICBtYXJrZXJNYXAuc2V0KG9sZE1hcmtlciwgbmV3TWFya2VyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge3BhdGNoQnVmZmVyOiBzdWJCdWZmZXIsIG1hcmtlck1hcH07XG4gIH1cblxuICBleHRyYWN0UGF0Y2hCdWZmZXIocmFuZ2VMaWtlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7cGF0Y2hCdWZmZXI6IHN1YkJ1ZmZlciwgbWFya2VyTWFwfSA9IHRoaXMuY3JlYXRlU3ViQnVmZmVyKHJhbmdlTGlrZSwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKGNvbnN0IG9sZE1hcmtlciBvZiBtYXJrZXJNYXAua2V5cygpKSB7XG4gICAgICBvbGRNYXJrZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIHRoaXMuYnVmZmVyLnNldFRleHRJblJhbmdlKHJhbmdlTGlrZSwgJycpO1xuICAgIHJldHVybiB7cGF0Y2hCdWZmZXI6IHN1YkJ1ZmZlciwgbWFya2VyTWFwfTtcbiAgfVxuXG4gIGRlbGV0ZUxhc3ROZXdsaW5lKCkge1xuICAgIGlmICh0aGlzLmJ1ZmZlci5nZXRMYXN0TGluZSgpID09PSAnJykge1xuICAgICAgdGhpcy5idWZmZXIuZGVsZXRlUm93KHRoaXMuYnVmZmVyLmdldExhc3RSb3coKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZG9wdChvcmlnaW5hbCkge1xuICAgIHRoaXMuY2xlYXJBbGxMYXllcnMoKTtcbiAgICB0aGlzLmJ1ZmZlci5zZXRUZXh0KG9yaWdpbmFsLmdldEJ1ZmZlcigpLmdldFRleHQoKSk7XG5cbiAgICBjb25zdCBtYXJrZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBsYXllck5hbWUgb2YgTEFZRVJfTkFNRVMpIHtcbiAgICAgIGZvciAoY29uc3Qgb3JpZ2luYWxNYXJrZXIgb2Ygb3JpZ2luYWwuZ2V0TGF5ZXIobGF5ZXJOYW1lKS5nZXRNYXJrZXJzKCkpIHtcbiAgICAgICAgY29uc3QgbmV3TWFya2VyID0gdGhpcy5tYXJrUmFuZ2UobGF5ZXJOYW1lLCBvcmlnaW5hbE1hcmtlci5nZXRSYW5nZSgpLCBvcmlnaW5hbE1hcmtlci5nZXRQcm9wZXJ0aWVzKCkpO1xuICAgICAgICBtYXJrZXJNYXAuc2V0KG9yaWdpbmFsTWFya2VyLCBuZXdNYXJrZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFya2VyTWFwO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaW5zcGVjdChvcHRzID0ge30pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBsYXllck5hbWVzOiBMQVlFUl9OQU1FUyxcbiAgICAgIC4uLm9wdHMsXG4gICAgfTtcblxuICAgIGxldCBpbnNwZWN0U3RyaW5nID0gJyc7XG5cbiAgICBjb25zdCBpbmNyZWFzaW5nTWFya2VycyA9IFtdO1xuICAgIGZvciAoY29uc3QgbGF5ZXJOYW1lIG9mIG9wdGlvbnMubGF5ZXJOYW1lcykge1xuICAgICAgZm9yIChjb25zdCBtYXJrZXIgb2YgdGhpcy5maW5kTWFya2VycyhsYXllck5hbWUsIHt9KSkge1xuICAgICAgICBpbmNyZWFzaW5nTWFya2Vycy5wdXNoKHtsYXllck5hbWUsIHBvaW50OiBtYXJrZXIuZ2V0UmFuZ2UoKS5zdGFydCwgc3RhcnQ6IHRydWUsIGlkOiBtYXJrZXIuaWR9KTtcbiAgICAgICAgaW5jcmVhc2luZ01hcmtlcnMucHVzaCh7bGF5ZXJOYW1lLCBwb2ludDogbWFya2VyLmdldFJhbmdlKCkuZW5kLCBlbmQ6IHRydWUsIGlkOiBtYXJrZXIuaWR9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW5jcmVhc2luZ01hcmtlcnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgY21wID0gYS5wb2ludC5jb21wYXJlKGIucG9pbnQpO1xuICAgICAgaWYgKGNtcCAhPT0gMCkge1xuICAgICAgICByZXR1cm4gY21wO1xuICAgICAgfSBlbHNlIGlmIChhLnN0YXJ0ICYmIGIuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9IGVsc2UgaWYgKGEuc3RhcnQgJiYgIWIuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIGlmICghYS5zdGFydCAmJiBiLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgaW5zcGVjdFBvaW50ID0gUG9pbnQuZnJvbU9iamVjdChbMCwgMF0pO1xuICAgIGZvciAoY29uc3QgbWFya2VyIG9mIGluY3JlYXNpbmdNYXJrZXJzKSB7XG4gICAgICBpZiAoIW1hcmtlci5wb2ludC5pc0VxdWFsKGluc3BlY3RQb2ludCkpIHtcbiAgICAgICAgaW5zcGVjdFN0cmluZyArPSBpbnNwZWN0KHRoaXMuYnVmZmVyLmdldFRleHRJblJhbmdlKFtpbnNwZWN0UG9pbnQsIG1hcmtlci5wb2ludF0pKSArICdcXG4nO1xuICAgICAgfVxuXG4gICAgICBpZiAobWFya2VyLnN0YXJ0KSB7XG4gICAgICAgIGluc3BlY3RTdHJpbmcgKz0gYCAgc3RhcnQgJHttYXJrZXIubGF5ZXJOYW1lfUAke21hcmtlci5pZH1cXG5gO1xuICAgICAgfSBlbHNlIGlmIChtYXJrZXIuZW5kKSB7XG4gICAgICAgIGluc3BlY3RTdHJpbmcgKz0gYCAgZW5kICR7bWFya2VyLmxheWVyTmFtZX1AJHttYXJrZXIuaWR9XFxuYDtcbiAgICAgIH1cblxuICAgICAgaW5zcGVjdFBvaW50ID0gbWFya2VyLnBvaW50O1xuICAgIH1cblxuICAgIHJldHVybiBpbnNwZWN0U3RyaW5nO1xuICB9XG59XG5cbmNsYXNzIEluc2VydGVyIHtcbiAgY29uc3RydWN0b3IocGF0Y2hCdWZmZXIsIGluc2VydGlvblBvaW50KSB7XG4gICAgY29uc3QgY2xpcHBlZCA9IHBhdGNoQnVmZmVyLmdldEJ1ZmZlcigpLmNsaXBQb3NpdGlvbihpbnNlcnRpb25Qb2ludCk7XG5cbiAgICB0aGlzLnBhdGNoQnVmZmVyID0gcGF0Y2hCdWZmZXI7XG4gICAgdGhpcy5zdGFydFBvaW50ID0gY2xpcHBlZC5jb3B5KCk7XG4gICAgdGhpcy5pbnNlcnRpb25Qb2ludCA9IGNsaXBwZWQuY29weSgpO1xuICAgIHRoaXMubWFya2VyQmx1ZXByaW50cyA9IFtdO1xuICAgIHRoaXMubWFya2VyTWFwQ2FsbGJhY2tzID0gW107XG5cbiAgICB0aGlzLm1hcmtlcnNCZWZvcmUgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5tYXJrZXJzQWZ0ZXIgPSBuZXcgU2V0KCk7XG4gIH1cblxuICBrZWVwQmVmb3JlKG1hcmtlcnMpIHtcbiAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiBtYXJrZXJzKSB7XG4gICAgICBpZiAobWFya2VyLmdldFJhbmdlKCkuZW5kLmlzRXF1YWwodGhpcy5zdGFydFBvaW50KSkge1xuICAgICAgICB0aGlzLm1hcmtlcnNCZWZvcmUuYWRkKG1hcmtlcik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAga2VlcEFmdGVyKG1hcmtlcnMpIHtcbiAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiBtYXJrZXJzKSB7XG4gICAgICBpZiAobWFya2VyLmdldFJhbmdlKCkuc3RhcnQuaXNFcXVhbCh0aGlzLnN0YXJ0UG9pbnQpKSB7XG4gICAgICAgIHRoaXMubWFya2Vyc0FmdGVyLmFkZChtYXJrZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIG1hcmtXaGlsZShsYXllck5hbWUsIGJsb2NrLCBtYXJrZXJPcHRzKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLmluc2VydGlvblBvaW50LmNvcHkoKTtcbiAgICBibG9jaygpO1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuaW5zZXJ0aW9uUG9pbnQuY29weSgpO1xuICAgIHRoaXMubWFya2VyQmx1ZXByaW50cy5wdXNoKHtsYXllck5hbWUsIHJhbmdlOiBuZXcgUmFuZ2Uoc3RhcnQsIGVuZCksIG1hcmtlck9wdHN9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGluc2VydCh0ZXh0KSB7XG4gICAgY29uc3QgaW5zZXJ0ZWRSYW5nZSA9IHRoaXMucGF0Y2hCdWZmZXIuZ2V0QnVmZmVyKCkuaW5zZXJ0KHRoaXMuaW5zZXJ0aW9uUG9pbnQsIHRleHQpO1xuICAgIHRoaXMuaW5zZXJ0aW9uUG9pbnQgPSBpbnNlcnRlZFJhbmdlLmVuZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGluc2VydE1hcmtlZCh0ZXh0LCBsYXllck5hbWUsIG1hcmtlck9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrV2hpbGUobGF5ZXJOYW1lLCAoKSA9PiB0aGlzLmluc2VydCh0ZXh0KSwgbWFya2VyT3B0cyk7XG4gIH1cblxuICBpbnNlcnRQYXRjaEJ1ZmZlcihzdWJQYXRjaEJ1ZmZlciwgb3B0cykge1xuICAgIGNvbnN0IGJhc2VPZmZzZXQgPSB0aGlzLmluc2VydGlvblBvaW50LmNvcHkoKTtcbiAgICB0aGlzLmluc2VydChzdWJQYXRjaEJ1ZmZlci5nZXRCdWZmZXIoKS5nZXRUZXh0KCkpO1xuXG4gICAgY29uc3Qgc3ViTWFya2VyTWFwID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgbGF5ZXJOYW1lIG9mIExBWUVSX05BTUVTKSB7XG4gICAgICBmb3IgKGNvbnN0IG9sZE1hcmtlciBvZiBzdWJQYXRjaEJ1ZmZlci5maW5kTWFya2VycyhsYXllck5hbWUsIHt9KSkge1xuICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9IG9sZE1hcmtlci5nZXRSYW5nZSgpLnN0YXJ0LnJvdyA9PT0gMCA/IGJhc2VPZmZzZXQgOiBbYmFzZU9mZnNldC5yb3csIDBdO1xuICAgICAgICBjb25zdCBlbmRPZmZzZXQgPSBvbGRNYXJrZXIuZ2V0UmFuZ2UoKS5lbmQucm93ID09PSAwID8gYmFzZU9mZnNldCA6IFtiYXNlT2Zmc2V0LnJvdywgMF07XG5cbiAgICAgICAgY29uc3QgcmFuZ2UgPSBvbGRNYXJrZXIuZ2V0UmFuZ2UoKS50cmFuc2xhdGUoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgICAgIGNvbnN0IG1hcmtlck9wdHMgPSB7XG4gICAgICAgICAgLi4ub2xkTWFya2VyLmdldFByb3BlcnRpZXMoKSxcbiAgICAgICAgICBjYWxsYmFjazogbmV3TWFya2VyID0+IHsgc3ViTWFya2VyTWFwLnNldChvbGRNYXJrZXIsIG5ld01hcmtlcik7IH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWFya2VyQmx1ZXByaW50cy5wdXNoKHtsYXllck5hbWUsIHJhbmdlLCBtYXJrZXJPcHRzfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5tYXJrZXJNYXBDYWxsYmFja3MucHVzaCh7bWFya2VyTWFwOiBzdWJNYXJrZXJNYXAsIGNhbGxiYWNrOiBvcHRzLmNhbGxiYWNrfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFwcGx5KCkge1xuICAgIGZvciAoY29uc3Qge2xheWVyTmFtZSwgcmFuZ2UsIG1hcmtlck9wdHN9IG9mIHRoaXMubWFya2VyQmx1ZXByaW50cykge1xuICAgICAgY29uc3QgY2FsbGJhY2sgPSBtYXJrZXJPcHRzLmNhbGxiYWNrO1xuICAgICAgZGVsZXRlIG1hcmtlck9wdHMuY2FsbGJhY2s7XG5cbiAgICAgIGNvbnN0IG1hcmtlciA9IHRoaXMucGF0Y2hCdWZmZXIubWFya1JhbmdlKGxheWVyTmFtZSwgcmFuZ2UsIG1hcmtlck9wdHMpO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKG1hcmtlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB7bWFya2VyTWFwLCBjYWxsYmFja30gb2YgdGhpcy5tYXJrZXJNYXBDYWxsYmFja3MpIHtcbiAgICAgIGNhbGxiYWNrKG1hcmtlck1hcCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBiZWZvcmVNYXJrZXIgb2YgdGhpcy5tYXJrZXJzQmVmb3JlKSB7XG4gICAgICBjb25zdCBpc0VtcHR5ID0gYmVmb3JlTWFya2VyLmdldFJhbmdlKCkuaXNFbXB0eSgpO1xuXG4gICAgICBpZiAoIWJlZm9yZU1hcmtlci5pc1JldmVyc2VkKCkpIHtcbiAgICAgICAgYmVmb3JlTWFya2VyLnNldEhlYWRQb3NpdGlvbih0aGlzLnN0YXJ0UG9pbnQpO1xuICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgIGJlZm9yZU1hcmtlci5zZXRUYWlsUG9zaXRpb24odGhpcy5zdGFydFBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmVmb3JlTWFya2VyLnNldFRhaWxQb3NpdGlvbih0aGlzLnN0YXJ0UG9pbnQpO1xuICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgIGJlZm9yZU1hcmtlci5zZXRIZWFkUG9zaXRpb24odGhpcy5zdGFydFBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgYWZ0ZXJNYXJrZXIgb2YgdGhpcy5tYXJrZXJzQWZ0ZXIpIHtcbiAgICAgIGNvbnN0IGlzRW1wdHkgPSBhZnRlck1hcmtlci5nZXRSYW5nZSgpLmlzRW1wdHkoKTtcblxuICAgICAgaWYgKCFhZnRlck1hcmtlci5pc1JldmVyc2VkKCkpIHtcbiAgICAgICAgYWZ0ZXJNYXJrZXIuc2V0VGFpbFBvc2l0aW9uKHRoaXMuaW5zZXJ0aW9uUG9pbnQpO1xuICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgIGFmdGVyTWFya2VyLnNldEhlYWRQb3NpdGlvbih0aGlzLmluc2VydGlvblBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWZ0ZXJNYXJrZXIuc2V0SGVhZFBvc2l0aW9uKHRoaXMuaW5zZXJ0aW9uUG9pbnQpO1xuICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgIGFmdGVyTWFya2VyLnNldFRhaWxQb3NpdGlvbih0aGlzLmluc2VydGlvblBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQTZCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFN0IsTUFBTUEsV0FBVyxHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUM7QUFFeEUsTUFBTUMsV0FBVyxDQUFDO0VBQy9CQyxXQUFXLEdBQUc7SUFDWixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJQyxnQkFBVSxFQUFFO0lBQzlCLElBQUksQ0FBQ0QsTUFBTSxDQUFDRSxNQUFNLEVBQUU7SUFFcEIsSUFBSSxDQUFDQyxNQUFNLEdBQUdOLFdBQVcsQ0FBQ08sTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRUMsU0FBUyxLQUFLO01BQ25ERCxHQUFHLENBQUNDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ04sTUFBTSxDQUFDTyxjQUFjLEVBQUU7TUFDN0MsT0FBT0YsR0FBRztJQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUNSO0VBRUFHLFNBQVMsR0FBRztJQUNWLE9BQU8sSUFBSSxDQUFDUixNQUFNO0VBQ3BCO0VBRUFTLGlCQUFpQixHQUFHO0lBQ2xCLE9BQU8sSUFBSSxDQUFDVCxNQUFNLENBQUNVLGNBQWMsRUFBRTtFQUNyQztFQUVBQyxRQUFRLENBQUNMLFNBQVMsRUFBRTtJQUNsQixPQUFPLElBQUksQ0FBQ0gsTUFBTSxDQUFDRyxTQUFTLENBQUM7RUFDL0I7RUFFQU0sV0FBVyxDQUFDTixTQUFTLEVBQUUsR0FBR08sSUFBSSxFQUFFO0lBQzlCLE9BQU8sSUFBSSxDQUFDVixNQUFNLENBQUNH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