"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NoNewline = exports.Unchanged = exports.Deletion = exports.Addition = void 0;
var _atom = require("atom");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class Region {
  constructor(marker) {
    this.marker = marker;
  }
  getMarker() {
    return this.marker;
  }
  getRange() {
    return this.marker.getRange();
  }
  getStartBufferRow() {
    return this.getRange().start.row;
  }
  getEndBufferRow() {
    return this.getRange().end.row;
  }
  includesBufferRow(row) {
    return this.getRange().intersectsRow(row);
  }

  /*
   * intersectRows breaks a Region into runs of rows that are included in
   * rowSet and rows that are not. For example:
   *  @this Region        row 10-20
   *  @param rowSet       row 11, 12, 13, 17, 19
   *  @param includeGaps  true (whether the result will include gaps or not)
   *  @return an array of regions like this:
   *    (10, gap = true) (11, 12, 13, gap = false) (14, 15, 16, gap = true)
   *    (17, gap = false) (18, gap = true) (19, gap = false) (20, gap = true)
   */
  intersectRows(rowSet, includeGaps) {
    const intersections = [];
    let withinIntersection = false;
    let currentRow = this.getRange().start.row;
    let nextStartRow = currentRow;
    const finishRowRange = isGap => {
      if (isGap && !includeGaps) {
        nextStartRow = currentRow;
        return;
      }
      if (currentRow <= this.getRange().start.row) {
        return;
      }
      intersections.push({
        intersection: _atom.Range.fromObject([[nextStartRow, 0], [currentRow - 1, Infinity]]),
        gap: isGap
      });
      nextStartRow = currentRow;
    };
    while (currentRow <= this.getRange().end.row) {
      if (rowSet.has(currentRow) && !withinIntersection) {
        // One row past the end of a gap. Start of intersecting row range.
        finishRowRange(true);
        withinIntersection = true;
      } else if (!rowSet.has(currentRow) && withinIntersection) {
        // One row past the end of intersecting row range. Start of the next gap.
        finishRowRange(false);
        withinIntersection = false;
      }
      currentRow++;
    }
    finishRowRange(!withinIntersection);
    return intersections;
  }
  isAddition() {
    return false;
  }
  isDeletion() {
    return false;
  }
  isUnchanged() {
    return false;
  }
  isNoNewline() {
    return false;
  }
  getBufferRows() {
    return this.getRange().getRows();
  }
  bufferRowCount() {
    return this.getRange().getRowCount();
  }
  when(callbacks) {
    const callback = callbacks[this.constructor.name.toLowerCase()] || callbacks.default || (() => undefined);
    return callback();
  }
  updateMarkers(map) {
    this.marker = map.get(this.marker) || this.marker;
  }
  destroyMarkers() {
    this.marker.destroy();
  }
  toStringIn(buffer) {
    const raw = buffer.getTextInRange(this.getRange());
    return this.constructor.origin + raw.replace(/\r?\n/g, '$&' + this.constructor.origin) + buffer.lineEndingForRow(this.getRange().end.row);
  }

  /*
   * Construct a String containing internal diagnostic information.
   */
  /* istanbul ignore next */
  inspect(opts = {}) {
    const options = _objectSpread({
      indent: 0
    }, opts);
    let indentation = '';
    for (let i = 0; i < options.indent; i++) {
      indentation += ' ';
    }
    let inspectString = `${indentation}(${this.constructor.name} marker=${this.marker.id})`;
    if (this.marker.isDestroyed()) {
      inspectString += ' [destroyed]';
    }
    if (!this.marker.isValid()) {
      inspectString += ' [invalid]';
    }
    return inspectString + '\n';
  }
  isChange() {
    return true;
  }
}
class Addition extends Region {
  isAddition() {
    return true;
  }
  invertIn(nextBuffer) {
    return new Deletion(nextBuffer.markRange(this.getRange()));
  }
}
exports.Addition = Addition;
_defineProperty(Addition, "origin", '+');
_defineProperty(Addition, "layerName", 'addition');
class Deletion extends Region {
  isDeletion() {
    return true;
  }
  invertIn(nextBuffer) {
    return new Addition(nextBuffer.markRange(this.getRange()));
  }
}
exports.Deletion = Deletion;
_defineProperty(Deletion, "origin", '-');
_defineProperty(Deletion, "layerName", 'deletion');
class Unchanged extends Region {
  isUnchanged() {
    return true;
  }
  isChange() {
    return false;
  }
  invertIn(nextBuffer) {
    return new Unchanged(nextBuffer.markRange(this.getRange()));
  }
}
exports.Unchanged = Unchanged;
_defineProperty(Unchanged, "origin", ' ');
_defineProperty(Unchanged, "layerName", 'unchanged');
class NoNewline extends Region {
  isNoNewline() {
    return true;
  }
  isChange() {
    return false;
  }
  invertIn(nextBuffer) {
    return new NoNewline(nextBuffer.markRange(this.getRange()));
  }
}
exports.NoNewline = NoNewline;
_defineProperty(NoNewline, "origin", '\\');
_defineProperty(NoNewline, "layerName", 'nonewline');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXRvbSIsInJlcXVpcmUiLCJvd25LZXlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiY2FsbCIsIlR5cGVFcnJvciIsIk51bWJlciIsIlJlZ2lvbiIsImNvbnN0cnVjdG9yIiwibWFya2VyIiwiZ2V0TWFya2VyIiwiZ2V0UmFuZ2UiLCJnZXRTdGFydEJ1ZmZlclJvdyIsInN0YXJ0Iiwicm93IiwiZ2V0RW5kQnVmZmVyUm93IiwiZW5kIiwiaW5jbHVkZXNCdWZmZXJSb3ciLCJpbnRlcnNlY3RzUm93IiwiaW50ZXJzZWN0Um93cyIsInJvd1NldCIsImluY2x1ZGVHYXBzIiwiaW50ZXJzZWN0aW9ucyIsIndpdGhpbkludGVyc2VjdGlvbiIsImN1cnJlbnRSb3ciLCJuZXh0U3RhcnRSb3ciLCJmaW5pc2hSb3dSYW5nZSIsImlzR2FwIiwiaW50ZXJzZWN0aW9uIiwiUmFuZ2UiLCJmcm9tT2JqZWN0IiwiSW5maW5pdHkiLCJnYXAiLCJoYXMiLCJpc0FkZGl0aW9uIiwiaXNEZWxldGlvbiIsImlzVW5jaGFuZ2VkIiwiaXNOb05ld2xpbmUiLCJnZXRCdWZmZXJSb3dzIiwiZ2V0Um93cyIsImJ1ZmZlclJvd0NvdW50IiwiZ2V0Um93Q291bnQiLCJ3aGVuIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2siLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJkZWZhdWx0IiwidXBkYXRlTWFya2VycyIsIm1hcCIsImdldCIsImRlc3Ryb3lNYXJrZXJzIiwiZGVzdHJveSIsInRvU3RyaW5nSW4iLCJidWZmZXIiLCJyYXciLCJnZXRUZXh0SW5SYW5nZSIsIm9yaWdpbiIsInJlcGxhY2UiLCJsaW5lRW5kaW5nRm9yUm93IiwiaW5zcGVjdCIsIm9wdHMiLCJvcHRpb25zIiwiaW5kZW50IiwiaW5kZW50YXRpb24iLCJpIiwiaW5zcGVjdFN0cmluZyIsImlkIiwiaXNEZXN0cm95ZWQiLCJpc1ZhbGlkIiwiaXNDaGFuZ2UiLCJBZGRpdGlvbiIsImludmVydEluIiwibmV4dEJ1ZmZlciIsIkRlbGV0aW9uIiwibWFya1JhbmdlIiwiZXhwb3J0cyIsIlVuY2hhbmdlZCIsIk5vTmV3bGluZSJdLCJzb3VyY2VzIjpbInJlZ2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JhbmdlfSBmcm9tICdhdG9tJztcblxuY2xhc3MgUmVnaW9uIHtcbiAgY29uc3RydWN0b3IobWFya2VyKSB7XG4gICAgdGhpcy5tYXJrZXIgPSBtYXJrZXI7XG4gIH1cblxuICBnZXRNYXJrZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFya2VyO1xuICB9XG5cbiAgZ2V0UmFuZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFya2VyLmdldFJhbmdlKCk7XG4gIH1cblxuICBnZXRTdGFydEJ1ZmZlclJvdygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSYW5nZSgpLnN0YXJ0LnJvdztcbiAgfVxuXG4gIGdldEVuZEJ1ZmZlclJvdygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSYW5nZSgpLmVuZC5yb3c7XG4gIH1cblxuICBpbmNsdWRlc0J1ZmZlclJvdyhyb3cpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSYW5nZSgpLmludGVyc2VjdHNSb3cocm93KTtcbiAgfVxuXG4gIC8qXG4gICAqIGludGVyc2VjdFJvd3MgYnJlYWtzIGEgUmVnaW9uIGludG8gcnVucyBvZiByb3dzIHRoYXQgYXJlIGluY2x1ZGVkIGluXG4gICAqIHJvd1NldCBhbmQgcm93cyB0aGF0IGFyZSBub3QuIEZvciBleGFtcGxlOlxuICAgKiAgQHRoaXMgUmVnaW9uICAgICAgICByb3cgMTAtMjBcbiAgICogIEBwYXJhbSByb3dTZXQgICAgICAgcm93IDExLCAxMiwgMTMsIDE3LCAxOVxuICAgKiAgQHBhcmFtIGluY2x1ZGVHYXBzICB0cnVlICh3aGV0aGVyIHRoZSByZXN1bHQgd2lsbCBpbmNsdWRlIGdhcHMgb3Igbm90KVxuICAgKiAgQHJldHVybiBhbiBhcnJheSBvZiByZWdpb25zIGxpa2UgdGhpczpcbiAgICogICAgKDEwLCBnYXAgPSB0cnVlKSAoMTEsIDEyLCAxMywgZ2FwID0gZmFsc2UpICgxNCwgMTUsIDE2LCBnYXAgPSB0cnVlKVxuICAgKiAgICAoMTcsIGdhcCA9IGZhbHNlKSAoMTgsIGdhcCA9IHRydWUpICgxOSwgZ2FwID0gZmFsc2UpICgyMCwgZ2FwID0gdHJ1ZSlcbiAgICovXG4gIGludGVyc2VjdFJvd3Mocm93U2V0LCBpbmNsdWRlR2Fwcykge1xuICAgIGNvbnN0IGludGVyc2VjdGlvbnMgPSBbXTtcbiAgICBsZXQgd2l0aGluSW50ZXJzZWN0aW9uID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudFJvdyA9IHRoaXMuZ2V0UmFuZ2UoKS5zdGFydC5yb3c7XG4gICAgbGV0IG5leHRTdGFydFJvdyA9IGN1cnJlbnRSb3c7XG5cbiAgICBjb25zdCBmaW5pc2hSb3dSYW5nZSA9IGlzR2FwID0+IHtcbiAgICAgIGlmIChpc0dhcCAmJiAhaW5jbHVkZUdhcHMpIHtcbiAgICAgICAgbmV4dFN0YXJ0Um93ID0gY3VycmVudFJvdztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudFJvdyA8PSB0aGlzLmdldFJhbmdlKCkuc3RhcnQucm93KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgaW50ZXJzZWN0aW9uOiBSYW5nZS5mcm9tT2JqZWN0KFtbbmV4dFN0YXJ0Um93LCAwXSwgW2N1cnJlbnRSb3cgLSAxLCBJbmZpbml0eV1dKSxcbiAgICAgICAgZ2FwOiBpc0dhcCxcbiAgICAgIH0pO1xuXG4gICAgICBuZXh0U3RhcnRSb3cgPSBjdXJyZW50Um93O1xuICAgIH07XG5cbiAgICB3aGlsZSAoY3VycmVudFJvdyA8PSB0aGlzLmdldFJhbmdlKCkuZW5kLnJvdykge1xuICAgICAgaWYgKHJvd1NldC5oYXMoY3VycmVudFJvdykgJiYgIXdpdGhpbkludGVyc2VjdGlvbikge1xuICAgICAgICAvLyBPbmUgcm93IHBhc3QgdGhlIGVuZCBvZiBhIGdhcC4gU3RhcnQgb2YgaW50ZXJzZWN0aW5nIHJvdyByYW5nZS5cbiAgICAgICAgZmluaXNoUm93UmFuZ2UodHJ1ZSk7XG4gICAgICAgIHdpdGhpbkludGVyc2VjdGlvbiA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKCFyb3dTZXQuaGFzKGN1cnJlbnRSb3cpICYmIHdpdGhpbkludGVyc2VjdGlvbikge1xuICAgICAgICAvLyBPbmUgcm93IHBhc3QgdGhlIGVuZCBvZiBpbnRlcnNlY3Rpbmcgcm93IHJhbmdlLiBTdGFydCBvZiB0aGUgbmV4dCBnYXAuXG4gICAgICAgIGZpbmlzaFJvd1JhbmdlKGZhbHNlKTtcbiAgICAgICAgd2l0aGluSW50ZXJzZWN0aW9uID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRSb3crKztcbiAgICB9XG5cbiAgICBmaW5pc2hSb3dSYW5nZSghd2l0aGluSW50ZXJzZWN0aW9uKTtcbiAgICByZXR1cm4gaW50ZXJzZWN0aW9ucztcbiAgfVxuXG4gIGlzQWRkaXRpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNEZWxldGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc1VuY2hhbmdlZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc05vTmV3bGluZSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRCdWZmZXJSb3dzKCkge1xuICAgIHJldHVybiB0aGlzLmdldFJhbmdlKCkuZ2V0Um93cygpO1xuICB9XG5cbiAgYnVmZmVyUm93Q291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmFuZ2UoKS5nZXRSb3dDb3VudCgpO1xuICB9XG5cbiAgd2hlbihjYWxsYmFja3MpIHtcbiAgICBjb25zdCBjYWxsYmFjayA9IGNhbGxiYWNrc1t0aGlzLmNvbnN0cnVjdG9yLm5hbWUudG9Mb3dlckNhc2UoKV0gfHwgY2FsbGJhY2tzLmRlZmF1bHQgfHwgKCgpID0+IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gIH1cblxuICB1cGRhdGVNYXJrZXJzKG1hcCkge1xuICAgIHRoaXMubWFya2VyID0gbWFwLmdldCh0aGlzLm1hcmtlcikgfHwgdGhpcy5tYXJrZXI7XG4gIH1cblxuICBkZXN0cm95TWFya2VycygpIHtcbiAgICB0aGlzLm1hcmtlci5kZXN0cm95KCk7XG4gIH1cblxuICB0b1N0cmluZ0luKGJ1ZmZlcikge1xuICAgIGNvbnN0IHJhdyA9IGJ1ZmZlci5nZXRUZXh0SW5SYW5nZSh0aGlzLmdldFJhbmdlKCkpO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm9yaWdpbiArIHJhdy5yZXBsYWNlKC9cXHI/XFxuL2csICckJicgKyB0aGlzLmNvbnN0cnVjdG9yLm9yaWdpbikgK1xuICAgICAgYnVmZmVyLmxpbmVFbmRpbmdGb3JSb3codGhpcy5nZXRSYW5nZSgpLmVuZC5yb3cpO1xuICB9XG5cbiAgLypcbiAgICogQ29uc3RydWN0IGEgU3RyaW5nIGNvbnRhaW5pbmcgaW50ZXJuYWwgZGlhZ25vc3RpYyBpbmZvcm1hdGlvbi5cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGluc3BlY3Qob3B0cyA9IHt9KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGluZGVudDogMCxcbiAgICAgIC4uLm9wdHMsXG4gICAgfTtcblxuICAgIGxldCBpbmRlbnRhdGlvbiA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5pbmRlbnQ7IGkrKykge1xuICAgICAgaW5kZW50YXRpb24gKz0gJyAnO1xuICAgIH1cblxuICAgIGxldCBpbnNwZWN0U3RyaW5nID0gYCR7aW5kZW50YXRpb259KCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSBtYXJrZXI9JHt0aGlzLm1hcmtlci5pZH0pYDtcbiAgICBpZiAodGhpcy5tYXJrZXIuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgaW5zcGVjdFN0cmluZyArPSAnIFtkZXN0cm95ZWRdJztcbiAgICB9XG4gICAgaWYgKCF0aGlzLm1hcmtlci5pc1ZhbGlkKCkpIHtcbiAgICAgIGluc3BlY3RTdHJpbmcgKz0gJyBbaW52YWxpZF0nO1xuICAgIH1cbiAgICByZXR1cm4gaW5zcGVjdFN0cmluZyArICdcXG4nO1xuICB9XG5cbiAgaXNDaGFuZ2UoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFkZGl0aW9uIGV4dGVuZHMgUmVnaW9uIHtcbiAgc3RhdGljIG9yaWdpbiA9ICcrJztcblxuICBzdGF0aWMgbGF5ZXJOYW1lID0gJ2FkZGl0aW9uJztcblxuICBpc0FkZGl0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaW52ZXJ0SW4obmV4dEJ1ZmZlcikge1xuICAgIHJldHVybiBuZXcgRGVsZXRpb24obmV4dEJ1ZmZlci5tYXJrUmFuZ2UodGhpcy5nZXRSYW5nZSgpKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERlbGV0aW9uIGV4dGVuZHMgUmVnaW9uIHtcbiAgc3RhdGljIG9yaWdpbiA9ICctJztcblxuICBzdGF0aWMgbGF5ZXJOYW1lID0gJ2RlbGV0aW9uJztcblxuICBpc0RlbGV0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaW52ZXJ0SW4obmV4dEJ1ZmZlcikge1xuICAgIHJldHVybiBuZXcgQWRkaXRpb24obmV4dEJ1ZmZlci5tYXJrUmFuZ2UodGhpcy5nZXRSYW5nZSgpKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVuY2hhbmdlZCBleHRlbmRzIFJlZ2lvbiB7XG4gIHN0YXRpYyBvcmlnaW4gPSAnICc7XG5cbiAgc3RhdGljIGxheWVyTmFtZSA9ICd1bmNoYW5nZWQnO1xuXG4gIGlzVW5jaGFuZ2VkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaXNDaGFuZ2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaW52ZXJ0SW4obmV4dEJ1ZmZlcikge1xuICAgIHJldHVybiBuZXcgVW5jaGFuZ2VkKG5leHRCdWZmZXIubWFya1JhbmdlKHRoaXMuZ2V0UmFuZ2UoKSkpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBOb05ld2xpbmUgZXh0ZW5kcyBSZWdpb24ge1xuICBzdGF0aWMgb3JpZ2luID0gJ1xcXFwnO1xuXG4gIHN0YXRpYyBsYXllck5hbWUgPSAnbm9uZXdsaW5lJztcblxuICBpc05vTmV3bGluZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzQ2hhbmdlKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGludmVydEluKG5leHRCdWZmZXIpIHtcbiAgICByZXR1cm4gbmV3IE5vTmV3bGluZShuZXh0QnVmZmVyLm1hcmtSYW5nZSh0aGlzLmdldFJhbmdlKCkpKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFBMkIsU0FBQUMsUUFBQUMsQ0FBQSxFQUFBQyxDQUFBLFFBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFKLENBQUEsT0FBQUcsTUFBQSxDQUFBRSxxQkFBQSxRQUFBQyxDQUFBLEdBQUFILE1BQUEsQ0FBQUUs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