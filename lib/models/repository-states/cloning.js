"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _state = _interopRequireDefault(require("./state"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/**
 * Git is asynchronously cloning a repository into this working directory.
 */
class Cloning extends _state.default {
  constructor(repository, remoteUrl, sourceRemoteName) {
    super(repository);
    this.remoteUrl = remoteUrl;
    this.sourceRemoteName = sourceRemoteName;
  }
  async start() {
    await _fsExtra.default.mkdirs(this.workdir());
    await this.doClone(this.remoteUrl, {
      recursive: true,
      sourceRemoteName: this.sourceRemoteName
    });
    await this.transitionTo('Loading');
  }
  showGitTabLoading() {
    return true;
  }
  directClone(remoteUrl, options) {
    return this.git().clone(remoteUrl, options);
  }
}
exports.default = Cloning;
_state.default.register(Cloning);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbG9uaW5nIiwiU3RhdGUiLCJjb25zdHJ1Y3RvciIsInJlcG9zaXRvcnkiLCJyZW1vdGVVcmwiLCJzb3VyY2VSZW1vdGVOYW1lIiwic3RhcnQiLCJmcyIsIm1rZGlycyIsIndvcmtkaXIiLCJkb0Nsb25lIiwicmVjdXJzaXZlIiwidHJhbnNpdGlvblRvIiwic2hvd0dpdFRhYkxvYWRpbmciLCJkaXJlY3RDbG9uZSIsIm9wdGlvbnMiLCJnaXQiLCJjbG9uZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiY2xvbmluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuXG5pbXBvcnQgU3RhdGUgZnJvbSAnLi9zdGF0ZSc7XG5cbi8qKlxuICogR2l0IGlzIGFzeW5jaHJvbm91c2x5IGNsb25pbmcgYSByZXBvc2l0b3J5IGludG8gdGhpcyB3b3JraW5nIGRpcmVjdG9yeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2xvbmluZyBleHRlbmRzIFN0YXRlIHtcbiAgY29uc3RydWN0b3IocmVwb3NpdG9yeSwgcmVtb3RlVXJsLCBzb3VyY2VSZW1vdGVOYW1lKSB7XG4gICAgc3VwZXIocmVwb3NpdG9yeSk7XG4gICAgdGhpcy5yZW1vdGVVcmwgPSByZW1vdGVVcmw7XG4gICAgdGhpcy5zb3VyY2VSZW1vdGVOYW1lID0gc291cmNlUmVtb3RlTmFtZTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0KCkge1xuICAgIGF3YWl0IGZzLm1rZGlycyh0aGlzLndvcmtkaXIoKSk7XG4gICAgYXdhaXQgdGhpcy5kb0Nsb25lKHRoaXMucmVtb3RlVXJsLCB7cmVjdXJzaXZlOiB0cnVlLCBzb3VyY2VSZW1vdGVOYW1lOiB0aGlzLnNvdXJjZVJlbW90ZU5hbWV9KTtcblxuICAgIGF3YWl0IHRoaXMudHJhbnNpdGlvblRvKCdMb2FkaW5nJyk7XG4gIH1cblxuICBzaG93R2l0VGFiTG9hZGluZygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGRpcmVjdENsb25lKHJlbW90ZVVybCwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmdpdCgpLmNsb25lKHJlbW90ZVVybCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuU3RhdGUucmVnaXN0ZXIoQ2xvbmluZyk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBRUE7QUFBNEI7QUFFNUI7QUFDQTtBQUNBO0FBQ2UsTUFBTUEsT0FBTyxTQUFTQyxjQUFLLENBQUM7RUFDekNDLFdBQVcsQ0FBQ0MsVUFBVSxFQUFFQyxTQUFTLEVBQUVDLGdCQUFnQixFQUFFO0lBQ25ELEtBQUssQ0FBQ0YsVUFBVSxDQUFDO0lBQ2pCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQSxTQUFTO0lBQzFCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUdBLGdCQUFnQjtFQUMxQztFQUVBLE1BQU1DLEtBQUssR0FBRztJQUNaLE1BQU1DLGdCQUFFLENBQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUNDLE9BQU8sRUFBRSxDQUFDO0lBQy9CLE1BQU0sSUFBSSxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDTixTQUFTLEVBQUU7TUFBQ08sU0FBUyxFQUFFLElBQUk7TUFBRU4sZ0JBQWdCLEVBQUUsSUFBSSxDQUFDQTtJQUFnQixDQUFDLENBQUM7SUFFOUYsTUFBTSxJQUFJLENBQUNPLFlBQVksQ0FBQyxTQUFTLENBQUM7RUFDcEM7RUFFQUMsaUJBQWlCLEdBQUc7SUFDbEIsT0FBTyxJQUFJO0VBQ2I7RUFFQUMsV0FBVyxDQUFDVixTQUFTLEVBQUVXLE9BQU8sRUFBRTtJQUM5QixPQUFPLElBQUksQ0FBQ0MsR0FBRyxFQUFFLENBQUNDLEtBQUssQ0FBQ2IsU0FBUyxFQUFFVyxPQUFPLENBQUM7RUFDN0M7QUFDRjtBQUFDO0FBRURkLGNBQUssQ0FBQ2lCLFFBQVEsQ0FBQ2xCLE9BQU8sQ0FBQyJ9