"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getEndpoint = getEndpoint;
exports.DOTCOM = void 0;
// API endpoint for a GitHub instance, either dotcom or an Enterprise installation.
class Endpoint {
  constructor(host, apiHost, apiRouteParts) {
    this.host = host;
    this.apiHost = apiHost;
    this.apiRoute = apiRouteParts.map(encodeURIComponent).join('/');
  }
  getRestURI(...parts) {
    const sep = parts.length > 0 ? '/' : '';
    return this.getRestRoot() + sep + parts.map(encodeURIComponent).join('/');
  }
  getGraphQLRoot() {
    return this.getRestURI('graphql');
  }
  getRestRoot() {
    const sep = this.apiRoute !== '' ? '/' : '';
    return `https://${this.apiHost}${sep}${this.apiRoute}`;
  }
  getHost() {
    return this.host;
  }
  getLoginAccount() {
    return `https://${this.apiHost}`;
  }
}

// API endpoint for GitHub.com
const DOTCOM = new Endpoint('github.com', 'api.github.com', []);
exports.DOTCOM = DOTCOM;
function getEndpoint(host) {
  if (host === 'github.com') {
    return DOTCOM;
  } else {
    return new Endpoint(host, host, ['api', 'v3']);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbmRwb2ludCIsImNvbnN0cnVjdG9yIiwiaG9zdCIsImFwaUhvc3QiLCJhcGlSb3V0ZVBhcnRzIiwiYXBpUm91dGUiLCJtYXAiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiZ2V0UmVzdFVSSSIsInBhcnRzIiwic2VwIiwibGVuZ3RoIiwiZ2V0UmVzdFJvb3QiLCJnZXRHcmFwaFFMUm9vdCIsImdldEhvc3QiLCJnZXRMb2dpbkFjY291bnQiLCJET1RDT00iLCJleHBvcnRzIiwiZ2V0RW5kcG9pbnQiXSwic291cmNlcyI6WyJlbmRwb2ludC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBUEkgZW5kcG9pbnQgZm9yIGEgR2l0SHViIGluc3RhbmNlLCBlaXRoZXIgZG90Y29tIG9yIGFuIEVudGVycHJpc2UgaW5zdGFsbGF0aW9uLlxuY2xhc3MgRW5kcG9pbnQge1xuICBjb25zdHJ1Y3Rvcihob3N0LCBhcGlIb3N0LCBhcGlSb3V0ZVBhcnRzKSB7XG4gICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICB0aGlzLmFwaUhvc3QgPSBhcGlIb3N0O1xuICAgIHRoaXMuYXBpUm91dGUgPSBhcGlSb3V0ZVBhcnRzLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJy8nKTtcbiAgfVxuXG4gIGdldFJlc3RVUkkoLi4ucGFydHMpIHtcbiAgICBjb25zdCBzZXAgPSBwYXJ0cy5sZW5ndGggPiAwID8gJy8nIDogJyc7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzdFJvb3QoKSArIHNlcCArIHBhcnRzLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJy8nKTtcbiAgfVxuXG4gIGdldEdyYXBoUUxSb290KCkge1xuICAgIHJldHVybiB0aGlzLmdldFJlc3RVUkkoJ2dyYXBocWwnKTtcbiAgfVxuXG4gIGdldFJlc3RSb290KCkge1xuICAgIGNvbnN0IHNlcCA9IHRoaXMuYXBpUm91dGUgIT09ICcnID8gJy8nIDogJyc7XG4gICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5hcGlIb3N0fSR7c2VwfSR7dGhpcy5hcGlSb3V0ZX1gO1xuICB9XG5cbiAgZ2V0SG9zdCgpIHtcbiAgICByZXR1cm4gdGhpcy5ob3N0O1xuICB9XG5cbiAgZ2V0TG9naW5BY2NvdW50KCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly8ke3RoaXMuYXBpSG9zdH1gO1xuICB9XG59XG5cbi8vIEFQSSBlbmRwb2ludCBmb3IgR2l0SHViLmNvbVxuZXhwb3J0IGNvbnN0IERPVENPTSA9IG5ldyBFbmRwb2ludCgnZ2l0aHViLmNvbScsICdhcGkuZ2l0aHViLmNvbScsIFtdKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVuZHBvaW50KGhvc3QpIHtcbiAgaWYgKGhvc3QgPT09ICdnaXRodWIuY29tJykge1xuICAgIHJldHVybiBET1RDT007XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBFbmRwb2ludChob3N0LCBob3N0LCBbJ2FwaScsICd2MyddKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQSxNQUFNQSxRQUFRLENBQUM7RUFDYkMsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLGFBQWEsRUFBRTtJQUN4QyxJQUFJLENBQUNGLElBQUksR0FBR0EsSUFBSTtJQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNFLFFBQVEsR0FBR0QsYUFBYSxDQUFDRSxHQUFHLENBQUNDLGtCQUFrQixDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7RUFDakU7RUFFQUMsVUFBVUEsQ0FBQyxHQUFHQyxLQUFLLEVBQUU7SUFDbkIsTUFBTUMsR0FBRyxHQUFHRCxLQUFLLENBQUNFLE1BQU0sR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUU7SUFDdkMsT0FBTyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsR0FBR0QsS0FBSyxDQUFDSixHQUFHLENBQUNDLGtCQUFrQixDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7RUFDM0U7RUFFQU0sY0FBY0EsQ0FBQSxFQUFHO0lBQ2YsT0FBTyxJQUFJLENBQUNMLFVBQVUsQ0FBQyxTQUFTLENBQUM7RUFDbkM7RUFFQUksV0FBV0EsQ0FBQSxFQUFHO0lBQ1osTUFBTUYsR0FBRyxHQUFHLElBQUksQ0FBQ04sUUFBUSxLQUFLLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRTtJQUMzQyxPQUFRLFdBQVUsSUFBSSxDQUFDRixPQUFRLEdBQUVRLEdBQUksR0FBRSxJQUFJLENBQUNOLFFBQVMsRUFBQztFQUN4RDtFQUVBVSxPQUFPQSxDQUFBLEVBQUc7SUFDUixPQUFPLElBQUksQ0FBQ2IsSUFBSTtFQUNsQjtFQUVBYyxlQUFlQSxDQUFBLEVBQUc7SUFDaEIsT0FBUSxXQUFVLElBQUksQ0FBQ2IsT0FBUSxFQUFDO0VBQ2xDO0FBQ0Y7O0FBRUE7QUFDTyxNQUFNYyxNQUFNLEdBQUcsSUFBSWpCLFFBQVEsQ0FBQyxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxDQUFDO0FBQUNrQixPQUFBLENBQUFELE1BQUEsR0FBQUEsTUFBQTtBQUVoRSxTQUFTRSxXQUFXQSxDQUFDakIsSUFBSSxFQUFFO0VBQ2hDLElBQUlBLElBQUksS0FBSyxZQUFZLEVBQUU7SUFDekIsT0FBT2UsTUFBTTtFQUNmLENBQUMsTUFBTTtJQUNMLE9BQU8sSUFBSWpCLFFBQVEsQ0FBQ0UsSUFBSSxFQUFFQSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7RUFDaEQ7QUFDRiJ9