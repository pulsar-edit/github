"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getEndpoint = getEndpoint;
exports.DOTCOM = void 0;
// API endpoint for a GitHub instance, either dotcom or an Enterprise installation.
class Endpoint {
  constructor(host, apiHost, apiRouteParts) {
    this.host = host;
    this.apiHost = apiHost;
    this.apiRoute = apiRouteParts.map(encodeURIComponent).join('/');
  }
  getRestURI(...parts) {
    const sep = parts.length > 0 ? '/' : '';
    return this.getRestRoot() + sep + parts.map(encodeURIComponent).join('/');
  }
  getGraphQLRoot() {
    return this.getRestURI('graphql');
  }
  getRestRoot() {
    const sep = this.apiRoute !== '' ? '/' : '';
    return `https://${this.apiHost}${sep}${this.apiRoute}`;
  }
  getHost() {
    return this.host;
  }
  getLoginAccount() {
    return `https://${this.apiHost}`;
  }
}

// API endpoint for GitHub.com
const DOTCOM = new Endpoint('github.com', 'api.github.com', []);
exports.DOTCOM = DOTCOM;
function getEndpoint(host) {
  if (host === 'github.com') {
    return DOTCOM;
  } else {
    return new Endpoint(host, host, ['api', 'v3']);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbmRwb2ludCIsImNvbnN0cnVjdG9yIiwiaG9zdCIsImFwaUhvc3QiLCJhcGlSb3V0ZVBhcnRzIiwiYXBpUm91dGUiLCJtYXAiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiZ2V0UmVzdFVSSSIsInBhcnRzIiwic2VwIiwibGVuZ3RoIiwiZ2V0UmVzdFJvb3QiLCJnZXRHcmFwaFFMUm9vdCIsImdldEhvc3QiLCJnZXRMb2dpbkFjY291bnQiLCJET1RDT00iLCJnZXRFbmRwb2ludCJdLCJzb3VyY2VzIjpbImVuZHBvaW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBlbmRwb2ludCBmb3IgYSBHaXRIdWIgaW5zdGFuY2UsIGVpdGhlciBkb3Rjb20gb3IgYW4gRW50ZXJwcmlzZSBpbnN0YWxsYXRpb24uXG5jbGFzcyBFbmRwb2ludCB7XG4gIGNvbnN0cnVjdG9yKGhvc3QsIGFwaUhvc3QsIGFwaVJvdXRlUGFydHMpIHtcbiAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgIHRoaXMuYXBpSG9zdCA9IGFwaUhvc3Q7XG4gICAgdGhpcy5hcGlSb3V0ZSA9IGFwaVJvdXRlUGFydHMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpO1xuICB9XG5cbiAgZ2V0UmVzdFVSSSguLi5wYXJ0cykge1xuICAgIGNvbnN0IHNlcCA9IHBhcnRzLmxlbmd0aCA+IDAgPyAnLycgOiAnJztcbiAgICByZXR1cm4gdGhpcy5nZXRSZXN0Um9vdCgpICsgc2VwICsgcGFydHMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpO1xuICB9XG5cbiAgZ2V0R3JhcGhRTFJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzdFVSSSgnZ3JhcGhxbCcpO1xuICB9XG5cbiAgZ2V0UmVzdFJvb3QoKSB7XG4gICAgY29uc3Qgc2VwID0gdGhpcy5hcGlSb3V0ZSAhPT0gJycgPyAnLycgOiAnJztcbiAgICByZXR1cm4gYGh0dHBzOi8vJHt0aGlzLmFwaUhvc3R9JHtzZXB9JHt0aGlzLmFwaVJvdXRlfWA7XG4gIH1cblxuICBnZXRIb3N0KCkge1xuICAgIHJldHVybiB0aGlzLmhvc3Q7XG4gIH1cblxuICBnZXRMb2dpbkFjY291bnQoKSB7XG4gICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5hcGlIb3N0fWA7XG4gIH1cbn1cblxuLy8gQVBJIGVuZHBvaW50IGZvciBHaXRIdWIuY29tXG5leHBvcnQgY29uc3QgRE9UQ09NID0gbmV3IEVuZHBvaW50KCdnaXRodWIuY29tJywgJ2FwaS5naXRodWIuY29tJywgW10pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5kcG9pbnQoaG9zdCkge1xuICBpZiAoaG9zdCA9PT0gJ2dpdGh1Yi5jb20nKSB7XG4gICAgcmV0dXJuIERPVENPTTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEVuZHBvaW50KGhvc3QsIGhvc3QsIFsnYXBpJywgJ3YzJ10pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBLE1BQU1BLFFBQVEsQ0FBQztFQUNiQyxXQUFXLENBQUNDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEVBQUU7SUFDeEMsSUFBSSxDQUFDRixJQUFJLEdBQUdBLElBQUk7SUFDaEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBLE9BQU87SUFDdEIsSUFBSSxDQUFDRSxRQUFRLEdBQUdELGFBQWEsQ0FBQ0UsR0FBRyxDQUFDQyxrQkFBa0IsQ0FBQyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDO0VBQ2pFO0VBRUFDLFVBQVUsQ0FBQyxHQUFHQyxLQUFLLEVBQUU7SUFDbkIsTUFBTUMsR0FBRyxHQUFHRCxLQUFLLENBQUNFLE1BQU0sR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUU7SUFDdkMsT0FBTyxJQUFJLENBQUNDLFdBQVcsRUFBRSxHQUFHRixHQUFHLEdBQUdELEtBQUssQ0FBQ0osR0FBRyxDQUFDQyxrQkFBa0IsQ0FBQyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDO0VBQzNFO0VBRUFNLGNBQWMsR0FBRztJQUNmLE9BQU8sSUFBSSxDQUFDTCxVQUFVLENBQUMsU0FBUyxDQUFDO0VBQ25DO0VBRUFJLFdBQVcsR0FBRztJQUNaLE1BQU1GLEdBQUcsR0FBRyxJQUFJLENBQUNOLFFBQVEsS0FBSyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUU7SUFDM0MsT0FBUSxXQUFVLElBQUksQ0FBQ0YsT0FBUSxHQUFFUSxHQUFJLEdBQUUsSUFBSSxDQUFDTixRQUFTLEVBQUM7RUFDeEQ7RUFFQVUsT0FBTyxHQUFHO0lBQ1IsT0FBTyxJQUFJLENBQUNiLElBQUk7RUFDbEI7RUFFQWMsZUFBZSxHQUFHO0lBQ2hCLE9BQVEsV0FBVSxJQUFJLENBQUNiLE9BQVEsRUFBQztFQUNsQztBQUNGOztBQUVBO0FBQ08sTUFBTWMsTUFBTSxHQUFHLElBQUlqQixRQUFRLENBQUMsWUFBWSxFQUFFLGdCQUFnQixFQUFFLEVBQUUsQ0FBQztBQUFDO0FBRWhFLFNBQVNrQixXQUFXLENBQUNoQixJQUFJLEVBQUU7RUFDaEMsSUFBSUEsSUFBSSxLQUFLLFlBQVksRUFBRTtJQUN6QixPQUFPZSxNQUFNO0VBQ2YsQ0FBQyxNQUFNO0lBQ0wsT0FBTyxJQUFJakIsUUFBUSxDQUFDRSxJQUFJLEVBQUVBLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztFQUNoRDtBQUNGIn0=