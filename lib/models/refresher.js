"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
/**
 * Uniformly trigger a refetch of all GraphQL query containers within a scoped hierarchy.
 */
class Refresher {
  constructor() {
    this.dispose();
  }
  setRetryCallback(key, retryCallback) {
    this.retryByKey.set(key, retryCallback);
  }
  trigger() {
    for (const [, retryCallback] of this.retryByKey) {
      retryCallback();
    }
  }
  deregister(key) {
    this.retryByKey.delete(key);
  }
  dispose() {
    this.retryByKey = new Map();
  }
}
exports.default = Refresher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWZyZXNoZXIiLCJjb25zdHJ1Y3RvciIsImRpc3Bvc2UiLCJzZXRSZXRyeUNhbGxiYWNrIiwia2V5IiwicmV0cnlDYWxsYmFjayIsInJldHJ5QnlLZXkiLCJzZXQiLCJ0cmlnZ2VyIiwiZGVyZWdpc3RlciIsImRlbGV0ZSIsIk1hcCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsicmVmcmVzaGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pZm9ybWx5IHRyaWdnZXIgYSByZWZldGNoIG9mIGFsbCBHcmFwaFFMIHF1ZXJ5IGNvbnRhaW5lcnMgd2l0aGluIGEgc2NvcGVkIGhpZXJhcmNoeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVmcmVzaGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kaXNwb3NlKCk7XG4gIH1cblxuICBzZXRSZXRyeUNhbGxiYWNrKGtleSwgcmV0cnlDYWxsYmFjaykge1xuICAgIHRoaXMucmV0cnlCeUtleS5zZXQoa2V5LCByZXRyeUNhbGxiYWNrKTtcbiAgfVxuXG4gIHRyaWdnZXIoKSB7XG4gICAgZm9yIChjb25zdCBbLCByZXRyeUNhbGxiYWNrXSBvZiB0aGlzLnJldHJ5QnlLZXkpIHtcbiAgICAgIHJldHJ5Q2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBkZXJlZ2lzdGVyKGtleSkge1xuICAgIHRoaXMucmV0cnlCeUtleS5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5yZXRyeUJ5S2V5ID0gbmV3IE1hcCgpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNlLE1BQU1BLFNBQVMsQ0FBQztFQUM3QkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxPQUFPLENBQUMsQ0FBQztFQUNoQjtFQUVBQyxnQkFBZ0JBLENBQUNDLEdBQUcsRUFBRUMsYUFBYSxFQUFFO0lBQ25DLElBQUksQ0FBQ0MsVUFBVSxDQUFDQyxHQUFHLENBQUNILEdBQUcsRUFBRUMsYUFBYSxDQUFDO0VBQ3pDO0VBRUFHLE9BQU9BLENBQUEsRUFBRztJQUNSLEtBQUssTUFBTSxHQUFHSCxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUNDLFVBQVUsRUFBRTtNQUMvQ0QsYUFBYSxDQUFDLENBQUM7SUFDakI7RUFDRjtFQUVBSSxVQUFVQSxDQUFDTCxHQUFHLEVBQUU7SUFDZCxJQUFJLENBQUNFLFVBQVUsQ0FBQ0ksTUFBTSxDQUFDTixHQUFHLENBQUM7RUFDN0I7RUFFQUYsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsSUFBSSxDQUFDSSxVQUFVLEdBQUcsSUFBSUssR0FBRyxDQUFDLENBQUM7RUFDN0I7QUFDRjtBQUFDQyxPQUFBLENBQUFDLE9BQUEsR0FBQWIsU0FBQSJ9