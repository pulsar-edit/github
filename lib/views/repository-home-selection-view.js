"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.BareRepositoryHomeSelectionView = exports.PAGE_SIZE = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reactRelay = require("react-relay");
var _tabbable = require("./tabbable");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const PAGE_DELAY = 500;
const PAGE_SIZE = 50;
exports.PAGE_SIZE = PAGE_SIZE;
class BareRepositoryHomeSelectionView extends _react.default.Component {
  constructor(...args) {
    super(...args);
    _defineProperty(this, "renderOwner", owner => _react.default.createElement(_react.Fragment, null, _react.default.createElement("div", {
      className: "github-RepositoryHome-ownerOption"
    }, _react.default.createElement("img", {
      alt: "",
      src: owner.avatarURL,
      className: "github-RepositoryHome-ownerAvatar"
    }), _react.default.createElement("span", {
      className: "github-RepositoryHome-ownerName"
    }, owner.login)), owner.disabled && !owner.placeholder && _react.default.createElement("div", {
      className: "github-RepositoryHome-ownerUnwritable"
    }, "(insufficient permissions)")));
    _defineProperty(this, "didChangeOwner", owner => this.props.didChangeOwnerID(owner.id));
    _defineProperty(this, "loadNextPage", () => {
      /* istanbul ignore if */
      if (this.props.relay.isLoading()) {
        setTimeout(this.loadNextPage, PAGE_DELAY);
        return;
      }
      this.props.relay.loadMore(PAGE_SIZE);
    });
  }
  render() {
    const owners = this.getOwners();
    const currentOwner = owners.find(o => o.id === this.props.selectedOwnerID) || owners[0];
    return _react.default.createElement("div", {
      className: "github-RepositoryHome"
    }, _react.default.createElement(_tabbable.TabbableSelect, {
      tabGroup: this.props.tabGroup,
      commands: this.props.commands,
      autofocus: this.props.autofocusOwner,
      className: "github-RepositoryHome-owner",
      clearable: false,
      disabled: this.props.isLoading,
      options: owners,
      optionRenderer: this.renderOwner,
      value: currentOwner,
      valueRenderer: this.renderOwner,
      onChange: this.didChangeOwner
    }), _react.default.createElement("span", {
      className: "github-RepositoryHome-separator"
    }, "/"), _react.default.createElement(_tabbable.TabbableTextEditor, {
      tabGroup: this.props.tabGroup,
      commands: this.props.commands,
      autofocus: this.props.autofocusName,
      mini: true,
      buffer: this.props.nameBuffer
    }));
  }
  componentDidMount() {
    this.schedulePageLoad();
  }
  componentDidUpdate() {
    this.schedulePageLoad();
  }
  getOwners() {
    if (!this.props.user) {
      return [{
        id: 'loading',
        login: 'loading...',
        avatarURL: '',
        disabled: true,
        placeholder: true
      }];
    }
    const owners = [{
      id: this.props.user.id,
      login: this.props.user.login,
      avatarURL: this.props.user.avatarUrl,
      disabled: false
    }];

    /* istanbul ignore if */
    if (!this.props.user.organizations.edges) {
      return owners;
    }
    for (const {
      node
    } of this.props.user.organizations.edges) {
      /* istanbul ignore if */
      if (!node) {
        continue;
      }
      owners.push({
        id: node.id,
        login: node.login,
        avatarURL: node.avatarUrl,
        disabled: !node.viewerCanCreateRepositories
      });
    }
    if (this.props.relay && this.props.relay.hasMore()) {
      owners.push({
        id: 'loading',
        login: 'loading...',
        avatarURL: '',
        disabled: true,
        placeholder: true
      });
    }
    return owners;
  }
  schedulePageLoad() {
    if (!this.props.relay.hasMore()) {
      return;
    }
    setTimeout(this.loadNextPage, PAGE_DELAY);
  }
}
exports.BareRepositoryHomeSelectionView = BareRepositoryHomeSelectionView;
_defineProperty(BareRepositoryHomeSelectionView, "propTypes", {
  // Relay
  relay: _propTypes.default.shape({
    hasMore: _propTypes.default.func.isRequired,
    isLoading: _propTypes.default.func.isRequired,
    loadMore: _propTypes.default.func.isRequired
  }).isRequired,
  user: _propTypes.default.shape({
    id: _propTypes.default.string.isRequired,
    login: _propTypes.default.string.isRequired,
    avatarUrl: _propTypes.default.string.isRequired,
    organizations: _propTypes.default.shape({
      edges: _propTypes.default.arrayOf(_propTypes.default.shape({
        node: _propTypes.default.shape({
          id: _propTypes.default.string.isRequired,
          login: _propTypes.default.string.isRequired,
          avatarUrl: _propTypes.default.string.isRequired,
          viewerCanCreateRepositories: _propTypes.default.bool.isRequired
        })
      }))
    }).isRequired
  }),
  // Model
  nameBuffer: _propTypes.default.object.isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  selectedOwnerID: _propTypes.default.string.isRequired,
  tabGroup: _propTypes.default.object.isRequired,
  autofocusOwner: _propTypes.default.bool,
  autofocusName: _propTypes.default.bool,
  // Selection callback
  didChangeOwnerID: _propTypes.default.func.isRequired,
  // Atom environment
  commands: _propTypes.default.object.isRequired
});
_defineProperty(BareRepositoryHomeSelectionView, "defaultProps", {
  autofocusOwner: false,
  autofocusName: false
});
var _default = (0, _reactRelay.createPaginationContainer)(BareRepositoryHomeSelectionView, {
  user: function () {
    const node = require("./__generated__/repositoryHomeSelectionView_user.graphql");
    if (node.hash && node.hash !== "11a1f1d0eac32bff0a3371217c0eede3") {
      console.error("The definition of 'repositoryHomeSelectionView_user' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
    }
    return require("./__generated__/repositoryHomeSelectionView_user.graphql");
  }
}, {
  direction: 'forward',
  /* istanbul ignore next */
  getConnectionFromProps(props) {
    return props.user && props.user.organizations;
  },
  /* istanbul ignore next */
  getFragmentVariables(prevVars, totalCount) {
    return _objectSpread({}, prevVars, {
      totalCount
    });
  },
  /* istanbul ignore next */
  getVariables(props, {
    count,
    cursor
  }) {
    return {
      id: props.user.id,
      organizationCount: count,
      organizationCursor: cursor
    };
  },
  query: function () {
    const node = require("./__generated__/repositoryHomeSelectionViewQuery.graphql");
    if (node.hash && node.hash !== "67e7843e3ff792e86e979cc948929ea3") {
      console.error("The definition of 'repositoryHomeSelectionViewQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");
    }
    return require("./__generated__/repositoryHomeSelectionViewQuery.graphql");
  }
});
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWFjdFJlbGF5IiwiX3RhYmJhYmxlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0Iiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJQQUdFX0RFTEFZIiwiUEFHRV9TSVpFIiwiZXhwb3J0cyIsIkJhcmVSZXBvc2l0b3J5SG9tZVNlbGVjdGlvblZpZXciLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiYXJncyIsIm93bmVyIiwiY3JlYXRlRWxlbWVudCIsIkZyYWdtZW50IiwiY2xhc3NOYW1lIiwiYWx0Iiwic3JjIiwiYXZhdGFyVVJMIiwibG9naW4iLCJkaXNhYmxlZCIsInBsYWNlaG9sZGVyIiwicHJvcHMiLCJkaWRDaGFuZ2VPd25lcklEIiwiaWQiLCJyZWxheSIsImlzTG9hZGluZyIsInNldFRpbWVvdXQiLCJsb2FkTmV4dFBhZ2UiLCJsb2FkTW9yZSIsInJlbmRlciIsIm93bmVycyIsImdldE93bmVycyIsImN1cnJlbnRPd25lciIsImZpbmQiLCJzZWxlY3RlZE93bmVySUQiLCJUYWJiYWJsZVNlbGVjdCIsInRhYkdyb3VwIiwiY29tbWFuZHMiLCJhdXRvZm9jdXMiLCJhdXRvZm9jdXNPd25lciIsImNsZWFyYWJsZSIsIm9wdGlvbnMiLCJvcHRpb25SZW5kZXJlciIsInJlbmRlck93bmVyIiwidmFsdWVSZW5kZXJlciIsIm9uQ2hhbmdlIiwiZGlkQ2hhbmdlT3duZXIiLCJUYWJiYWJsZVRleHRFZGl0b3IiLCJhdXRvZm9jdXNOYW1lIiwibWluaSIsImJ1ZmZlciIsIm5hbWVCdWZmZXIiLCJjb21wb25lbnREaWRNb3VudCIsInNjaGVkdWxlUGFnZUxvYWQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJ1c2VyIiwiYXZhdGFyVXJsIiwib3JnYW5pemF0aW9ucyIsImVkZ2VzIiwibm9kZSIsInZpZXdlckNhbkNyZWF0ZVJlcG9zaXRvcmllcyIsImhhc01vcmUiLCJQcm9wVHlwZXMiLCJzaGFwZSIsImZ1bmMiLCJpc1JlcXVpcmVkIiwic3RyaW5nIiwiYXJyYXlPZiIsImJvb2wiLCJvYmplY3QiLCJfZGVmYXVsdCIsImNyZWF0ZVBhZ2luYXRpb25Db250YWluZXIiLCJoYXNoIiwiY29uc29sZSIsImVycm9yIiwiZGlyZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbkZyb21Qcm9wcyIsImdldEZyYWdtZW50VmFyaWFibGVzIiwicHJldlZhcnMiLCJ0b3RhbENvdW50IiwiZ2V0VmFyaWFibGVzIiwiY291bnQiLCJjdXJzb3IiLCJvcmdhbml6YXRpb25Db3VudCIsIm9yZ2FuaXphdGlvbkN1cnNvciIsInF1ZXJ5Il0sInNvdXJjZXMiOlsicmVwb3NpdG9yeS1ob21lLXNlbGVjdGlvbi12aWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0ZyYWdtZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtjcmVhdGVQYWdpbmF0aW9uQ29udGFpbmVyLCBncmFwaHFsfSBmcm9tICdyZWFjdC1yZWxheSc7XG5cbmltcG9ydCB7VGFiYmFibGVUZXh0RWRpdG9yLCBUYWJiYWJsZVNlbGVjdH0gZnJvbSAnLi90YWJiYWJsZSc7XG5cbmNvbnN0IFBBR0VfREVMQVkgPSA1MDA7XG5cbmV4cG9ydCBjb25zdCBQQUdFX1NJWkUgPSA1MDtcblxuZXhwb3J0IGNsYXNzIEJhcmVSZXBvc2l0b3J5SG9tZVNlbGVjdGlvblZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8vIFJlbGF5XG4gICAgcmVsYXk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBoYXNNb3JlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgbG9hZE1vcmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICB1c2VyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgIGxvZ2luOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICBhdmF0YXJVcmw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgIG9yZ2FuaXphdGlvbnM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIGVkZ2VzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgIG5vZGU6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgbG9naW46IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGF2YXRhclVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgdmlld2VyQ2FuQ3JlYXRlUmVwb3NpdG9yaWVzOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSksXG4gICAgICB9KS5pc1JlcXVpcmVkLFxuICAgIH0pLFxuXG4gICAgLy8gTW9kZWxcbiAgICBuYW1lQnVmZmVyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHNlbGVjdGVkT3duZXJJRDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHRhYkdyb3VwOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgYXV0b2ZvY3VzT3duZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIGF1dG9mb2N1c05hbWU6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLy8gU2VsZWN0aW9uIGNhbGxiYWNrXG4gICAgZGlkQ2hhbmdlT3duZXJJRDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblxuICAgIC8vIEF0b20gZW52aXJvbm1lbnRcbiAgICBjb21tYW5kczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBhdXRvZm9jdXNPd25lcjogZmFsc2UsXG4gICAgYXV0b2ZvY3VzTmFtZTogZmFsc2UsXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgb3duZXJzID0gdGhpcy5nZXRPd25lcnMoKTtcbiAgICBjb25zdCBjdXJyZW50T3duZXIgPSBvd25lcnMuZmluZChvID0+IG8uaWQgPT09IHRoaXMucHJvcHMuc2VsZWN0ZWRPd25lcklEKSB8fCBvd25lcnNbMF07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnaXRodWItUmVwb3NpdG9yeUhvbWVcIj5cbiAgICAgICAgPFRhYmJhYmxlU2VsZWN0XG4gICAgICAgICAgdGFiR3JvdXA9e3RoaXMucHJvcHMudGFiR3JvdXB9XG4gICAgICAgICAgY29tbWFuZHM9e3RoaXMucHJvcHMuY29tbWFuZHN9XG4gICAgICAgICAgYXV0b2ZvY3VzPXt0aGlzLnByb3BzLmF1dG9mb2N1c093bmVyfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImdpdGh1Yi1SZXBvc2l0b3J5SG9tZS1vd25lclwiXG4gICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cbiAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5pc0xvYWRpbmd9XG4gICAgICAgICAgb3B0aW9ucz17b3duZXJzfVxuICAgICAgICAgIG9wdGlvblJlbmRlcmVyPXt0aGlzLnJlbmRlck93bmVyfVxuICAgICAgICAgIHZhbHVlPXtjdXJyZW50T3duZXJ9XG4gICAgICAgICAgdmFsdWVSZW5kZXJlcj17dGhpcy5yZW5kZXJPd25lcn1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5kaWRDaGFuZ2VPd25lcn1cbiAgICAgICAgLz5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2l0aHViLVJlcG9zaXRvcnlIb21lLXNlcGFyYXRvclwiPi88L3NwYW4+XG4gICAgICAgIDxUYWJiYWJsZVRleHRFZGl0b3JcbiAgICAgICAgICB0YWJHcm91cD17dGhpcy5wcm9wcy50YWJHcm91cH1cbiAgICAgICAgICBjb21tYW5kcz17dGhpcy5wcm9wcy5jb21tYW5kc31cbiAgICAgICAgICBhdXRvZm9jdXM9e3RoaXMucHJvcHMuYXV0b2ZvY3VzTmFtZX1cbiAgICAgICAgICBtaW5pPXt0cnVlfVxuICAgICAgICAgIGJ1ZmZlcj17dGhpcy5wcm9wcy5uYW1lQnVmZmVyfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlck93bmVyID0gb3duZXIgPT4gKFxuICAgIDxGcmFnbWVudD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2l0aHViLVJlcG9zaXRvcnlIb21lLW93bmVyT3B0aW9uXCI+XG4gICAgICAgIDxpbWcgYWx0PVwiXCIgc3JjPXtvd25lci5hdmF0YXJVUkx9IGNsYXNzTmFtZT1cImdpdGh1Yi1SZXBvc2l0b3J5SG9tZS1vd25lckF2YXRhclwiIC8+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdpdGh1Yi1SZXBvc2l0b3J5SG9tZS1vd25lck5hbWVcIj57b3duZXIubG9naW59PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICB7b3duZXIuZGlzYWJsZWQgJiYgIW93bmVyLnBsYWNlaG9sZGVyICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnaXRodWItUmVwb3NpdG9yeUhvbWUtb3duZXJVbndyaXRhYmxlXCI+XG4gICAgICAgICAgKGluc3VmZmljaWVudCBwZXJtaXNzaW9ucylcbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvRnJhZ21lbnQ+XG4gICk7XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zY2hlZHVsZVBhZ2VMb2FkKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5zY2hlZHVsZVBhZ2VMb2FkKCk7XG4gIH1cblxuICBnZXRPd25lcnMoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnVzZXIpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBpZDogJ2xvYWRpbmcnLFxuICAgICAgICBsb2dpbjogJ2xvYWRpbmcuLi4nLFxuICAgICAgICBhdmF0YXJVUkw6ICcnLFxuICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IHRydWUsXG4gICAgICB9XTtcbiAgICB9XG5cbiAgICBjb25zdCBvd25lcnMgPSBbe1xuICAgICAgaWQ6IHRoaXMucHJvcHMudXNlci5pZCxcbiAgICAgIGxvZ2luOiB0aGlzLnByb3BzLnVzZXIubG9naW4sXG4gICAgICBhdmF0YXJVUkw6IHRoaXMucHJvcHMudXNlci5hdmF0YXJVcmwsXG4gICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgfV07XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMucHJvcHMudXNlci5vcmdhbml6YXRpb25zLmVkZ2VzKSB7XG4gICAgICByZXR1cm4gb3duZXJzO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qge25vZGV9IG9mIHRoaXMucHJvcHMudXNlci5vcmdhbml6YXRpb25zLmVkZ2VzKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgb3duZXJzLnB1c2goe1xuICAgICAgICBpZDogbm9kZS5pZCxcbiAgICAgICAgbG9naW46IG5vZGUubG9naW4sXG4gICAgICAgIGF2YXRhclVSTDogbm9kZS5hdmF0YXJVcmwsXG4gICAgICAgIGRpc2FibGVkOiAhbm9kZS52aWV3ZXJDYW5DcmVhdGVSZXBvc2l0b3JpZXMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5yZWxheSAmJiB0aGlzLnByb3BzLnJlbGF5Lmhhc01vcmUoKSkge1xuICAgICAgb3duZXJzLnB1c2goe1xuICAgICAgICBpZDogJ2xvYWRpbmcnLFxuICAgICAgICBsb2dpbjogJ2xvYWRpbmcuLi4nLFxuICAgICAgICBhdmF0YXJVUkw6ICcnLFxuICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3duZXJzO1xuICB9XG5cbiAgZGlkQ2hhbmdlT3duZXIgPSBvd25lciA9PiB0aGlzLnByb3BzLmRpZENoYW5nZU93bmVySUQob3duZXIuaWQpO1xuXG4gIHNjaGVkdWxlUGFnZUxvYWQoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnJlbGF5Lmhhc01vcmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQodGhpcy5sb2FkTmV4dFBhZ2UsIFBBR0VfREVMQVkpO1xuICB9XG5cbiAgbG9hZE5leHRQYWdlID0gKCkgPT4ge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnByb3BzLnJlbGF5LmlzTG9hZGluZygpKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMubG9hZE5leHRQYWdlLCBQQUdFX0RFTEFZKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLnJlbGF5LmxvYWRNb3JlKFBBR0VfU0laRSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGFnaW5hdGlvbkNvbnRhaW5lcihCYXJlUmVwb3NpdG9yeUhvbWVTZWxlY3Rpb25WaWV3LCB7XG4gIHVzZXI6IGdyYXBocWxgXG4gICAgZnJhZ21lbnQgcmVwb3NpdG9yeUhvbWVTZWxlY3Rpb25WaWV3X3VzZXIgb24gVXNlclxuICAgIEBhcmd1bWVudERlZmluaXRpb25zKFxuICAgICAgb3JnYW5pemF0aW9uQ291bnQ6IHt0eXBlOiBcIkludCFcIn1cbiAgICAgIG9yZ2FuaXphdGlvbkN1cnNvcjoge3R5cGU6IFwiU3RyaW5nXCJ9XG4gICAgKSB7XG4gICAgICBpZFxuICAgICAgbG9naW5cbiAgICAgIGF2YXRhclVybChzaXplOiAyNClcbiAgICAgIG9yZ2FuaXphdGlvbnMoXG4gICAgICAgIGZpcnN0OiAkb3JnYW5pemF0aW9uQ291bnRcbiAgICAgICAgYWZ0ZXI6ICRvcmdhbml6YXRpb25DdXJzb3JcbiAgICAgICkgQGNvbm5lY3Rpb24oa2V5OiBcIlJlcG9zaXRvcnlIb21lU2VsZWN0aW9uVmlld19vcmdhbml6YXRpb25zXCIpIHtcbiAgICAgICAgcGFnZUluZm8ge1xuICAgICAgICAgIGhhc05leHRQYWdlXG4gICAgICAgICAgZW5kQ3Vyc29yXG4gICAgICAgIH1cblxuICAgICAgICBlZGdlcyB7XG4gICAgICAgICAgY3Vyc29yXG4gICAgICAgICAgbm9kZSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbG9naW5cbiAgICAgICAgICAgIGF2YXRhclVybChzaXplOiAyNClcbiAgICAgICAgICAgIHZpZXdlckNhbkNyZWF0ZVJlcG9zaXRvcmllc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgYCxcbn0sIHtcbiAgZGlyZWN0aW9uOiAnZm9yd2FyZCcsXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldENvbm5lY3Rpb25Gcm9tUHJvcHMocHJvcHMpIHtcbiAgICByZXR1cm4gcHJvcHMudXNlciAmJiBwcm9wcy51c2VyLm9yZ2FuaXphdGlvbnM7XG4gIH0sXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldEZyYWdtZW50VmFyaWFibGVzKHByZXZWYXJzLCB0b3RhbENvdW50KSB7XG4gICAgcmV0dXJuIHsuLi5wcmV2VmFycywgdG90YWxDb3VudH07XG4gIH0sXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldFZhcmlhYmxlcyhwcm9wcywge2NvdW50LCBjdXJzb3J9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBwcm9wcy51c2VyLmlkLFxuICAgICAgb3JnYW5pemF0aW9uQ291bnQ6IGNvdW50LFxuICAgICAgb3JnYW5pemF0aW9uQ3Vyc29yOiBjdXJzb3IsXG4gICAgfTtcbiAgfSxcbiAgcXVlcnk6IGdyYXBocWxgXG4gICAgcXVlcnkgcmVwb3NpdG9yeUhvbWVTZWxlY3Rpb25WaWV3UXVlcnkoXG4gICAgICAkaWQ6IElEIVxuICAgICAgJG9yZ2FuaXphdGlvbkNvdW50OiBJbnQhXG4gICAgICAkb3JnYW5pemF0aW9uQ3Vyc29yOiBTdHJpbmdcbiAgICApIHtcbiAgICAgIG5vZGUoaWQ6ICRpZCkge1xuICAgICAgICAuLi4gb24gVXNlciB7XG4gICAgICAgICAgLi4ucmVwb3NpdG9yeUhvbWVTZWxlY3Rpb25WaWV3X3VzZXIgQGFyZ3VtZW50cyhcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbkNvdW50OiAkb3JnYW5pemF0aW9uQ291bnRcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbkN1cnNvcjogJG9yZ2FuaXphdGlvbkN1cnNvclxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgYCxcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxTQUFBLEdBQUFKLE9BQUE7QUFBOEQsU0FBQUUsdUJBQUFHLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxTQUFBRyx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBVix3QkFBQVUsQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFILFVBQUEsU0FBQUcsQ0FBQSxlQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFdBQUFGLE9BQUEsRUFBQUUsQ0FBQSxRQUFBRyxDQUFBLEdBQUFKLHdCQUFBLENBQUFHLENBQUEsT0FBQUMsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLEdBQUEsQ0FBQUosQ0FBQSxVQUFBRyxDQUFBLENBQUFFLEdBQUEsQ0FBQUwsQ0FBQSxPQUFBTSxDQUFBLEtBQUFDLFNBQUEsVUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLGNBQUEsSUFBQUQsTUFBQSxDQUFBRSx3QkFBQSxXQUFBQyxDQUFBLElBQUFaLENBQUEsb0JBQUFZLENBQUEsSUFBQUgsTUFBQSxDQUFBSSxTQUFBLENBQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZixDQUFBLEVBQUFZLENBQUEsU0FBQUksQ0FBQSxHQUFBUixDQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVgsQ0FBQSxFQUFBWSxDQUFBLFVBQUFJLENBQUEsS0FBQUEsQ0FBQSxDQUFBWCxHQUFBLElBQUFXLENBQUEsQ0FBQUMsR0FBQSxJQUFBUixNQUFBLENBQUFDLGNBQUEsQ0FBQUosQ0FBQSxFQUFBTSxDQUFBLEVBQUFJLENBQUEsSUFBQVYsQ0FBQSxDQUFBTSxDQUFBLElBQUFaLENBQUEsQ0FBQVksQ0FBQSxZQUFBTixDQUFBLENBQUFSLE9BQUEsR0FBQUUsQ0FBQSxFQUFBRyxDQUFBLElBQUFBLENBQUEsQ0FBQWMsR0FBQSxDQUFBakIsQ0FBQSxFQUFBTSxDQUFBLEdBQUFBLENBQUE7QUFBQSxTQUFBWSxRQUFBbEIsQ0FBQSxFQUFBRSxDQUFBLFFBQUFDLENBQUEsR0FBQU0sTUFBQSxDQUFBVSxJQUFBLENBQUFuQixDQUFBLE9BQUFTLE1BQUEsQ0FBQVcscUJBQUEsUUFBQUMsQ0FBQSxHQUFBWixNQUFBLENBQUFXLHFCQUFBLENBQUFwQixDQUFBLEdBQUFFLENBQUEsS0FBQW1CLENBQUEsR0FBQUEsQ0FBQSxDQUFBQyxNQUFBLFdBQUFwQixDQUFBLFdBQUFPLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVgsQ0FBQSxFQUFBRSxDQUFBLEVBQUFxQixVQUFBLE9BQUFwQixDQUFBLENBQUFxQixJQUFBLENBQUFDLEtBQUEsQ0FBQXRCLENBQUEsRUFBQWtCLENBQUEsWUFBQWxCLENBQUE7QUFBQSxTQUFBdUIsY0FBQTFCLENBQUEsYUFBQUUsQ0FBQSxNQUFBQSxDQUFBLEdBQUF5QixTQUFBLENBQUFDLE1BQUEsRUFBQTFCLENBQUEsVUFBQUMsQ0FBQSxXQUFBd0IsU0FBQSxDQUFBekIsQ0FBQSxJQUFBeUIsU0FBQSxDQUFBekIsQ0FBQSxRQUFBQSxDQUFBLE9BQUFnQixPQUFBLENBQUFULE1BQUEsQ0FBQU4sQ0FBQSxPQUFBMEIsT0FBQSxXQUFBM0IsQ0FBQSxJQUFBNEIsZUFBQSxDQUFBOUIsQ0FBQSxFQUFBRSxDQUFBLEVBQUFDLENBQUEsQ0FBQUQsQ0FBQSxTQUFBTyxNQUFBLENBQUFzQix5QkFBQSxHQUFBdEIsTUFBQSxDQUFBdUIsZ0JBQUEsQ0FBQWhDLENBQUEsRUFBQVMsTUFBQSxDQUFBc0IseUJBQUEsQ0FBQTVCLENBQUEsS0FBQWUsT0FBQSxDQUFBVCxNQUFBLENBQUFOLENBQUEsR0FBQTBCLE9BQUEsV0FBQTNCLENBQUEsSUFBQU8sTUFBQSxDQUFBQyxjQUFBLENBQUFWLENBQUEsRUFBQUUsQ0FBQSxFQUFBTyxNQUFBLENBQUFFLHdCQUFBLENBQUFSLENBQUEsRUFBQUQsQ0FBQSxpQkFBQUYsQ0FBQTtBQUFBLFNBQUE4QixnQkFBQWxDLEdBQUEsRUFBQXFDLEdBQUEsRUFBQUMsS0FBQSxJQUFBRCxHQUFBLEdBQUFFLGNBQUEsQ0FBQUYsR0FBQSxPQUFBQSxHQUFBLElBQUFyQyxHQUFBLElBQUFhLE1BQUEsQ0FBQUMsY0FBQSxDQUFBZCxHQUFBLEVBQUFxQyxHQUFBLElBQUFDLEtBQUEsRUFBQUEsS0FBQSxFQUFBWCxVQUFBLFFBQUFhLFlBQUEsUUFBQUMsUUFBQSxvQkFBQXpDLEdBQUEsQ0FBQXFDLEdBQUEsSUFBQUMsS0FBQSxXQUFBdEMsR0FBQTtBQUFBLFNBQUF1QyxlQUFBRyxHQUFBLFFBQUFMLEdBQUEsR0FBQU0sWUFBQSxDQUFBRCxHQUFBLDJCQUFBTCxHQUFBLGdCQUFBQSxHQUFBLEdBQUFPLE1BQUEsQ0FBQVAsR0FBQTtBQUFBLFNBQUFNLGFBQUFFLEtBQUEsRUFBQUMsSUFBQSxlQUFBRCxLQUFBLGlCQUFBQSxLQUFBLGtCQUFBQSxLQUFBLE1BQUFFLElBQUEsR0FBQUYsS0FBQSxDQUFBRyxNQUFBLENBQUFDLFdBQUEsT0FBQUYsSUFBQSxLQUFBRyxTQUFBLFFBQUFDLEdBQUEsR0FBQUosSUFBQSxDQUFBNUIsSUFBQSxDQUFBMEIsS0FBQSxFQUFBQyxJQUFBLDJCQUFBSyxHQUFBLHNCQUFBQSxHQUFBLFlBQUFDLFNBQUEsNERBQUFOLElBQUEsZ0JBQUFGLE1BQUEsR0FBQVMsTUFBQSxFQUFBUixLQUFBO0FBRTlELE1BQU1TLFVBQVUsR0FBRyxHQUFHO0FBRWYsTUFBTUMsU0FBUyxHQUFHLEVBQUU7QUFBQ0MsT0FBQSxDQUFBRCxTQUFBLEdBQUFBLFNBQUE7QUFFckIsTUFBTUUsK0JBQStCLFNBQVNDLGNBQUssQ0FBQ0MsU0FBUyxDQUFDO0VBQUFDLFlBQUEsR0FBQUMsSUFBQTtJQUFBLFNBQUFBLElBQUE7SUFBQTNCLGVBQUEsc0JBMkVyRDRCLEtBQUssSUFDakJyRSxNQUFBLENBQUFTLE9BQUEsQ0FBQTZELGFBQUEsQ0FBQ3RFLE1BQUEsQ0FBQXVFLFFBQVEsUUFDUHZFLE1BQUEsQ0FBQVMsT0FBQSxDQUFBNkQsYUFBQTtNQUFLRSxTQUFTLEVBQUM7SUFBbUMsR0FDaER4RSxNQUFBLENBQUFTLE9BQUEsQ0FBQTZELGFBQUE7TUFBS0csR0FBRyxFQUFDLEVBQUU7TUFBQ0MsR0FBRyxFQUFFTCxLQUFLLENBQUNNLFNBQVU7TUFBQ0gsU0FBUyxFQUFDO0lBQW1DLENBQUUsQ0FBQyxFQUNsRnhFLE1BQUEsQ0FBQVMsT0FBQSxDQUFBNkQsYUFBQTtNQUFNRSxTQUFTLEVBQUM7SUFBaUMsR0FBRUgsS0FBSyxDQUFDTyxLQUFZLENBQ2xFLENBQUMsRUFDTFAsS0FBSyxDQUFDUSxRQUFRLElBQUksQ0FBQ1IsS0FBSyxDQUFDUyxXQUFXLElBQ25DOUUsTUFBQSxDQUFBUyxPQUFBLENBQUE2RCxhQUFBO01BQUtFLFNBQVMsRUFBQztJQUF1QywrQkFFakQsQ0FFQyxDQUNYO0lBQUEvQixlQUFBLHlCQTREZ0I0QixLQUFLLElBQUksSUFBSSxDQUFDVSxLQUFLLENBQUNDLGdCQUFnQixDQUFDWCxLQUFLLENBQUNZLEVBQUUsQ0FBQztJQUFBeEMsZUFBQSx1QkFVaEQsTUFBTTtNQUNuQjtNQUNBLElBQUksSUFBSSxDQUFDc0MsS0FBSyxDQUFDRyxLQUFLLENBQUNDLFNBQVMsQ0FBQyxDQUFDLEVBQUU7UUFDaENDLFVBQVUsQ0FBQyxJQUFJLENBQUNDLFlBQVksRUFBRXhCLFVBQVUsQ0FBQztRQUN6QztNQUNGO01BRUEsSUFBSSxDQUFDa0IsS0FBSyxDQUFDRyxLQUFLLENBQUNJLFFBQVEsQ0FBQ3hCLFNBQVMsQ0FBQztJQUN0QyxDQUFDO0VBQUE7RUF6SER5QixNQUFNQSxDQUFBLEVBQUc7SUFDUCxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUMvQixNQUFNQyxZQUFZLEdBQUdGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDM0QsQ0FBQyxJQUFJQSxDQUFDLENBQUNpRCxFQUFFLEtBQUssSUFBSSxDQUFDRixLQUFLLENBQUNhLGVBQWUsQ0FBQyxJQUFJSixNQUFNLENBQUMsQ0FBQyxDQUFDO0lBRXZGLE9BQ0V4RixNQUFBLENBQUFTLE9BQUEsQ0FBQTZELGFBQUE7TUFBS0UsU0FBUyxFQUFDO0lBQXVCLEdBQ3BDeEUsTUFBQSxDQUFBUyxPQUFBLENBQUE2RCxhQUFBLENBQUNoRSxTQUFBLENBQUF1RixjQUFjO01BQ2JDLFFBQVEsRUFBRSxJQUFJLENBQUNmLEtBQUssQ0FBQ2UsUUFBUztNQUM5QkMsUUFBUSxFQUFFLElBQUksQ0FBQ2hCLEtBQUssQ0FBQ2dCLFFBQVM7TUFDOUJDLFNBQVMsRUFBRSxJQUFJLENBQUNqQixLQUFLLENBQUNrQixjQUFlO01BQ3JDekIsU0FBUyxFQUFDLDZCQUE2QjtNQUN2QzBCLFNBQVMsRUFBRSxLQUFNO01BQ2pCckIsUUFBUSxFQUFFLElBQUksQ0FBQ0UsS0FBSyxDQUFDSSxTQUFVO01BQy9CZ0IsT0FBTyxFQUFFWCxNQUFPO01BQ2hCWSxjQUFjLEVBQUUsSUFBSSxDQUFDQyxXQUFZO01BQ2pDeEQsS0FBSyxFQUFFNkMsWUFBYTtNQUNwQlksYUFBYSxFQUFFLElBQUksQ0FBQ0QsV0FBWTtNQUNoQ0UsUUFBUSxFQUFFLElBQUksQ0FBQ0M7SUFBZSxDQUMvQixDQUFDLEVBQ0Z4RyxNQUFBLENBQUFTLE9BQUEsQ0FBQTZELGFBQUE7TUFBTUUsU0FBUyxFQUFDO0lBQWlDLE1BQVEsQ0FBQyxFQUMxRHhFLE1BQUEsQ0FBQVMsT0FBQSxDQUFBNkQsYUFBQSxDQUFDaEUsU0FBQSxDQUFBbUcsa0JBQWtCO01BQ2pCWCxRQUFRLEVBQUUsSUFBSSxDQUFDZixLQUFLLENBQUNlLFFBQVM7TUFDOUJDLFFBQVEsRUFBRSxJQUFJLENBQUNoQixLQUFLLENBQUNnQixRQUFTO01BQzlCQyxTQUFTLEVBQUUsSUFBSSxDQUFDakIsS0FBSyxDQUFDMkIsYUFBYztNQUNwQ0MsSUFBSSxFQUFFLElBQUs7TUFDWEMsTUFBTSxFQUFFLElBQUksQ0FBQzdCLEtBQUssQ0FBQzhCO0lBQVcsQ0FDL0IsQ0FDRSxDQUFDO0VBRVY7RUFnQkFDLGlCQUFpQkEsQ0FBQSxFQUFHO0lBQ2xCLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMsQ0FBQztFQUN6QjtFQUVBQyxrQkFBa0JBLENBQUEsRUFBRztJQUNuQixJQUFJLENBQUNELGdCQUFnQixDQUFDLENBQUM7RUFDekI7RUFFQXRCLFNBQVNBLENBQUEsRUFBRztJQUNWLElBQUksQ0FBQyxJQUFJLENBQUNWLEtBQUssQ0FBQ2tDLElBQUksRUFBRTtNQUNwQixPQUFPLENBQUM7UUFDTmhDLEVBQUUsRUFBRSxTQUFTO1FBQ2JMLEtBQUssRUFBRSxZQUFZO1FBQ25CRCxTQUFTLEVBQUUsRUFBRTtRQUNiRSxRQUFRLEVBQUUsSUFBSTtRQUNkQyxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7SUFDSjtJQUVBLE1BQU1VLE1BQU0sR0FBRyxDQUFDO01BQ2RQLEVBQUUsRUFBRSxJQUFJLENBQUNGLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ2hDLEVBQUU7TUFDdEJMLEtBQUssRUFBRSxJQUFJLENBQUNHLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ3JDLEtBQUs7TUFDNUJELFNBQVMsRUFBRSxJQUFJLENBQUNJLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ0MsU0FBUztNQUNwQ3JDLFFBQVEsRUFBRTtJQUNaLENBQUMsQ0FBQzs7SUFFRjtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNFLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ0UsYUFBYSxDQUFDQyxLQUFLLEVBQUU7TUFDeEMsT0FBTzVCLE1BQU07SUFDZjtJQUVBLEtBQUssTUFBTTtNQUFDNkI7SUFBSSxDQUFDLElBQUksSUFBSSxDQUFDdEMsS0FBSyxDQUFDa0MsSUFBSSxDQUFDRSxhQUFhLENBQUNDLEtBQUssRUFBRTtNQUN4RDtNQUNBLElBQUksQ0FBQ0MsSUFBSSxFQUFFO1FBQ1Q7TUFDRjtNQUVBN0IsTUFBTSxDQUFDckQsSUFBSSxDQUFDO1FBQ1Y4QyxFQUFFLEVBQUVvQyxJQUFJLENBQUNwQyxFQUFFO1FBQ1hMLEtBQUssRUFBRXlDLElBQUksQ0FBQ3pDLEtBQUs7UUFDakJELFNBQVMsRUFBRTBDLElBQUksQ0FBQ0gsU0FBUztRQUN6QnJDLFFBQVEsRUFBRSxDQUFDd0MsSUFBSSxDQUFDQztNQUNsQixDQUFDLENBQUM7SUFDSjtJQUVBLElBQUksSUFBSSxDQUFDdkMsS0FBSyxDQUFDRyxLQUFLLElBQUksSUFBSSxDQUFDSCxLQUFLLENBQUNHLEtBQUssQ0FBQ3FDLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDbEQvQixNQUFNLENBQUNyRCxJQUFJLENBQUM7UUFDVjhDLEVBQUUsRUFBRSxTQUFTO1FBQ2JMLEtBQUssRUFBRSxZQUFZO1FBQ25CRCxTQUFTLEVBQUUsRUFBRTtRQUNiRSxRQUFRLEVBQUUsSUFBSTtRQUNkQyxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7SUFDSjtJQUVBLE9BQU9VLE1BQU07RUFDZjtFQUlBdUIsZ0JBQWdCQSxDQUFBLEVBQUc7SUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQ2hDLEtBQUssQ0FBQ0csS0FBSyxDQUFDcUMsT0FBTyxDQUFDLENBQUMsRUFBRTtNQUMvQjtJQUNGO0lBRUFuQyxVQUFVLENBQUMsSUFBSSxDQUFDQyxZQUFZLEVBQUV4QixVQUFVLENBQUM7RUFDM0M7QUFXRjtBQUFDRSxPQUFBLENBQUFDLCtCQUFBLEdBQUFBLCtCQUFBO0FBQUF2QixlQUFBLENBdEtZdUIsK0JBQStCLGVBQ3ZCO0VBQ2pCO0VBQ0FrQixLQUFLLEVBQUVzQyxrQkFBUyxDQUFDQyxLQUFLLENBQUM7SUFDckJGLE9BQU8sRUFBRUMsa0JBQVMsQ0FBQ0UsSUFBSSxDQUFDQyxVQUFVO0lBQ2xDeEMsU0FBUyxFQUFFcUMsa0JBQVMsQ0FBQ0UsSUFBSSxDQUFDQyxVQUFVO0lBQ3BDckMsUUFBUSxFQUFFa0Msa0JBQVMsQ0FBQ0UsSUFBSSxDQUFDQztFQUMzQixDQUFDLENBQUMsQ0FBQ0EsVUFBVTtFQUNiVixJQUFJLEVBQUVPLGtCQUFTLENBQUNDLEtBQUssQ0FBQztJQUNwQnhDLEVBQUUsRUFBRXVDLGtCQUFTLENBQUNJLE1BQU0sQ0FBQ0QsVUFBVTtJQUMvQi9DLEtBQUssRUFBRTRDLGtCQUFTLENBQUNJLE1BQU0sQ0FBQ0QsVUFBVTtJQUNsQ1QsU0FBUyxFQUFFTSxrQkFBUyxDQUFDSSxNQUFNLENBQUNELFVBQVU7SUFDdENSLGFBQWEsRUFBRUssa0JBQVMsQ0FBQ0MsS0FBSyxDQUFDO01BQzdCTCxLQUFLLEVBQUVJLGtCQUFTLENBQUNLLE9BQU8sQ0FBQ0wsa0JBQVMsQ0FBQ0MsS0FBSyxDQUFDO1FBQ3ZDSixJQUFJLEVBQUVHLGtCQUFTLENBQUNDLEtBQUssQ0FBQztVQUNwQnhDLEVBQUUsRUFBRXVDLGtCQUFTLENBQUNJLE1BQU0sQ0FBQ0QsVUFBVTtVQUMvQi9DLEtBQUssRUFBRTRDLGtCQUFTLENBQUNJLE1BQU0sQ0FBQ0QsVUFBVTtVQUNsQ1QsU0FBUyxFQUFFTSxrQkFBUyxDQUFDSSxNQUFNLENBQUNELFVBQVU7VUFDdENMLDJCQUEyQixFQUFFRSxrQkFBUyxDQUFDTSxJQUFJLENBQUNIO1FBQzlDLENBQUM7TUFDSCxDQUFDLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQ0E7RUFDTCxDQUFDLENBQUM7RUFFRjtFQUNBZCxVQUFVLEVBQUVXLGtCQUFTLENBQUNPLE1BQU0sQ0FBQ0osVUFBVTtFQUN2Q3hDLFNBQVMsRUFBRXFDLGtCQUFTLENBQUNNLElBQUksQ0FBQ0gsVUFBVTtFQUNwQy9CLGVBQWUsRUFBRTRCLGtCQUFTLENBQUNJLE1BQU0sQ0FBQ0QsVUFBVTtFQUM1QzdCLFFBQVEsRUFBRTBCLGtCQUFTLENBQUNPLE1BQU0sQ0FBQ0osVUFBVTtFQUNyQzFCLGNBQWMsRUFBRXVCLGtCQUFTLENBQUNNLElBQUk7RUFDOUJwQixhQUFhLEVBQUVjLGtCQUFTLENBQUNNLElBQUk7RUFFN0I7RUFDQTlDLGdCQUFnQixFQUFFd0Msa0JBQVMsQ0FBQ0UsSUFBSSxDQUFDQyxVQUFVO0VBRTNDO0VBQ0E1QixRQUFRLEVBQUV5QixrQkFBUyxDQUFDTyxNQUFNLENBQUNKO0FBQzdCLENBQUM7QUFBQWxGLGVBQUEsQ0FyQ1V1QiwrQkFBK0Isa0JBdUNwQjtFQUNwQmlDLGNBQWMsRUFBRSxLQUFLO0VBQ3JCUyxhQUFhLEVBQUU7QUFDakIsQ0FBQztBQUFBLElBQUFzQixRQUFBLEdBOEhZLElBQUFDLHFDQUF5QixFQUFDakUsK0JBQStCLEVBQUU7RUFDeEVpRCxJQUFJLFdBQUFBLENBQUE7SUFBQSxNQUFBSSxJQUFBLEdBQUFuSCxPQUFBO0lBQUEsSUFBQW1ILElBQUEsQ0FBQWEsSUFBQSxJQUFBYixJQUFBLENBQUFhLElBQUE7TUFBQUMsT0FBQSxDQUFBQyxLQUFBO0lBQUE7SUFBQSxPQUFBbEksT0FBQTtFQUFBO0FBOEJOLENBQUMsRUFBRTtFQUNEbUksU0FBUyxFQUFFLFNBQVM7RUFDcEI7RUFDQUMsc0JBQXNCQSxDQUFDdkQsS0FBSyxFQUFFO0lBQzVCLE9BQU9BLEtBQUssQ0FBQ2tDLElBQUksSUFBSWxDLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ0UsYUFBYTtFQUMvQyxDQUFDO0VBQ0Q7RUFDQW9CLG9CQUFvQkEsQ0FBQ0MsUUFBUSxFQUFFQyxVQUFVLEVBQUU7SUFDekMsT0FBQXBHLGFBQUEsS0FBV21HLFFBQVE7TUFBRUM7SUFBVTtFQUNqQyxDQUFDO0VBQ0Q7RUFDQUMsWUFBWUEsQ0FBQzNELEtBQUssRUFBRTtJQUFDNEQsS0FBSztJQUFFQztFQUFNLENBQUMsRUFBRTtJQUNuQyxPQUFPO01BQ0wzRCxFQUFFLEVBQUVGLEtBQUssQ0FBQ2tDLElBQUksQ0FBQ2hDLEVBQUU7TUFDakI0RCxpQkFBaUIsRUFBRUYsS0FBSztNQUN4Qkcsa0JBQWtCLEVBQUVGO0lBQ3RCLENBQUM7RUFDSCxDQUFDO0VBQ0RHLEtBQUssV0FBQUEsQ0FBQTtJQUFBLE1BQUExQixJQUFBLEdBQUFuSCxPQUFBO0lBQUEsSUFBQW1ILElBQUEsQ0FBQWEsSUFBQSxJQUFBYixJQUFBLENBQUFhLElBQUE7TUFBQUMsT0FBQSxDQUFBQyxLQUFBO0lBQUE7SUFBQSxPQUFBbEksT0FBQTtFQUFBO0FBZ0JQLENBQUMsQ0FBQztBQUFBNkQsT0FBQSxDQUFBdEQsT0FBQSxHQUFBdUgsUUFBQSJ9