"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _moment = _interopRequireDefault(require("moment"));
var _classnames = _interopRequireDefault(require("classnames"));
var _nodeEmoji = require("node-emoji");
var _commands = _interopRequireWildcard(require("../atom/commands"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
var _commitView = _interopRequireDefault(require("./commit-view"));
var _timeago = _interopRequireDefault(require("./timeago"));
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
class RecentCommitView extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "copyCommitSha", event => {
      event.stopPropagation();
      const {
        commit,
        clipboard
      } = this.props;
      clipboard.write(commit.sha);
    });
    _defineProperty(this, "copyCommitSubject", event => {
      event.stopPropagation();
      const {
        commit,
        clipboard
      } = this.props;
      clipboard.write(commit.messageSubject);
    });
    _defineProperty(this, "undoLastCommit", event => {
      event.stopPropagation();
      this.props.undoLastCommit();
    });
    this.refRoot = new _refHolder.default();
  }
  componentDidMount() {
    if (this.props.isSelected) {
      this.refRoot.map(root => root.scrollIntoViewIfNeeded(false));
    }
  }
  componentDidUpdate(prevProps) {
    if (this.props.isSelected && !prevProps.isSelected) {
      this.refRoot.map(root => root.scrollIntoViewIfNeeded(false));
    }
  }
  render() {
    const authorMoment = (0, _moment.default)(this.props.commit.getAuthorDate() * 1000);
    const fullMessage = this.props.commit.getFullMessage();
    return _react.default.createElement("li", {
      ref: this.refRoot.setter,
      className: (0, _classnames.default)('github-RecentCommit', {
        'most-recent': this.props.isMostRecent,
        'is-selected': this.props.isSelected
      }),
      onClick: this.props.openCommit
    }, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: this.refRoot
    }, _react.default.createElement(_commands.Command, {
      command: "github:copy-commit-sha",
      callback: this.copyCommitSha
    }), _react.default.createElement(_commands.Command, {
      command: "github:copy-commit-subject",
      callback: this.copyCommitSubject
    })), this.renderAuthors(), _react.default.createElement("span", {
      className: "github-RecentCommit-message",
      title: (0, _nodeEmoji.emojify)(fullMessage)
    }, (0, _nodeEmoji.emojify)(this.props.commit.getMessageSubject())), this.props.isMostRecent && _react.default.createElement("button", {
      className: "btn github-RecentCommit-undoButton",
      onClick: this.undoLastCommit
    }, "Undo"), _react.default.createElement(_timeago.default, {
      className: "github-RecentCommit-time",
      type: "time",
      displayStyle: "short",
      time: authorMoment,
      title: authorMoment.format('MMM Do, YYYY')
    }));
  }
  renderAuthor(author) {
    const email = author.getEmail();
    const avatarUrl = author.getAvatarUrl();
    return _react.default.createElement("img", {
      className: "github-RecentCommit-avatar",
      key: email,
      src: avatarUrl,
      title: email,
      alt: `${email}'s avatar'`
    });
  }
  renderAuthors() {
    const coAuthors = this.props.commit.getCoAuthors();
    const authors = [this.props.commit.getAuthor(), ...coAuthors];
    return _react.default.createElement("span", {
      className: "github-RecentCommit-authors"
    }, authors.map(this.renderAuthor));
  }
}
_defineProperty(RecentCommitView, "propTypes", {
  commands: _propTypes.default.object.isRequired,
  clipboard: _propTypes.default.object.isRequired,
  commit: _propTypes.default.object.isRequired,
  undoLastCommit: _propTypes.default.func.isRequired,
  isMostRecent: _propTypes.default.bool.isRequired,
  openCommit: _propTypes.default.func.isRequired,
  isSelected: _propTypes.default.bool.isRequired
});
class RecentCommitsView extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "openSelectedCommit", () => this.props.openCommit({
      sha: this.props.selectedCommitSha,
      preserveFocus: false
    }));
    this.refRoot = new _refHolder.default();
  }
  setFocus(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return this.refRoot.map(element => {
        element.focus();
        return true;
      }).getOr(false);
    }
    return false;
  }
  getFocus(element) {
    return this.refRoot.map(e => e.contains(element)).getOr(false) ? this.constructor.focus.RECENT_COMMIT : null;
  }
  render() {
    return _react.default.createElement("div", {
      className: "github-RecentCommits",
      tabIndex: "-1",
      ref: this.refRoot.setter
    }, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: this.refRoot
    }, _react.default.createElement(_commands.Command, {
      command: "core:move-down",
      callback: this.props.selectNextCommit
    }), _react.default.createElement(_commands.Command, {
      command: "core:move-up",
      callback: this.props.selectPreviousCommit
    }), _react.default.createElement(_commands.Command, {
      command: "github:dive",
      callback: this.openSelectedCommit
    })), this.renderCommits());
  }
  renderCommits() {
    if (this.props.commits.length === 0) {
      if (this.props.isLoading) {
        return _react.default.createElement("div", {
          className: "github-RecentCommits-message"
        }, "Recent commits");
      } else {
        return _react.default.createElement("div", {
          className: "github-RecentCommits-message"
        }, "Make your first commit");
      }
    } else {
      return _react.default.createElement("ul", {
        className: "github-RecentCommits-list"
      }, this.props.commits.map((commit, i) => {
        return _react.default.createElement(RecentCommitView, {
          key: commit.getSha(),
          commands: this.props.commands,
          clipboard: this.props.clipboard,
          isMostRecent: i === 0,
          commit: commit,
          undoLastCommit: this.props.undoLastCommit,
          openCommit: () => this.props.openCommit({
            sha: commit.getSha(),
            preserveFocus: true
          }),
          isSelected: this.props.selectedCommitSha === commit.getSha()
        });
      }));
    }
  }
  advanceFocusFrom(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return Promise.resolve(this.constructor.focus.RECENT_COMMIT);
    }
    return Promise.resolve(null);
  }
  retreatFocusFrom(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return Promise.resolve(_commitView.default.lastFocus);
    }
    return Promise.resolve(null);
  }
}
exports.default = RecentCommitsView;
_defineProperty(RecentCommitsView, "propTypes", {
  // Model state
  commits: _propTypes.default.arrayOf(_propTypes.default.object).isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  selectedCommitSha: _propTypes.default.string.isRequired,
  // Atom environment
  clipboard: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  // Action methods
  undoLastCommit: _propTypes.default.func.isRequired,
  openCommit: _propTypes.default.func.isRequired,
  selectNextCommit: _propTypes.default.func.isRequired,
  selectPreviousCommit: _propTypes.default.func.isRequired
});
_defineProperty(RecentCommitsView, "focus", {
  RECENT_COMMIT: Symbol('recent_commit')
});
_defineProperty(RecentCommitsView, "firstFocus", RecentCommitsView.focus.RECENT_COMMIT);
_defineProperty(RecentCommitsView, "lastFocus", RecentCommitsView.focus.RECENT_COMMIT);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfbW9tZW50IiwiX2NsYXNzbmFtZXMiLCJfbm9kZUVtb2ppIiwiX2NvbW1hbmRzIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfcmVmSG9sZGVyIiwiX2NvbW1pdFZpZXciLCJfdGltZWFnbyIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm9iaiIsIl9kZWZpbmVQcm9wZXJ0eSIsImtleSIsInZhbHVlIiwiX3RvUHJvcGVydHlLZXkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsIlR5cGVFcnJvciIsIk51bWJlciIsIlJlY2VudENvbW1pdFZpZXciLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNvbW1pdCIsImNsaXBib2FyZCIsIndyaXRlIiwic2hhIiwibWVzc2FnZVN1YmplY3QiLCJ1bmRvTGFzdENvbW1pdCIsInJlZlJvb3QiLCJSZWZIb2xkZXIiLCJjb21wb25lbnREaWRNb3VudCIsImlzU2VsZWN0ZWQiLCJtYXAiLCJyb290Iiwic2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZQcm9wcyIsInJlbmRlciIsImF1dGhvck1vbWVudCIsIm1vbWVudCIsImdldEF1dGhvckRhdGUiLCJmdWxsTWVzc2FnZSIsImdldEZ1bGxNZXNzYWdlIiwiY3JlYXRlRWxlbWVudCIsInJlZiIsInNldHRlciIsImNsYXNzTmFtZSIsImN4IiwiaXNNb3N0UmVjZW50Iiwib25DbGljayIsIm9wZW5Db21taXQiLCJyZWdpc3RyeSIsImNvbW1hbmRzIiwidGFyZ2V0IiwiQ29tbWFuZCIsImNvbW1hbmQiLCJjYWxsYmFjayIsImNvcHlDb21taXRTaGEiLCJjb3B5Q29tbWl0U3ViamVjdCIsInJlbmRlckF1dGhvcnMiLCJ0aXRsZSIsImVtb2ppZnkiLCJnZXRNZXNzYWdlU3ViamVjdCIsInR5cGUiLCJkaXNwbGF5U3R5bGUiLCJ0aW1lIiwiZm9ybWF0IiwicmVuZGVyQXV0aG9yIiwiYXV0aG9yIiwiZW1haWwiLCJnZXRFbWFpbCIsImF2YXRhclVybCIsImdldEF2YXRhclVybCIsInNyYyIsImFsdCIsImNvQXV0aG9ycyIsImdldENvQXV0aG9ycyIsImF1dGhvcnMiLCJnZXRBdXRob3IiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiZnVuYyIsImJvb2wiLCJSZWNlbnRDb21taXRzVmlldyIsInNlbGVjdGVkQ29tbWl0U2hhIiwicHJlc2VydmVGb2N1cyIsInNldEZvY3VzIiwiZm9jdXMiLCJSRUNFTlRfQ09NTUlUIiwiZWxlbWVudCIsImdldE9yIiwiZ2V0Rm9jdXMiLCJjb250YWlucyIsInRhYkluZGV4Iiwic2VsZWN0TmV4dENvbW1pdCIsInNlbGVjdFByZXZpb3VzQ29tbWl0Iiwib3BlblNlbGVjdGVkQ29tbWl0IiwicmVuZGVyQ29tbWl0cyIsImNvbW1pdHMiLCJsZW5ndGgiLCJpc0xvYWRpbmciLCJnZXRTaGEiLCJhZHZhbmNlRm9jdXNGcm9tIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXRyZWF0Rm9jdXNGcm9tIiwiQ29tbWl0VmlldyIsImxhc3RGb2N1cyIsImV4cG9ydHMiLCJhcnJheU9mIiwic3RyaW5nIl0sInNvdXJjZXMiOlsicmVjZW50LWNvbW1pdHMtdmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7ZW1vamlmeX0gZnJvbSAnbm9kZS1lbW9qaSc7XG5cbmltcG9ydCBDb21tYW5kcywge0NvbW1hbmR9IGZyb20gJy4uL2F0b20vY29tbWFuZHMnO1xuaW1wb3J0IFJlZkhvbGRlciBmcm9tICcuLi9tb2RlbHMvcmVmLWhvbGRlcic7XG5cbmltcG9ydCBDb21taXRWaWV3IGZyb20gJy4vY29tbWl0LXZpZXcnO1xuaW1wb3J0IFRpbWVhZ28gZnJvbSAnLi90aW1lYWdvJztcblxuY2xhc3MgUmVjZW50Q29tbWl0VmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgY29tbWFuZHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjbGlwYm9hcmQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb21taXQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICB1bmRvTGFzdENvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBpc01vc3RSZWNlbnQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgb3BlbkNvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBpc1NlbGVjdGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5yZWZSb290ID0gbmV3IFJlZkhvbGRlcigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5yZWZSb290Lm1hcChyb290ID0+IHJvb3Quc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZChmYWxzZSkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5pc1NlbGVjdGVkICYmICFwcmV2UHJvcHMuaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5yZWZSb290Lm1hcChyb290ID0+IHJvb3Quc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZChmYWxzZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBhdXRob3JNb21lbnQgPSBtb21lbnQodGhpcy5wcm9wcy5jb21taXQuZ2V0QXV0aG9yRGF0ZSgpICogMTAwMCk7XG4gICAgY29uc3QgZnVsbE1lc3NhZ2UgPSB0aGlzLnByb3BzLmNvbW1pdC5nZXRGdWxsTWVzc2FnZSgpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxsaVxuICAgICAgICByZWY9e3RoaXMucmVmUm9vdC5zZXR0ZXJ9XG4gICAgICAgIGNsYXNzTmFtZT17Y3goJ2dpdGh1Yi1SZWNlbnRDb21taXQnLCB7XG4gICAgICAgICAgJ21vc3QtcmVjZW50JzogdGhpcy5wcm9wcy5pc01vc3RSZWNlbnQsXG4gICAgICAgICAgJ2lzLXNlbGVjdGVkJzogdGhpcy5wcm9wcy5pc1NlbGVjdGVkLFxuICAgICAgICB9KX1cbiAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vcGVuQ29tbWl0fT5cbiAgICAgICAgPENvbW1hbmRzIHJlZ2lzdHJ5PXt0aGlzLnByb3BzLmNvbW1hbmRzfSB0YXJnZXQ9e3RoaXMucmVmUm9vdH0+XG4gICAgICAgICAgPENvbW1hbmQgY29tbWFuZD1cImdpdGh1Yjpjb3B5LWNvbW1pdC1zaGFcIiBjYWxsYmFjaz17dGhpcy5jb3B5Q29tbWl0U2hhfSAvPlxuICAgICAgICAgIDxDb21tYW5kIGNvbW1hbmQ9XCJnaXRodWI6Y29weS1jb21taXQtc3ViamVjdFwiIGNhbGxiYWNrPXt0aGlzLmNvcHlDb21taXRTdWJqZWN0fSAvPlxuICAgICAgICA8L0NvbW1hbmRzPlxuICAgICAgICB7dGhpcy5yZW5kZXJBdXRob3JzKCl9XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdC1tZXNzYWdlXCJcbiAgICAgICAgICB0aXRsZT17ZW1vamlmeShmdWxsTWVzc2FnZSl9PlxuICAgICAgICAgIHtlbW9qaWZ5KHRoaXMucHJvcHMuY29tbWl0LmdldE1lc3NhZ2VTdWJqZWN0KCkpfVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIHt0aGlzLnByb3BzLmlzTW9zdFJlY2VudCAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGdpdGh1Yi1SZWNlbnRDb21taXQtdW5kb0J1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnVuZG9MYXN0Q29tbWl0fT5cbiAgICAgICAgICAgIFVuZG9cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPFRpbWVhZ29cbiAgICAgICAgICBjbGFzc05hbWU9XCJnaXRodWItUmVjZW50Q29tbWl0LXRpbWVcIlxuICAgICAgICAgIHR5cGU9XCJ0aW1lXCJcbiAgICAgICAgICBkaXNwbGF5U3R5bGU9XCJzaG9ydFwiXG4gICAgICAgICAgdGltZT17YXV0aG9yTW9tZW50fVxuICAgICAgICAgIHRpdGxlPXthdXRob3JNb21lbnQuZm9ybWF0KCdNTU0gRG8sIFlZWVknKX1cbiAgICAgICAgLz5cbiAgICAgIDwvbGk+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckF1dGhvcihhdXRob3IpIHtcbiAgICBjb25zdCBlbWFpbCA9IGF1dGhvci5nZXRFbWFpbCgpO1xuICAgIGNvbnN0IGF2YXRhclVybCA9IGF1dGhvci5nZXRBdmF0YXJVcmwoKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8aW1nIGNsYXNzTmFtZT1cImdpdGh1Yi1SZWNlbnRDb21taXQtYXZhdGFyXCJcbiAgICAgICAga2V5PXtlbWFpbH1cbiAgICAgICAgc3JjPXthdmF0YXJVcmx9XG4gICAgICAgIHRpdGxlPXtlbWFpbH1cbiAgICAgICAgYWx0PXtgJHtlbWFpbH0ncyBhdmF0YXInYH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckF1dGhvcnMoKSB7XG4gICAgY29uc3QgY29BdXRob3JzID0gdGhpcy5wcm9wcy5jb21taXQuZ2V0Q29BdXRob3JzKCk7XG4gICAgY29uc3QgYXV0aG9ycyA9IFt0aGlzLnByb3BzLmNvbW1pdC5nZXRBdXRob3IoKSwgLi4uY29BdXRob3JzXTtcblxuICAgIHJldHVybiAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJnaXRodWItUmVjZW50Q29tbWl0LWF1dGhvcnNcIj5cbiAgICAgICAge2F1dGhvcnMubWFwKHRoaXMucmVuZGVyQXV0aG9yKX1cbiAgICAgIDwvc3Bhbj5cbiAgICApO1xuICB9XG5cbiAgY29weUNvbW1pdFNoYSA9IGV2ZW50ID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCB7Y29tbWl0LCBjbGlwYm9hcmR9ID0gdGhpcy5wcm9wcztcbiAgICBjbGlwYm9hcmQud3JpdGUoY29tbWl0LnNoYSk7XG4gIH1cblxuICBjb3B5Q29tbWl0U3ViamVjdCA9IGV2ZW50ID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCB7Y29tbWl0LCBjbGlwYm9hcmR9ID0gdGhpcy5wcm9wcztcbiAgICBjbGlwYm9hcmQud3JpdGUoY29tbWl0Lm1lc3NhZ2VTdWJqZWN0KTtcbiAgfVxuXG4gIHVuZG9MYXN0Q29tbWl0ID0gZXZlbnQgPT4ge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMucHJvcHMudW5kb0xhc3RDb21taXQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNlbnRDb21taXRzVmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLy8gTW9kZWwgc3RhdGVcbiAgICBjb21taXRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KS5pc1JlcXVpcmVkLFxuICAgIGlzTG9hZGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBzZWxlY3RlZENvbW1pdFNoYTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgLy8gQXRvbSBlbnZpcm9ubWVudFxuICAgIGNsaXBib2FyZDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbW1hbmRzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG5cbiAgICAvLyBBY3Rpb24gbWV0aG9kc1xuICAgIHVuZG9MYXN0Q29tbWl0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9wZW5Db21taXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc2VsZWN0TmV4dENvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBzZWxlY3RQcmV2aW91c0NvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgfTtcblxuICBzdGF0aWMgZm9jdXMgPSB7XG4gICAgUkVDRU5UX0NPTU1JVDogU3ltYm9sKCdyZWNlbnRfY29tbWl0JyksXG4gIH07XG5cbiAgc3RhdGljIGZpcnN0Rm9jdXMgPSBSZWNlbnRDb21taXRzVmlldy5mb2N1cy5SRUNFTlRfQ09NTUlUO1xuXG4gIHN0YXRpYyBsYXN0Rm9jdXMgPSBSZWNlbnRDb21taXRzVmlldy5mb2N1cy5SRUNFTlRfQ09NTUlUO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMucmVmUm9vdCA9IG5ldyBSZWZIb2xkZXIoKTtcbiAgfVxuXG4gIHNldEZvY3VzKGZvY3VzKSB7XG4gICAgaWYgKGZvY3VzID09PSB0aGlzLmNvbnN0cnVjdG9yLmZvY3VzLlJFQ0VOVF9DT01NSVQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZlJvb3QubWFwKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSkuZ2V0T3IoZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldEZvY3VzKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZSb290Lm1hcChlID0+IGUuY29udGFpbnMoZWxlbWVudCkpLmdldE9yKGZhbHNlKVxuICAgICAgPyB0aGlzLmNvbnN0cnVjdG9yLmZvY3VzLlJFQ0VOVF9DT01NSVRcbiAgICAgIDogbnVsbDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnaXRodWItUmVjZW50Q29tbWl0c1wiIHRhYkluZGV4PVwiLTFcIiByZWY9e3RoaXMucmVmUm9vdC5zZXR0ZXJ9PlxuICAgICAgICA8Q29tbWFuZHMgcmVnaXN0cnk9e3RoaXMucHJvcHMuY29tbWFuZHN9IHRhcmdldD17dGhpcy5yZWZSb290fT5cbiAgICAgICAgICA8Q29tbWFuZCBjb21tYW5kPVwiY29yZTptb3ZlLWRvd25cIiBjYWxsYmFjaz17dGhpcy5wcm9wcy5zZWxlY3ROZXh0Q29tbWl0fSAvPlxuICAgICAgICAgIDxDb21tYW5kIGNvbW1hbmQ9XCJjb3JlOm1vdmUtdXBcIiBjYWxsYmFjaz17dGhpcy5wcm9wcy5zZWxlY3RQcmV2aW91c0NvbW1pdH0gLz5cbiAgICAgICAgICA8Q29tbWFuZCBjb21tYW5kPVwiZ2l0aHViOmRpdmVcIiBjYWxsYmFjaz17dGhpcy5vcGVuU2VsZWN0ZWRDb21taXR9IC8+XG4gICAgICAgIDwvQ29tbWFuZHM+XG4gICAgICAgIHt0aGlzLnJlbmRlckNvbW1pdHMoKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJDb21taXRzKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmNvbW1pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc0xvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdpdGh1Yi1SZWNlbnRDb21taXRzLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgIFJlY2VudCBjb21taXRzXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdHMtbWVzc2FnZVwiPlxuICAgICAgICAgICAgTWFrZSB5b3VyIGZpcnN0IGNvbW1pdFxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8dWwgY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdHMtbGlzdFwiPlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNvbW1pdHMubWFwKChjb21taXQsIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxSZWNlbnRDb21taXRWaWV3XG4gICAgICAgICAgICAgICAga2V5PXtjb21taXQuZ2V0U2hhKCl9XG4gICAgICAgICAgICAgICAgY29tbWFuZHM9e3RoaXMucHJvcHMuY29tbWFuZHN9XG4gICAgICAgICAgICAgICAgY2xpcGJvYXJkPXt0aGlzLnByb3BzLmNsaXBib2FyZH1cbiAgICAgICAgICAgICAgICBpc01vc3RSZWNlbnQ9e2kgPT09IDB9XG4gICAgICAgICAgICAgICAgY29tbWl0PXtjb21taXR9XG4gICAgICAgICAgICAgICAgdW5kb0xhc3RDb21taXQ9e3RoaXMucHJvcHMudW5kb0xhc3RDb21taXR9XG4gICAgICAgICAgICAgICAgb3BlbkNvbW1pdD17KCkgPT4gdGhpcy5wcm9wcy5vcGVuQ29tbWl0KHtzaGE6IGNvbW1pdC5nZXRTaGEoKSwgcHJlc2VydmVGb2N1czogdHJ1ZX0pfVxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e3RoaXMucHJvcHMuc2VsZWN0ZWRDb21taXRTaGEgPT09IGNvbW1pdC5nZXRTaGEoKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvdWw+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5TZWxlY3RlZENvbW1pdCA9ICgpID0+IHRoaXMucHJvcHMub3BlbkNvbW1pdCh7c2hhOiB0aGlzLnByb3BzLnNlbGVjdGVkQ29tbWl0U2hhLCBwcmVzZXJ2ZUZvY3VzOiBmYWxzZX0pXG5cbiAgYWR2YW5jZUZvY3VzRnJvbShmb2N1cykge1xuICAgIGlmIChmb2N1cyA9PT0gdGhpcy5jb25zdHJ1Y3Rvci5mb2N1cy5SRUNFTlRfQ09NTUlUKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29uc3RydWN0b3IuZm9jdXMuUkVDRU5UX0NPTU1JVCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgfVxuXG4gIHJldHJlYXRGb2N1c0Zyb20oZm9jdXMpIHtcbiAgICBpZiAoZm9jdXMgPT09IHRoaXMuY29uc3RydWN0b3IuZm9jdXMuUkVDRU5UX0NPTU1JVCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShDb21taXRWaWV3Lmxhc3RGb2N1cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFD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