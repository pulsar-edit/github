"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _moment = _interopRequireDefault(require("moment"));
var _classnames = _interopRequireDefault(require("classnames"));
var _nodeEmoji = require("node-emoji");
var _commands = _interopRequireWildcard(require("../atom/commands"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
var _commitView = _interopRequireDefault(require("./commit-view"));
var _timeago = _interopRequireDefault(require("./timeago"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class RecentCommitView extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "copyCommitSha", event => {
      event.stopPropagation();
      const {
        commit,
        clipboard
      } = this.props;
      clipboard.write(commit.sha);
    });
    _defineProperty(this, "copyCommitSubject", event => {
      event.stopPropagation();
      const {
        commit,
        clipboard
      } = this.props;
      clipboard.write(commit.messageSubject);
    });
    _defineProperty(this, "undoLastCommit", event => {
      event.stopPropagation();
      this.props.undoLastCommit();
    });
    this.refRoot = new _refHolder.default();
  }
  componentDidMount() {
    if (this.props.isSelected) {
      this.refRoot.map(root => root.scrollIntoViewIfNeeded(false));
    }
  }
  componentDidUpdate(prevProps) {
    if (this.props.isSelected && !prevProps.isSelected) {
      this.refRoot.map(root => root.scrollIntoViewIfNeeded(false));
    }
  }
  render() {
    const authorMoment = (0, _moment.default)(this.props.commit.getAuthorDate() * 1000);
    const fullMessage = this.props.commit.getFullMessage();
    return _react.default.createElement("li", {
      ref: this.refRoot.setter,
      className: (0, _classnames.default)('github-RecentCommit', {
        'most-recent': this.props.isMostRecent,
        'is-selected': this.props.isSelected
      }),
      onClick: this.props.openCommit
    }, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: this.refRoot
    }, _react.default.createElement(_commands.Command, {
      command: "github:copy-commit-sha",
      callback: this.copyCommitSha
    }), _react.default.createElement(_commands.Command, {
      command: "github:copy-commit-subject",
      callback: this.copyCommitSubject
    })), this.renderAuthors(), _react.default.createElement("span", {
      className: "github-RecentCommit-message",
      title: (0, _nodeEmoji.emojify)(fullMessage)
    }, (0, _nodeEmoji.emojify)(this.props.commit.getMessageSubject())), this.props.isMostRecent && _react.default.createElement("button", {
      className: "btn github-RecentCommit-undoButton",
      onClick: this.undoLastCommit
    }, "Undo"), _react.default.createElement(_timeago.default, {
      className: "github-RecentCommit-time",
      type: "time",
      displayStyle: "short",
      time: authorMoment,
      title: authorMoment.format('MMM Do, YYYY')
    }));
  }
  renderAuthor(author) {
    const email = author.getEmail();
    const avatarUrl = author.getAvatarUrl();
    return _react.default.createElement("img", {
      className: "github-RecentCommit-avatar",
      key: email,
      src: avatarUrl,
      title: email,
      alt: `${email}'s avatar'`
    });
  }
  renderAuthors() {
    const coAuthors = this.props.commit.getCoAuthors();
    const authors = [this.props.commit.getAuthor(), ...coAuthors];
    return _react.default.createElement("span", {
      className: "github-RecentCommit-authors"
    }, authors.map(this.renderAuthor));
  }
}
_defineProperty(RecentCommitView, "propTypes", {
  commands: _propTypes.default.object.isRequired,
  clipboard: _propTypes.default.object.isRequired,
  commit: _propTypes.default.object.isRequired,
  undoLastCommit: _propTypes.default.func.isRequired,
  isMostRecent: _propTypes.default.bool.isRequired,
  openCommit: _propTypes.default.func.isRequired,
  isSelected: _propTypes.default.bool.isRequired
});
class RecentCommitsView extends _react.default.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "openSelectedCommit", () => this.props.openCommit({
      sha: this.props.selectedCommitSha,
      preserveFocus: false
    }));
    this.refRoot = new _refHolder.default();
  }
  setFocus(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return this.refRoot.map(element => {
        element.focus();
        return true;
      }).getOr(false);
    }
    return false;
  }
  getFocus(element) {
    return this.refRoot.map(e => e.contains(element)).getOr(false) ? this.constructor.focus.RECENT_COMMIT : null;
  }
  render() {
    return _react.default.createElement("div", {
      className: "github-RecentCommits",
      tabIndex: "-1",
      ref: this.refRoot.setter
    }, _react.default.createElement(_commands.default, {
      registry: this.props.commands,
      target: this.refRoot
    }, _react.default.createElement(_commands.Command, {
      command: "core:move-down",
      callback: this.props.selectNextCommit
    }), _react.default.createElement(_commands.Command, {
      command: "core:move-up",
      callback: this.props.selectPreviousCommit
    }), _react.default.createElement(_commands.Command, {
      command: "github:dive",
      callback: this.openSelectedCommit
    })), this.renderCommits());
  }
  renderCommits() {
    if (this.props.commits.length === 0) {
      if (this.props.isLoading) {
        return _react.default.createElement("div", {
          className: "github-RecentCommits-message"
        }, "Recent commits");
      } else {
        return _react.default.createElement("div", {
          className: "github-RecentCommits-message"
        }, "Make your first commit");
      }
    } else {
      return _react.default.createElement("ul", {
        className: "github-RecentCommits-list"
      }, this.props.commits.map((commit, i) => {
        return _react.default.createElement(RecentCommitView, {
          key: commit.getSha(),
          commands: this.props.commands,
          clipboard: this.props.clipboard,
          isMostRecent: i === 0,
          commit: commit,
          undoLastCommit: this.props.undoLastCommit,
          openCommit: () => this.props.openCommit({
            sha: commit.getSha(),
            preserveFocus: true
          }),
          isSelected: this.props.selectedCommitSha === commit.getSha()
        });
      }));
    }
  }
  advanceFocusFrom(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return Promise.resolve(this.constructor.focus.RECENT_COMMIT);
    }
    return Promise.resolve(null);
  }
  retreatFocusFrom(focus) {
    if (focus === this.constructor.focus.RECENT_COMMIT) {
      return Promise.resolve(_commitView.default.lastFocus);
    }
    return Promise.resolve(null);
  }
}
exports.default = RecentCommitsView;
_defineProperty(RecentCommitsView, "propTypes", {
  // Model state
  commits: _propTypes.default.arrayOf(_propTypes.default.object).isRequired,
  isLoading: _propTypes.default.bool.isRequired,
  selectedCommitSha: _propTypes.default.string.isRequired,
  // Atom environment
  clipboard: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  // Action methods
  undoLastCommit: _propTypes.default.func.isRequired,
  openCommit: _propTypes.default.func.isRequired,
  selectNextCommit: _propTypes.default.func.isRequired,
  selectPreviousCommit: _propTypes.default.func.isRequired
});
_defineProperty(RecentCommitsView, "focus", {
  RECENT_COMMIT: Symbol('recent_commit')
});
_defineProperty(RecentCommitsView, "firstFocus", RecentCommitsView.focus.RECENT_COMMIT);
_defineProperty(RecentCommitsView, "lastFocus", RecentCommitsView.focus.RECENT_COMMIT);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfbW9tZW50IiwiX2NsYXNzbmFtZXMiLCJfbm9kZUVtb2ppIiwiX2NvbW1hbmRzIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfcmVmSG9sZGVyIiwiX2NvbW1pdFZpZXciLCJfdGltZWFnbyIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiUmVjZW50Q29tbWl0VmlldyIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY29tbWl0IiwiY2xpcGJvYXJkIiwid3JpdGUiLCJzaGEiLCJtZXNzYWdlU3ViamVjdCIsInVuZG9MYXN0Q29tbWl0IiwicmVmUm9vdCIsIlJlZkhvbGRlciIsImNvbXBvbmVudERpZE1vdW50IiwiaXNTZWxlY3RlZCIsIm1hcCIsInJvb3QiLCJzY3JvbGxJbnRvVmlld0lmTmVlZGVkIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicmVuZGVyIiwiYXV0aG9yTW9tZW50IiwibW9tZW50IiwiZ2V0QXV0aG9yRGF0ZSIsImZ1bGxNZXNzYWdlIiwiZ2V0RnVsbE1lc3NhZ2UiLCJjcmVhdGVFbGVtZW50IiwicmVmIiwic2V0dGVyIiwiY2xhc3NOYW1lIiwiY3giLCJpc01vc3RSZWNlbnQiLCJvbkNsaWNrIiwib3BlbkNvbW1pdCIsInJlZ2lzdHJ5IiwiY29tbWFuZHMiLCJ0YXJnZXQiLCJDb21tYW5kIiwiY29tbWFuZCIsImNhbGxiYWNrIiwiY29weUNvbW1pdFNoYSIsImNvcHlDb21taXRTdWJqZWN0IiwicmVuZGVyQXV0aG9ycyIsInRpdGxlIiwiZW1vamlmeSIsImdldE1lc3NhZ2VTdWJqZWN0IiwidHlwZSIsImRpc3BsYXlTdHlsZSIsInRpbWUiLCJmb3JtYXQiLCJyZW5kZXJBdXRob3IiLCJhdXRob3IiLCJlbWFpbCIsImdldEVtYWlsIiwiYXZhdGFyVXJsIiwiZ2V0QXZhdGFyVXJsIiwic3JjIiwiYWx0IiwiY29BdXRob3JzIiwiZ2V0Q29BdXRob3JzIiwiYXV0aG9ycyIsImdldEF1dGhvciIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJmdW5jIiwiYm9vbCIsIlJlY2VudENvbW1pdHNWaWV3Iiwic2VsZWN0ZWRDb21taXRTaGEiLCJwcmVzZXJ2ZUZvY3VzIiwic2V0Rm9jdXMiLCJmb2N1cyIsIlJFQ0VOVF9DT01NSVQiLCJlbGVtZW50IiwiZ2V0T3IiLCJnZXRGb2N1cyIsImUiLCJjb250YWlucyIsInRhYkluZGV4Iiwic2VsZWN0TmV4dENvbW1pdCIsInNlbGVjdFByZXZpb3VzQ29tbWl0Iiwib3BlblNlbGVjdGVkQ29tbWl0IiwicmVuZGVyQ29tbWl0cyIsImNvbW1pdHMiLCJsZW5ndGgiLCJpc0xvYWRpbmciLCJpIiwiZ2V0U2hhIiwiYWR2YW5jZUZvY3VzRnJvbSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmV0cmVhdEZvY3VzRnJvbSIsIkNvbW1pdFZpZXciLCJsYXN0Rm9jdXMiLCJleHBvcnRzIiwiYXJyYXlPZiIsInN0cmluZyJdLCJzb3VyY2VzIjpbInJlY2VudC1jb21taXRzLXZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQge2Vtb2ppZnl9IGZyb20gJ25vZGUtZW1vamknO1xuXG5pbXBvcnQgQ29tbWFuZHMsIHtDb21tYW5kfSBmcm9tICcuLi9hdG9tL2NvbW1hbmRzJztcbmltcG9ydCBSZWZIb2xkZXIgZnJvbSAnLi4vbW9kZWxzL3JlZi1ob2xkZXInO1xuXG5pbXBvcnQgQ29tbWl0VmlldyBmcm9tICcuL2NvbW1pdC12aWV3JztcbmltcG9ydCBUaW1lYWdvIGZyb20gJy4vdGltZWFnbyc7XG5cbmNsYXNzIFJlY2VudENvbW1pdFZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGNvbW1hbmRzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY2xpcGJvYXJkOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29tbWl0OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdW5kb0xhc3RDb21taXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaXNNb3N0UmVjZW50OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIG9wZW5Db21taXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaXNTZWxlY3RlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMucmVmUm9vdCA9IG5ldyBSZWZIb2xkZXIoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmlzU2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMucmVmUm9vdC5tYXAocm9vdCA9PiByb290LnNjcm9sbEludG9WaWV3SWZOZWVkZWQoZmFsc2UpKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaXNTZWxlY3RlZCAmJiAhcHJldlByb3BzLmlzU2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMucmVmUm9vdC5tYXAocm9vdCA9PiByb290LnNjcm9sbEludG9WaWV3SWZOZWVkZWQoZmFsc2UpKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgYXV0aG9yTW9tZW50ID0gbW9tZW50KHRoaXMucHJvcHMuY29tbWl0LmdldEF1dGhvckRhdGUoKSAqIDEwMDApO1xuICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gdGhpcy5wcm9wcy5jb21taXQuZ2V0RnVsbE1lc3NhZ2UoKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8bGlcbiAgICAgICAgcmVmPXt0aGlzLnJlZlJvb3Quc2V0dGVyfVxuICAgICAgICBjbGFzc05hbWU9e2N4KCdnaXRodWItUmVjZW50Q29tbWl0Jywge1xuICAgICAgICAgICdtb3N0LXJlY2VudCc6IHRoaXMucHJvcHMuaXNNb3N0UmVjZW50LFxuICAgICAgICAgICdpcy1zZWxlY3RlZCc6IHRoaXMucHJvcHMuaXNTZWxlY3RlZCxcbiAgICAgICAgfSl9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub3BlbkNvbW1pdH0+XG4gICAgICAgIDxDb21tYW5kcyByZWdpc3RyeT17dGhpcy5wcm9wcy5jb21tYW5kc30gdGFyZ2V0PXt0aGlzLnJlZlJvb3R9PlxuICAgICAgICAgIDxDb21tYW5kIGNvbW1hbmQ9XCJnaXRodWI6Y29weS1jb21taXQtc2hhXCIgY2FsbGJhY2s9e3RoaXMuY29weUNvbW1pdFNoYX0gLz5cbiAgICAgICAgICA8Q29tbWFuZCBjb21tYW5kPVwiZ2l0aHViOmNvcHktY29tbWl0LXN1YmplY3RcIiBjYWxsYmFjaz17dGhpcy5jb3B5Q29tbWl0U3ViamVjdH0gLz5cbiAgICAgICAgPC9Db21tYW5kcz5cbiAgICAgICAge3RoaXMucmVuZGVyQXV0aG9ycygpfVxuICAgICAgICA8c3BhblxuICAgICAgICAgIGNsYXNzTmFtZT1cImdpdGh1Yi1SZWNlbnRDb21taXQtbWVzc2FnZVwiXG4gICAgICAgICAgdGl0bGU9e2Vtb2ppZnkoZnVsbE1lc3NhZ2UpfT5cbiAgICAgICAgICB7ZW1vamlmeSh0aGlzLnByb3BzLmNvbW1pdC5nZXRNZXNzYWdlU3ViamVjdCgpKX1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICB7dGhpcy5wcm9wcy5pc01vc3RSZWNlbnQgJiYgKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBnaXRodWItUmVjZW50Q29tbWl0LXVuZG9CdXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17dGhpcy51bmRvTGFzdENvbW1pdH0+XG4gICAgICAgICAgICBVbmRvXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxUaW1lYWdvXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdC10aW1lXCJcbiAgICAgICAgICB0eXBlPVwidGltZVwiXG4gICAgICAgICAgZGlzcGxheVN0eWxlPVwic2hvcnRcIlxuICAgICAgICAgIHRpbWU9e2F1dGhvck1vbWVudH1cbiAgICAgICAgICB0aXRsZT17YXV0aG9yTW9tZW50LmZvcm1hdCgnTU1NIERvLCBZWVlZJyl9XG4gICAgICAgIC8+XG4gICAgICA8L2xpPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBdXRob3IoYXV0aG9yKSB7XG4gICAgY29uc3QgZW1haWwgPSBhdXRob3IuZ2V0RW1haWwoKTtcbiAgICBjb25zdCBhdmF0YXJVcmwgPSBhdXRob3IuZ2V0QXZhdGFyVXJsKCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGltZyBjbGFzc05hbWU9XCJnaXRodWItUmVjZW50Q29tbWl0LWF2YXRhclwiXG4gICAgICAgIGtleT17ZW1haWx9XG4gICAgICAgIHNyYz17YXZhdGFyVXJsfVxuICAgICAgICB0aXRsZT17ZW1haWx9XG4gICAgICAgIGFsdD17YCR7ZW1haWx9J3MgYXZhdGFyJ2B9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBdXRob3JzKCkge1xuICAgIGNvbnN0IGNvQXV0aG9ycyA9IHRoaXMucHJvcHMuY29tbWl0LmdldENvQXV0aG9ycygpO1xuICAgIGNvbnN0IGF1dGhvcnMgPSBbdGhpcy5wcm9wcy5jb21taXQuZ2V0QXV0aG9yKCksIC4uLmNvQXV0aG9yc107XG5cbiAgICByZXR1cm4gKFxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdC1hdXRob3JzXCI+XG4gICAgICAgIHthdXRob3JzLm1hcCh0aGlzLnJlbmRlckF1dGhvcil9XG4gICAgICA8L3NwYW4+XG4gICAgKTtcbiAgfVxuXG4gIGNvcHlDb21taXRTaGEgPSBldmVudCA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3Qge2NvbW1pdCwgY2xpcGJvYXJkfSA9IHRoaXMucHJvcHM7XG4gICAgY2xpcGJvYXJkLndyaXRlKGNvbW1pdC5zaGEpO1xuICB9XG5cbiAgY29weUNvbW1pdFN1YmplY3QgPSBldmVudCA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3Qge2NvbW1pdCwgY2xpcGJvYXJkfSA9IHRoaXMucHJvcHM7XG4gICAgY2xpcGJvYXJkLndyaXRlKGNvbW1pdC5tZXNzYWdlU3ViamVjdCk7XG4gIH1cblxuICB1bmRvTGFzdENvbW1pdCA9IGV2ZW50ID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnByb3BzLnVuZG9MYXN0Q29tbWl0KCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjZW50Q29tbWl0c1ZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8vIE1vZGVsIHN0YXRlXG4gICAgY29tbWl0czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9iamVjdCkuaXNSZXF1aXJlZCxcbiAgICBpc0xvYWRpbmc6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgc2VsZWN0ZWRDb21taXRTaGE6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgIC8vIEF0b20gZW52aXJvbm1lbnRcbiAgICBjbGlwYm9hcmQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb21tYW5kczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuXG4gICAgLy8gQWN0aW9uIG1ldGhvZHNcbiAgICB1bmRvTGFzdENvbW1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvcGVuQ29tbWl0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNlbGVjdE5leHRDb21taXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc2VsZWN0UHJldmlvdXNDb21taXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIH07XG5cbiAgc3RhdGljIGZvY3VzID0ge1xuICAgIFJFQ0VOVF9DT01NSVQ6IFN5bWJvbCgncmVjZW50X2NvbW1pdCcpLFxuICB9O1xuXG4gIHN0YXRpYyBmaXJzdEZvY3VzID0gUmVjZW50Q29tbWl0c1ZpZXcuZm9jdXMuUkVDRU5UX0NPTU1JVDtcblxuICBzdGF0aWMgbGFzdEZvY3VzID0gUmVjZW50Q29tbWl0c1ZpZXcuZm9jdXMuUkVDRU5UX0NPTU1JVDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnJlZlJvb3QgPSBuZXcgUmVmSG9sZGVyKCk7XG4gIH1cblxuICBzZXRGb2N1cyhmb2N1cykge1xuICAgIGlmIChmb2N1cyA9PT0gdGhpcy5jb25zdHJ1Y3Rvci5mb2N1cy5SRUNFTlRfQ09NTUlUKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZSb290Lm1hcChlbGVtZW50ID0+IHtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pLmdldE9yKGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRGb2N1cyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMucmVmUm9vdC5tYXAoZSA9PiBlLmNvbnRhaW5zKGVsZW1lbnQpKS5nZXRPcihmYWxzZSlcbiAgICAgID8gdGhpcy5jb25zdHJ1Y3Rvci5mb2N1cy5SRUNFTlRfQ09NTUlUXG4gICAgICA6IG51bGw7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2l0aHViLVJlY2VudENvbW1pdHNcIiB0YWJJbmRleD1cIi0xXCIgcmVmPXt0aGlzLnJlZlJvb3Quc2V0dGVyfT5cbiAgICAgICAgPENvbW1hbmRzIHJlZ2lzdHJ5PXt0aGlzLnByb3BzLmNvbW1hbmRzfSB0YXJnZXQ9e3RoaXMucmVmUm9vdH0+XG4gICAgICAgICAgPENvbW1hbmQgY29tbWFuZD1cImNvcmU6bW92ZS1kb3duXCIgY2FsbGJhY2s9e3RoaXMucHJvcHMuc2VsZWN0TmV4dENvbW1pdH0gLz5cbiAgICAgICAgICA8Q29tbWFuZCBjb21tYW5kPVwiY29yZTptb3ZlLXVwXCIgY2FsbGJhY2s9e3RoaXMucHJvcHMuc2VsZWN0UHJldmlvdXNDb21taXR9IC8+XG4gICAgICAgICAgPENvbW1hbmQgY29tbWFuZD1cImdpdGh1YjpkaXZlXCIgY2FsbGJhY2s9e3RoaXMub3BlblNlbGVjdGVkQ29tbWl0fSAvPlxuICAgICAgICA8L0NvbW1hbmRzPlxuICAgICAgICB7dGhpcy5yZW5kZXJDb21taXRzKCl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyQ29tbWl0cygpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5jb21taXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaXNMb2FkaW5nKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnaXRodWItUmVjZW50Q29tbWl0cy1tZXNzYWdlXCI+XG4gICAgICAgICAgICBSZWNlbnQgY29tbWl0c1xuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdpdGh1Yi1SZWNlbnRDb21taXRzLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgIE1ha2UgeW91ciBmaXJzdCBjb21taXRcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPHVsIGNsYXNzTmFtZT1cImdpdGh1Yi1SZWNlbnRDb21taXRzLWxpc3RcIj5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5jb21taXRzLm1hcCgoY29tbWl0LCBpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8UmVjZW50Q29tbWl0Vmlld1xuICAgICAgICAgICAgICAgIGtleT17Y29tbWl0LmdldFNoYSgpfVxuICAgICAgICAgICAgICAgIGNvbW1hbmRzPXt0aGlzLnByb3BzLmNvbW1hbmRzfVxuICAgICAgICAgICAgICAgIGNsaXBib2FyZD17dGhpcy5wcm9wcy5jbGlwYm9hcmR9XG4gICAgICAgICAgICAgICAgaXNNb3N0UmVjZW50PXtpID09PSAwfVxuICAgICAgICAgICAgICAgIGNvbW1pdD17Y29tbWl0fVxuICAgICAgICAgICAgICAgIHVuZG9MYXN0Q29tbWl0PXt0aGlzLnByb3BzLnVuZG9MYXN0Q29tbWl0fVxuICAgICAgICAgICAgICAgIG9wZW5Db21taXQ9eygpID0+IHRoaXMucHJvcHMub3BlbkNvbW1pdCh7c2hhOiBjb21taXQuZ2V0U2hhKCksIHByZXNlcnZlRm9jdXM6IHRydWV9KX1cbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0aGlzLnByb3BzLnNlbGVjdGVkQ29tbWl0U2hhID09PSBjb21taXQuZ2V0U2hhKCl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L3VsPlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBvcGVuU2VsZWN0ZWRDb21taXQgPSAoKSA9PiB0aGlzLnByb3BzLm9wZW5Db21taXQoe3NoYTogdGhpcy5wcm9wcy5zZWxlY3RlZENvbW1pdFNoYSwgcHJlc2VydmVGb2N1czogZmFsc2V9KVxuXG4gIGFkdmFuY2VGb2N1c0Zyb20oZm9jdXMpIHtcbiAgICBpZiAoZm9jdXMgPT09IHRoaXMuY29uc3RydWN0b3IuZm9jdXMuUkVDRU5UX0NPTU1JVCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNvbnN0cnVjdG9yLmZvY3VzLlJFQ0VOVF9DT01NSVQpO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gIH1cblxuICByZXRyZWF0Rm9jdXNGcm9tKGZvY3VzKSB7XG4gICAgaWYgKGZvY3VzID09PSB0aGlzLmNvbnN0cnVjdG9yLmZvY3VzLlJFQ0VOVF9DT01NSVQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoQ29tbWl0Vmlldy5sYXN0Rm9jdXMpO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksVUFBQSxHQUFBSixPQUFBO0FBRUEsSUFBQUssU0FBQSxHQUFBQyx1QkFBQSxDQUFBTixPQUFBO0FBQ0EsSUFBQU8sVUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQVEsV0FBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVMsUUFBQSxHQUFBVixzQkFBQSxDQUFBQyxPQUFBO0FBQWdDLFNBQUFVLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFMLHdCQUFBUyxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFFLE9BQUEsRUFBQUYsR0FBQSxVQUFBRyxLQUFBLEdBQUFSLHdCQUFBLENBQUFDLFdBQUEsT0FBQU8sS0FBQSxJQUFBQSxLQUFBLENBQUFDLEdBQUEsQ0FBQUosR0FBQSxZQUFBRyxLQUFBLENBQUFFLEdBQUEsQ0FBQUwsR0FBQSxTQUFBTSxNQUFBLFdBQUFDLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBLFdBQUFDLEdBQUEsSUFBQVgsR0FBQSxRQUFBVyxHQUFBLGtCQUFBSCxNQUFBLENBQUFJLFNBQUEsQ0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFkLEdBQUEsRUFBQVcsR0FBQSxTQUFBSSxJQUFBLEdBQUFSLHFCQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVYsR0FBQSxFQUFBVyxHQUFBLGNBQUFJLElBQUEsS0FBQUEsSUFBQSxDQUFBVixHQUFBLElBQUFVLElBQUEsQ0FBQUMsR0FBQSxLQUFBUixNQUFBLENBQUFDLGNBQUEsQ0FBQUgsTUFBQSxFQUFBSyxHQUFBLEVBQUFJLElBQUEsWUFBQVQsTUFBQSxDQUFBSyxHQUFBLElBQUFYLEdBQUEsQ0FBQVcsR0FBQSxTQUFBTCxNQUFBLENBQUFKLE9BQUEsR0FBQUYsR0FBQSxNQUFBRyxLQUFBLElBQUFBLEtBQUEsQ0FBQWEsR0FBQSxDQUFBaEIsR0FBQSxFQUFBTSxNQUFBLFlBQUFBLE1BQUE7QUFBQSxTQUFBdEIsdUJBQUFnQixHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsU0FBQWlCLGdCQUFBakIsR0FBQSxFQUFBVyxHQUFBLEVBQUFPLEtBQUEsSUFBQVAsR0FBQSxHQUFBUSxjQUFBLENBQUFSLEdBQUEsT0FBQUEsR0FBQSxJQUFBWCxHQUFBLElBQUFRLE1BQUEsQ0FBQUMsY0FBQSxDQUFBVCxHQUFBLEVBQUFXLEdBQUEsSUFBQU8sS0FBQSxFQUFBQSxLQUFBLEVBQUFFLFVBQUEsUUFBQUMsWUFBQSxRQUFBQyxRQUFBLG9CQUFBdEIsR0FBQSxDQUFBVyxHQUFBLElBQUFPLEtBQUEsV0FBQWxCLEdBQUE7QUFBQSxTQUFBbUIsZUFBQUksR0FBQSxRQUFBWixHQUFBLEdBQUFhLFlBQUEsQ0FBQUQsR0FBQSwyQkFBQVosR0FBQSxnQkFBQUEsR0FBQSxHQUFBYyxNQUFBLENBQUFkLEdBQUE7QUFBQSxTQUFBYSxhQUFBRSxLQUFBLEVBQUFDLElBQUEsZUFBQUQsS0FBQSxpQkFBQUEsS0FBQSxrQkFBQUEsS0FBQSxNQUFBRSxJQUFBLEdBQUFGLEtBQUEsQ0FBQUcsTUFBQSxDQUFBQyxXQUFBLE9BQUFGLElBQUEsS0FBQUcsU0FBQSxRQUFBQyxHQUFBLEdBQUFKLElBQUEsQ0FBQWQsSUFBQSxDQUFBWSxLQUFBLEVBQUFDLElBQUEsMkJBQUFLLEdBQUEsc0JBQUFBLEdBQUEsWUFBQUMsU0FBQSw0REFBQU4sSUFBQSxnQkFBQUYsTUFBQSxHQUFBUyxNQUFBLEVBQUFSLEtBQUE7QUFFaEMsTUFBTVMsZ0JBQWdCLFNBQVNDLGNBQUssQ0FBQ0MsU0FBUyxDQUFDO0VBVzdDQyxXQUFXQSxDQUFDQyxLQUFLLEVBQUU7SUFDakIsS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFBQ3RCLGVBQUEsd0JBa0ZDdUIsS0FBSyxJQUFJO01BQ3ZCQSxLQUFLLENBQUNDLGVBQWUsQ0FBQyxDQUFDO01BQ3ZCLE1BQU07UUFBQ0MsTUFBTTtRQUFFQztNQUFTLENBQUMsR0FBRyxJQUFJLENBQUNKLEtBQUs7TUFDdENJLFNBQVMsQ0FBQ0MsS0FBSyxDQUFDRixNQUFNLENBQUNHLEdBQUcsQ0FBQztJQUM3QixDQUFDO0lBQUE1QixlQUFBLDRCQUVtQnVCLEtBQUssSUFBSTtNQUMzQkEsS0FBSyxDQUFDQyxlQUFlLENBQUMsQ0FBQztNQUN2QixNQUFNO1FBQUNDLE1BQU07UUFBRUM7TUFBUyxDQUFDLEdBQUcsSUFBSSxDQUFDSixLQUFLO01BQ3RDSSxTQUFTLENBQUNDLEtBQUssQ0FBQ0YsTUFBTSxDQUFDSSxjQUFjLENBQUM7SUFDeEMsQ0FBQztJQUFBN0IsZUFBQSx5QkFFZ0J1QixLQUFLLElBQUk7TUFDeEJBLEtBQUssQ0FBQ0MsZUFBZSxDQUFDLENBQUM7TUFDdkIsSUFBSSxDQUFDRixLQUFLLENBQUNRLGNBQWMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUEvRkMsSUFBSSxDQUFDQyxPQUFPLEdBQUcsSUFBSUMsa0JBQVMsQ0FBQyxDQUFDO0VBQ2hDO0VBRUFDLGlCQUFpQkEsQ0FBQSxFQUFHO0lBQ2xCLElBQUksSUFBSSxDQUFDWCxLQUFLLENBQUNZLFVBQVUsRUFBRTtNQUN6QixJQUFJLENBQUNILE9BQU8sQ0FBQ0ksR0FBRyxDQUFDQyxJQUFJLElBQUlBLElBQUksQ0FBQ0Msc0JBQXNCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUQ7RUFDRjtFQUVBQyxrQkFBa0JBLENBQUNDLFNBQVMsRUFBRTtJQUM1QixJQUFJLElBQUksQ0FBQ2pCLEtBQUssQ0FBQ1ksVUFBVSxJQUFJLENBQUNLLFNBQVMsQ0FBQ0wsVUFBVSxFQUFFO01BQ2xELElBQUksQ0FBQ0gsT0FBTyxDQUFDSSxHQUFHLENBQUNDLElBQUksSUFBSUEsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5RDtFQUNGO0VBRUFHLE1BQU1BLENBQUEsRUFBRztJQUNQLE1BQU1DLFlBQVksR0FBRyxJQUFBQyxlQUFNLEVBQUMsSUFBSSxDQUFDcEIsS0FBSyxDQUFDRyxNQUFNLENBQUNrQixhQUFhLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyRSxNQUFNQyxXQUFXLEdBQUcsSUFBSSxDQUFDdEIsS0FBSyxDQUFDRyxNQUFNLENBQUNvQixjQUFjLENBQUMsQ0FBQztJQUV0RCxPQUNFL0UsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQTtNQUNFQyxHQUFHLEVBQUUsSUFBSSxDQUFDaEIsT0FBTyxDQUFDaUIsTUFBTztNQUN6QkMsU0FBUyxFQUFFLElBQUFDLG1CQUFFLEVBQUMscUJBQXFCLEVBQUU7UUFDbkMsYUFBYSxFQUFFLElBQUksQ0FBQzVCLEtBQUssQ0FBQzZCLFlBQVk7UUFDdEMsYUFBYSxFQUFFLElBQUksQ0FBQzdCLEtBQUssQ0FBQ1k7TUFDNUIsQ0FBQyxDQUFFO01BQ0hrQixPQUFPLEVBQUUsSUFBSSxDQUFDOUIsS0FBSyxDQUFDK0I7SUFBVyxHQUMvQnZGLE1BQUEsQ0FBQW1CLE9BQUEsQ0FBQTZELGFBQUEsQ0FBQ3pFLFNBQUEsQ0FBQVksT0FBUTtNQUFDcUUsUUFBUSxFQUFFLElBQUksQ0FBQ2hDLEtBQUssQ0FBQ2lDLFFBQVM7TUFBQ0MsTUFBTSxFQUFFLElBQUksQ0FBQ3pCO0lBQVEsR0FDNURqRSxNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUN6RSxTQUFBLENBQUFvRixPQUFPO01BQUNDLE9BQU8sRUFBQyx3QkFBd0I7TUFBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0M7SUFBYyxDQUFFLENBQUMsRUFDMUU5RixNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUN6RSxTQUFBLENBQUFvRixPQUFPO01BQUNDLE9BQU8sRUFBQyw0QkFBNEI7TUFBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0U7SUFBa0IsQ0FBRSxDQUN6RSxDQUFDLEVBQ1YsSUFBSSxDQUFDQyxhQUFhLENBQUMsQ0FBQyxFQUNyQmhHLE1BQUEsQ0FBQW1CLE9BQUEsQ0FBQTZELGFBQUE7TUFDRUcsU0FBUyxFQUFDLDZCQUE2QjtNQUN2Q2MsS0FBSyxFQUFFLElBQUFDLGtCQUFPLEVBQUNwQixXQUFXO0lBQUUsR0FDM0IsSUFBQW9CLGtCQUFPLEVBQUMsSUFBSSxDQUFDMUMsS0FBSyxDQUFDRyxNQUFNLENBQUN3QyxpQkFBaUIsQ0FBQyxDQUFDLENBQzFDLENBQUMsRUFDTixJQUFJLENBQUMzQyxLQUFLLENBQUM2QixZQUFZLElBQ3RCckYsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQTtNQUNFRyxTQUFTLEVBQUMsb0NBQW9DO01BQzlDRyxPQUFPLEVBQUUsSUFBSSxDQUFDdEI7SUFBZSxTQUV2QixDQUNULEVBQ0RoRSxNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUNyRSxRQUFBLENBQUFRLE9BQU87TUFDTmdFLFNBQVMsRUFBQywwQkFBMEI7TUFDcENpQixJQUFJLEVBQUMsTUFBTTtNQUNYQyxZQUFZLEVBQUMsT0FBTztNQUNwQkMsSUFBSSxFQUFFM0IsWUFBYTtNQUNuQnNCLEtBQUssRUFBRXRCLFlBQVksQ0FBQzRCLE1BQU0sQ0FBQyxjQUFjO0lBQUUsQ0FDNUMsQ0FDQyxDQUFDO0VBRVQ7RUFFQUMsWUFBWUEsQ0FBQ0MsTUFBTSxFQUFFO0lBQ25CLE1BQU1DLEtBQUssR0FBR0QsTUFBTSxDQUFDRSxRQUFRLENBQUMsQ0FBQztJQUMvQixNQUFNQyxTQUFTLEdBQUdILE1BQU0sQ0FBQ0ksWUFBWSxDQUFDLENBQUM7SUFFdkMsT0FDRTdHLE1BQUEsQ0FBQW1CLE9BQUEsQ0FBQTZELGFBQUE7TUFBS0csU0FBUyxFQUFDLDRCQUE0QjtNQUN6Q3ZELEdBQUcsRUFBRThFLEtBQU07TUFDWEksR0FBRyxFQUFFRixTQUFVO01BQ2ZYLEtBQUssRUFBRVMsS0FBTTtNQUNiSyxHQUFHLEVBQUcsR0FBRUwsS0FBTTtJQUFZLENBQzNCLENBQUM7RUFFTjtFQUVBVixhQUFhQSxDQUFBLEVBQUc7SUFDZCxNQUFNZ0IsU0FBUyxHQUFHLElBQUksQ0FBQ3hELEtBQUssQ0FBQ0csTUFBTSxDQUFDc0QsWUFBWSxDQUFDLENBQUM7SUFDbEQsTUFBTUMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDMUQsS0FBSyxDQUFDRyxNQUFNLENBQUN3RCxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUdILFNBQVMsQ0FBQztJQUU3RCxPQUNFaEgsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQTtNQUFNRyxTQUFTLEVBQUM7SUFBNkIsR0FDMUMrQixPQUFPLENBQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDbUMsWUFBWSxDQUMxQixDQUFDO0VBRVg7QUFrQkY7QUFBQ3RFLGVBQUEsQ0E5R0trQixnQkFBZ0IsZUFDRDtFQUNqQnFDLFFBQVEsRUFBRTJCLGtCQUFTLENBQUNDLE1BQU0sQ0FBQ0MsVUFBVTtFQUNyQzFELFNBQVMsRUFBRXdELGtCQUFTLENBQUNDLE1BQU0sQ0FBQ0MsVUFBVTtFQUN0QzNELE1BQU0sRUFBRXlELGtCQUFTLENBQUNDLE1BQU0sQ0FBQ0MsVUFBVTtFQUNuQ3RELGNBQWMsRUFBRW9ELGtCQUFTLENBQUNHLElBQUksQ0FBQ0QsVUFBVTtFQUN6Q2pDLFlBQVksRUFBRStCLGtCQUFTLENBQUNJLElBQUksQ0FBQ0YsVUFBVTtFQUN2Qy9CLFVBQVUsRUFBRTZCLGtCQUFTLENBQUNHLElBQUksQ0FBQ0QsVUFBVTtFQUNyQ2xELFVBQVUsRUFBRWdELGtCQUFTLENBQUNJLElBQUksQ0FBQ0Y7QUFDN0IsQ0FBQztBQXVHWSxNQUFNRyxpQkFBaUIsU0FBU3BFLGNBQUssQ0FBQ0MsU0FBUyxDQUFDO0VBMEI3REMsV0FBV0EsQ0FBQ0MsS0FBSyxFQUFFO0lBQ2pCLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBQUN0QixlQUFBLDZCQXVFTSxNQUFNLElBQUksQ0FBQ3NCLEtBQUssQ0FBQytCLFVBQVUsQ0FBQztNQUFDekIsR0FBRyxFQUFFLElBQUksQ0FBQ04sS0FBSyxDQUFDa0UsaUJBQWlCO01BQUVDLGFBQWEsRUFBRTtJQUFLLENBQUMsQ0FBQztJQXRFekcsSUFBSSxDQUFDMUQsT0FBTyxHQUFHLElBQUlDLGtCQUFTLENBQUMsQ0FBQztFQUNoQztFQUVBMEQsUUFBUUEsQ0FBQ0MsS0FBSyxFQUFFO0lBQ2QsSUFBSUEsS0FBSyxLQUFLLElBQUksQ0FBQ3RFLFdBQVcsQ0FBQ3NFLEtBQUssQ0FBQ0MsYUFBYSxFQUFFO01BQ2xELE9BQU8sSUFBSSxDQUFDN0QsT0FBTyxDQUFDSSxHQUFHLENBQUMwRCxPQUFPLElBQUk7UUFDakNBLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLENBQUM7UUFDZixPQUFPLElBQUk7TUFDYixDQUFDLENBQUMsQ0FBQ0csS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNqQjtJQUVBLE9BQU8sS0FBSztFQUNkO0VBRUFDLFFBQVFBLENBQUNGLE9BQU8sRUFBRTtJQUNoQixPQUFPLElBQUksQ0FBQzlELE9BQU8sQ0FBQ0ksR0FBRyxDQUFDNkQsQ0FBQyxJQUFJQSxDQUFDLENBQUNDLFFBQVEsQ0FBQ0osT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUMxRCxJQUFJLENBQUN6RSxXQUFXLENBQUNzRSxLQUFLLENBQUNDLGFBQWEsR0FDcEMsSUFBSTtFQUNWO0VBRUFwRCxNQUFNQSxDQUFBLEVBQUc7SUFDUCxPQUNFMUUsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQTtNQUFLRyxTQUFTLEVBQUMsc0JBQXNCO01BQUNpRCxRQUFRLEVBQUMsSUFBSTtNQUFDbkQsR0FBRyxFQUFFLElBQUksQ0FBQ2hCLE9BQU8sQ0FBQ2lCO0lBQU8sR0FDM0VsRixNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUN6RSxTQUFBLENBQUFZLE9BQVE7TUFBQ3FFLFFBQVEsRUFBRSxJQUFJLENBQUNoQyxLQUFLLENBQUNpQyxRQUFTO01BQUNDLE1BQU0sRUFBRSxJQUFJLENBQUN6QjtJQUFRLEdBQzVEakUsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQSxDQUFDekUsU0FBQSxDQUFBb0YsT0FBTztNQUFDQyxPQUFPLEVBQUMsZ0JBQWdCO01BQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNyQyxLQUFLLENBQUM2RTtJQUFpQixDQUFFLENBQUMsRUFDM0VySSxNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUN6RSxTQUFBLENBQUFvRixPQUFPO01BQUNDLE9BQU8sRUFBQyxjQUFjO01BQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNyQyxLQUFLLENBQUM4RTtJQUFxQixDQUFFLENBQUMsRUFDN0V0SSxNQUFBLENBQUFtQixPQUFBLENBQUE2RCxhQUFBLENBQUN6RSxTQUFBLENBQUFvRixPQUFPO01BQUNDLE9BQU8sRUFBQyxhQUFhO01BQUNDLFFBQVEsRUFBRSxJQUFJLENBQUMwQztJQUFtQixDQUFFLENBQzNELENBQUMsRUFDVixJQUFJLENBQUNDLGFBQWEsQ0FBQyxDQUNqQixDQUFDO0VBRVY7RUFFQUEsYUFBYUEsQ0FBQSxFQUFHO0lBQ2QsSUFBSSxJQUFJLENBQUNoRixLQUFLLENBQUNpRixPQUFPLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDbkMsSUFBSSxJQUFJLENBQUNsRixLQUFLLENBQUNtRixTQUFTLEVBQUU7UUFDeEIsT0FDRTNJLE1BQUEsQ0FBQW1CLE9BQUEsQ0FBQTZELGFBQUE7VUFBS0csU0FBUyxFQUFDO1FBQThCLG1CQUV4QyxDQUFDO01BRVYsQ0FBQyxNQUFNO1FBQ0wsT0FDRW5GLE1BQUEsQ0FBQW1CLE9BQUEsQ0FBQTZELGFBQUE7VUFBS0csU0FBUyxFQUFDO1FBQThCLDJCQUV4QyxDQUFDO01BRVY7SUFDRixDQUFDLE1BQU07TUFDTCxPQUNFbkYsTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQTtRQUFJRyxTQUFTLEVBQUM7TUFBMkIsR0FDdEMsSUFBSSxDQUFDM0IsS0FBSyxDQUFDaUYsT0FBTyxDQUFDcEUsR0FBRyxDQUFDLENBQUNWLE1BQU0sRUFBRWlGLENBQUMsS0FBSztRQUNyQyxPQUNFNUksTUFBQSxDQUFBbUIsT0FBQSxDQUFBNkQsYUFBQSxDQUFDNUIsZ0JBQWdCO1VBQ2Z4QixHQUFHLEVBQUUrQixNQUFNLENBQUNrRixNQUFNLENBQUMsQ0FBRTtVQUNyQnBELFFBQVEsRUFBRSxJQUFJLENBQUNqQyxLQUFLLENBQUNpQyxRQUFTO1VBQzlCN0IsU0FBUyxFQUFFLElBQUksQ0FBQ0osS0FBSyxDQUFDSSxTQUFVO1VBQ2hDeUIsWUFBWSxFQUFFdUQsQ0FBQyxLQUFLLENBQUU7VUFDdEJqRixNQUFNLEVBQUVBLE1BQU87VUFDZkssY0FBYyxFQUFFLElBQUksQ0FBQ1IsS0FBSyxDQUFDUSxjQUFlO1VBQzFDdUIsVUFBVSxFQUFFQSxDQUFBLEtBQU0sSUFBSSxDQUFDL0IsS0FBSyxDQUFDK0IsVUFBVSxDQUFDO1lBQUN6QixHQUFHLEVBQUVILE1BQU0sQ0FBQ2tGLE1BQU0sQ0FBQyxDQUFDO1lBQUVsQixhQUFhLEVBQUU7VUFBSSxDQUFDLENBQUU7VUFDckZ2RCxVQUFVLEVBQUUsSUFBSSxDQUFDWixLQUFLLENBQUNrRSxpQkFBaUIsS0FBSy9ELE1BQU0sQ0FBQ2tGLE1BQU0sQ0FBQztRQUFFLENBQzlELENBQUM7TUFFTixDQUFDLENBQ0MsQ0FBQztJQUVUO0VBQ0Y7RUFJQUMsZ0JBQWdCQSxDQUFDakIsS0FBSyxFQUFFO0lBQ3RCLElBQUlBLEtBQUssS0FBSyxJQUFJLENBQUN0RSxXQUFXLENBQUNzRSxLQUFLLENBQUNDLGFBQWEsRUFBRTtNQUNsRCxPQUFPaUIsT0FBTyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDekYsV0FBVyxDQUFDc0UsS0FBSyxDQUFDQyxhQUFhLENBQUM7SUFDOUQ7SUFFQSxPQUFPaUIsT0FBTyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDO0VBQzlCO0VBRUFDLGdCQUFnQkEsQ0FBQ3BCLEtBQUssRUFBRTtJQUN0QixJQUFJQSxLQUFLLEtBQUssSUFBSSxDQUFDdEUsV0FBVyxDQUFDc0UsS0FBSyxDQUFDQyxhQUFhLEVBQUU7TUFDbEQsT0FBT2lCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDRSxtQkFBVSxDQUFDQyxTQUFTLENBQUM7SUFDOUM7SUFFQSxPQUFPSixPQUFPLENBQUNDLE9BQU8sQ0FBQyxJQUFJLENBQUM7RUFDOUI7QUFDRjtBQUFDSSxPQUFBLENBQUFqSSxPQUFBLEdBQUFzRyxpQkFBQTtBQUFBdkYsZUFBQSxDQW5Ib0J1RixpQkFBaUIsZUFDakI7RUFDakI7RUFDQWdCLE9BQU8sRUFBRXJCLGtCQUFTLENBQUNpQyxPQUFPLENBQUNqQyxrQkFBUyxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsVUFBVTtFQUN2RHFCLFNBQVMsRUFBRXZCLGtCQUFTLENBQUNJLElBQUksQ0FBQ0YsVUFBVTtFQUNwQ0ksaUJBQWlCLEVBQUVOLGtCQUFTLENBQUNrQyxNQUFNLENBQUNoQyxVQUFVO0VBRTlDO0VBQ0ExRCxTQUFTLEVBQUV3RCxrQkFBUyxDQUFDQyxNQUFNLENBQUNDLFVBQVU7RUFDdEM3QixRQUFRLEVBQUUyQixrQkFBUyxDQUFDQyxNQUFNLENBQUNDLFVBQVU7RUFFckM7RUFDQXRELGNBQWMsRUFBRW9ELGtCQUFTLENBQUNHLElBQUksQ0FBQ0QsVUFBVTtFQUN6Qy9CLFVBQVUsRUFBRTZCLGtCQUFTLENBQUNHLElBQUksQ0FBQ0QsVUFBVTtFQUNyQ2UsZ0JBQWdCLEVBQUVqQixrQkFBUyxDQUFDRyxJQUFJLENBQUNELFVBQVU7RUFDM0NnQixvQkFBb0IsRUFBRWxCLGtCQUFTLENBQUNHLElBQUksQ0FBQ0Q7QUFDdkMsQ0FBQztBQUFBcEYsZUFBQSxDQWhCa0J1RixpQkFBaUIsV0FrQnJCO0VBQ2JLLGFBQWEsRUFBRWhGLE1BQU0sQ0FBQyxlQUFlO0FBQ3ZDLENBQUM7QUFBQVosZUFBQSxDQXBCa0J1RixpQkFBaUIsZ0JBc0JoQkEsaUJBQWlCLENBQUNJLEtBQUssQ0FBQ0MsYUFBYTtBQUFBNUYsZUFBQSxDQXRCdEN1RixpQkFBaUIsZUF3QmpCQSxpQkFBaUIsQ0FBQ0ksS0FBSyxDQUFDQyxhQUFhIn0=