"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _eventKit = require("event-kit");
var _helpers = require("../helpers");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
var _repository = _interopRequireDefault(require("../models/repository"));
var _endpoint = require("../models/endpoint");
var _issueishDetailContainer = _interopRequireDefault(require("../containers/issueish-detail-container"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class IssueishDetailItem extends _react.Component {
  static buildURI({
    host,
    owner,
    repo,
    number,
    workdir
  }) {
    const encodeOptionalParam = param => param ? encodeURIComponent(param) : '';
    return 'atom-github://issueish/' + encodeURIComponent(host) + '/' + encodeURIComponent(owner) + '/' + encodeURIComponent(repo) + '/' + encodeURIComponent(number) + '?workdir=' + encodeOptionalParam(workdir);
  }
  constructor(props) {
    super(props);
    _defineProperty(this, "destroy", () => {
      /* istanbul ignore else */
      if (!this.isDestroyed) {
        this.emitter.emit('did-destroy');
        this.isDestroyed = true;
      }
    });
    _defineProperty(this, "onTabSelected", index => new Promise(resolve => {
      this.setState({
        selectedTab: index,
        initChangedFilePath: '',
        initChangedFilePosition: 0
      }, resolve);
    }));
    _defineProperty(this, "onOpenFilesTab", callback => this.emitter.on('on-open-files-tab', callback));
    (0, _helpers.autobind)(this, 'switchToIssueish', 'handleTitleChanged');
    this.emitter = new _eventKit.Emitter();
    this.title = `${this.props.owner}/${this.props.repo}#${this.props.issueishNumber}`;
    this.hasTerminatedPendingState = false;
    const repository = this.props.workingDirectory === '' ? _repository.default.absent() : this.props.workdirContextPool.add(this.props.workingDirectory).getRepository();
    this.state = {
      host: this.props.host,
      owner: this.props.owner,
      repo: this.props.repo,
      issueishNumber: this.props.issueishNumber,
      repository,
      initChangedFilePath: '',
      initChangedFilePosition: 0,
      selectedTab: this.props.initSelectedTab
    };
    if (repository.isAbsent()) {
      this.switchToIssueish(this.props.owner, this.props.repo, this.props.issueishNumber);
    }
    this.refEditor = new _refHolder.default();
    this.refEditor.observe(editor => {
      if (editor.isAlive()) {
        this.emitter.emit('did-change-embedded-text-editor', editor);
      }
    });
  }
  render() {
    return _react.default.createElement(_issueishDetailContainer.default, {
      endpoint: (0, _endpoint.getEndpoint)(this.state.host),
      owner: this.state.owner,
      repo: this.state.repo,
      issueishNumber: this.state.issueishNumber,
      initChangedFilePath: this.state.initChangedFilePath,
      initChangedFilePosition: this.state.initChangedFilePosition,
      selectedTab: this.state.selectedTab,
      onTabSelected: this.onTabSelected,
      onOpenFilesTab: this.onOpenFilesTab,
      repository: this.state.repository,
      workspace: this.props.workspace,
      loginModel: this.props.loginModel,
      onTitleChange: this.handleTitleChanged,
      switchToIssueish: this.switchToIssueish,
      commands: this.props.commands,
      keymaps: this.props.keymaps,
      tooltips: this.props.tooltips,
      config: this.props.config,
      destroy: this.destroy,
      itemType: this.constructor,
      refEditor: this.refEditor,
      reportRelayError: this.props.reportRelayError
    });
  }
  async switchToIssueish(owner, repo, issueishNumber) {
    const pool = this.props.workdirContextPool;
    const prev = {
      owner: this.state.owner,
      repo: this.state.repo,
      issueishNumber: this.state.issueishNumber
    };
    const nextRepository = (await this.state.repository.hasGitHubRemote(this.state.host, owner, repo)) ? this.state.repository : (await pool.getMatchingContext(this.state.host, owner, repo)).getRepository();
    await new Promise(resolve => {
      this.setState((prevState, props) => {
        if (pool === props.workdirContextPool && prevState.owner === prev.owner && prevState.repo === prev.repo && prevState.issueishNumber === prev.issueishNumber) {
          (0, _reporterProxy.addEvent)('open-issueish-in-pane', {
            package: 'github',
            from: 'issueish-link',
            target: 'current-tab'
          });
          return {
            owner,
            repo,
            issueishNumber,
            repository: nextRepository
          };
        }
        return {};
      }, resolve);
    });
  }
  handleTitleChanged(title) {
    if (this.title !== title) {
      this.title = title;
      this.emitter.emit('did-change-title', title);
    }
  }
  onDidChangeTitle(cb) {
    return this.emitter.on('did-change-title', cb);
  }
  terminatePendingState() {
    if (!this.hasTerminatedPendingState) {
      this.emitter.emit('did-terminate-pending-state');
      this.hasTerminatedPendingState = true;
    }
  }
  onDidTerminatePendingState(callback) {
    return this.emitter.on('did-terminate-pending-state', callback);
  }
  onDidDestroy(callback) {
    return this.emitter.on('did-destroy', callback);
  }
  serialize() {
    return {
      uri: IssueishDetailItem.buildURI({
        host: this.props.host,
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.issueishNumber,
        workdir: this.props.workingDirectory
      }),
      selectedTab: this.state.selectedTab,
      deserializer: 'IssueishDetailItem'
    };
  }
  getTitle() {
    return this.title;
  }
  observeEmbeddedTextEditor(cb) {
    this.refEditor.map(editor => editor.isAlive() && cb(editor));
    return this.emitter.on('did-change-embedded-text-editor', cb);
  }
  openFilesTab({
    changedFilePath,
    changedFilePosition
  }) {
    this.setState({
      selectedTab: IssueishDetailItem.tabs.FILES,
      initChangedFilePath: changedFilePath,
      initChangedFilePosition: changedFilePosition
    }, () => {
      this.emitter.emit('on-open-files-tab', {
        changedFilePath,
        changedFilePosition
      });
    });
  }
}
exports.default = IssueishDetailItem;
_defineProperty(IssueishDetailItem, "tabs", {
  OVERVIEW: 0,
  BUILD_STATUS: 1,
  COMMITS: 2,
  FILES: 3
});
_defineProperty(IssueishDetailItem, "propTypes", {
  // Issueish selection criteria
  // Parsed from item URI
  host: _propTypes.default.string.isRequired,
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  issueishNumber: _propTypes.default.number.isRequired,
  workingDirectory: _propTypes.default.string.isRequired,
  // Package models
  workdirContextPool: _propTypes2.WorkdirContextPoolPropType.isRequired,
  loginModel: _propTypes2.GithubLoginModelPropType.isRequired,
  initSelectedTab: _propTypes.default.oneOf(Object.keys(IssueishDetailItem.tabs).map(k => IssueishDetailItem.tabs[k])),
  // Atom environment
  workspace: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  keymaps: _propTypes.default.object.isRequired,
  tooltips: _propTypes.default.object.isRequired,
  config: _propTypes.default.object.isRequired,
  // Action methods
  reportRelayError: _propTypes.default.func.isRequired
});
_defineProperty(IssueishDetailItem, "defaultProps", {
  initSelectedTab: IssueishDetailItem.tabs.OVERVIEW
});
_defineProperty(IssueishDetailItem, "uriPattern", 'atom-github://issueish/{host}/{owner}/{repo}/{issueishNumber}?workdir={workingDirectory}');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9ldmVudEtpdCIsIl9oZWxwZXJzIiwiX3Byb3BUeXBlczIiLCJfcmVwb3J0ZXJQcm94eSIsIl9yZXBvc2l0b3J5IiwiX2VuZHBvaW50IiwiX2lzc3VlaXNoRGV0YWlsQ29udGFpbmVyIiwiX3JlZkhvbGRlciIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIl9kZWZpbmVQcm9wZXJ0eSIsImtleSIsInZhbHVlIiwiX3RvUHJvcGVydHlLZXkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJJc3N1ZWlzaERldGFpbEl0ZW0iLCJDb21wb25lbnQiLCJidWlsZFVSSSIsImhvc3QiLCJvd25lciIsInJlcG8iLCJudW1iZXIiLCJ3b3JrZGlyIiwiZW5jb2RlT3B0aW9uYWxQYXJhbSIsInBhcmFtIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImlzRGVzdHJveWVkIiwiZW1pdHRlciIsImVtaXQiLCJpbmRleCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0U3RhdGUiLCJzZWxlY3RlZFRhYiIsImluaXRDaGFuZ2VkRmlsZVBhdGgiLCJpbml0Q2hhbmdlZEZpbGVQb3NpdGlvbiIsImNhbGxiYWNrIiwib24iLCJhdXRvYmluZCIsIkVtaXR0ZXIiLCJ0aXRsZSIsImlzc3VlaXNoTnVtYmVyIiwiaGFzVGVybWluYXRlZFBlbmRpbmdTdGF0ZSIsInJlcG9zaXRvcnkiLCJ3b3JraW5nRGlyZWN0b3J5IiwiUmVwb3NpdG9yeSIsImFic2VudCIsIndvcmtkaXJDb250ZXh0UG9vbCIsImFkZCIsImdldFJlcG9zaXRvcnkiLCJzdGF0ZSIsImluaXRTZWxlY3RlZFRhYiIsImlzQWJzZW50Iiwic3dpdGNoVG9Jc3N1ZWlzaCIsInJlZkVkaXRvciIsIlJlZkhvbGRlciIsIm9ic2VydmUiLCJlZGl0b3IiLCJpc0FsaXZlIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsImVuZHBvaW50IiwiZ2V0RW5kcG9pbnQiLCJvblRhYlNlbGVjdGVkIiwib25PcGVuRmlsZXNUYWIiLCJ3b3Jrc3BhY2UiLCJsb2dpbk1vZGVsIiwib25UaXRsZUNoYW5nZSIsImhhbmRsZVRpdGxlQ2hhbmdlZCIsImNvbW1hbmRzIiwia2V5bWFwcyIsInRvb2x0aXBzIiwiY29uZmlnIiwiZGVzdHJveSIsIml0ZW1UeXBlIiwicmVwb3J0UmVsYXlFcnJvciIsInBvb2wiLCJwcmV2IiwibmV4dFJlcG9zaXRvcnkiLCJoYXNHaXRIdWJSZW1vdGUiLCJnZXRNYXRjaGluZ0NvbnRleHQiLCJwcmV2U3RhdGUiLCJhZGRFdmVudCIsInBhY2thZ2UiLCJmcm9tIiwidGFyZ2V0Iiwib25EaWRDaGFuZ2VUaXRsZSIsImNiIiwidGVybWluYXRlUGVuZGluZ1N0YXRlIiwib25EaWRUZXJtaW5hdGVQZW5kaW5nU3RhdGUiLCJvbkRpZERlc3Ryb3kiLCJzZXJpYWxpemUiLCJ1cmkiLCJkZXNlcmlhbGl6ZXIiLCJnZXRUaXRsZSIsIm9ic2VydmVFbWJlZGRlZFRleHRFZGl0b3IiLCJtYXAiLCJvcGVuRmlsZXNUYWIiLCJjaGFuZ2VkRmlsZVBhdGgiLCJjaGFuZ2VkRmlsZVBvc2l0aW9uIiwidGFicyIsIkZJTEVTIiwiZXhwb3J0cyIsIk9WRVJWSUVXIiwiQlVJTERfU1RBVFVTIiwiQ09NTUlUUyIsIlByb3BUeXBlcyIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJXb3JrZGlyQ29udGV4dFBvb2xQcm9wVHlwZSIsIkdpdGh1YkxvZ2luTW9kZWxQcm9wVHlwZSIsIm9uZU9mIiwia2V5cyIsImsiLCJvYmplY3QiLCJmdW5jIl0sInNvdXJjZXMiOlsiaXNzdWVpc2gtZGV0YWlsLWl0ZW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtFbWl0dGVyfSBmcm9tICdldmVudC1raXQnO1xuXG5pbXBvcnQge2F1dG9iaW5kfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCB7R2l0aHViTG9naW5Nb2RlbFByb3BUeXBlLCBXb3JrZGlyQ29udGV4dFBvb2xQcm9wVHlwZX0gZnJvbSAnLi4vcHJvcC10eXBlcyc7XG5pbXBvcnQge2FkZEV2ZW50fSBmcm9tICcuLi9yZXBvcnRlci1wcm94eSc7XG5pbXBvcnQgUmVwb3NpdG9yeSBmcm9tICcuLi9tb2RlbHMvcmVwb3NpdG9yeSc7XG5pbXBvcnQge2dldEVuZHBvaW50fSBmcm9tICcuLi9tb2RlbHMvZW5kcG9pbnQnO1xuaW1wb3J0IElzc3VlaXNoRGV0YWlsQ29udGFpbmVyIGZyb20gJy4uL2NvbnRhaW5lcnMvaXNzdWVpc2gtZGV0YWlsLWNvbnRhaW5lcic7XG5pbXBvcnQgUmVmSG9sZGVyIGZyb20gJy4uL21vZGVscy9yZWYtaG9sZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSXNzdWVpc2hEZXRhaWxJdGVtIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHRhYnMgPSB7XG4gICAgT1ZFUlZJRVc6IDAsXG4gICAgQlVJTERfU1RBVFVTOiAxLFxuICAgIENPTU1JVFM6IDIsXG4gICAgRklMRVM6IDMsXG4gIH1cblxuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8vIElzc3VlaXNoIHNlbGVjdGlvbiBjcml0ZXJpYVxuICAgIC8vIFBhcnNlZCBmcm9tIGl0ZW0gVVJJXG4gICAgaG9zdDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIG93bmVyOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgcmVwbzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGlzc3VlaXNoTnVtYmVyOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgd29ya2luZ0RpcmVjdG9yeTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgLy8gUGFja2FnZSBtb2RlbHNcbiAgICB3b3JrZGlyQ29udGV4dFBvb2w6IFdvcmtkaXJDb250ZXh0UG9vbFByb3BUeXBlLmlzUmVxdWlyZWQsXG4gICAgbG9naW5Nb2RlbDogR2l0aHViTG9naW5Nb2RlbFByb3BUeXBlLmlzUmVxdWlyZWQsXG4gICAgaW5pdFNlbGVjdGVkVGFiOiBQcm9wVHlwZXMub25lT2YoXG4gICAgICBPYmplY3Qua2V5cyhJc3N1ZWlzaERldGFpbEl0ZW0udGFicykubWFwKGsgPT4gSXNzdWVpc2hEZXRhaWxJdGVtLnRhYnNba10pLFxuICAgICksXG5cbiAgICAvLyBBdG9tIGVudmlyb25tZW50XG4gICAgd29ya3NwYWNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29tbWFuZHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBrZXltYXBzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdG9vbHRpcHM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBjb25maWc6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcblxuICAgIC8vIEFjdGlvbiBtZXRob2RzXG4gICAgcmVwb3J0UmVsYXlFcnJvcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdFNlbGVjdGVkVGFiOiBJc3N1ZWlzaERldGFpbEl0ZW0udGFicy5PVkVSVklFVyxcbiAgfVxuXG4gIHN0YXRpYyB1cmlQYXR0ZXJuID0gJ2F0b20tZ2l0aHViOi8vaXNzdWVpc2gve2hvc3R9L3tvd25lcn0ve3JlcG99L3tpc3N1ZWlzaE51bWJlcn0/d29ya2Rpcj17d29ya2luZ0RpcmVjdG9yeX0nXG5cbiAgc3RhdGljIGJ1aWxkVVJJKHtob3N0LCBvd25lciwgcmVwbywgbnVtYmVyLCB3b3JrZGlyfSkge1xuICAgIGNvbnN0IGVuY29kZU9wdGlvbmFsUGFyYW0gPSBwYXJhbSA9PiAocGFyYW0gPyBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pIDogJycpO1xuXG4gICAgcmV0dXJuICdhdG9tLWdpdGh1YjovL2lzc3VlaXNoLycgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGhvc3QpICsgJy8nICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChvd25lcikgKyAnLycgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHJlcG8pICsgJy8nICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChudW1iZXIpICtcbiAgICAgICc/d29ya2Rpcj0nICsgZW5jb2RlT3B0aW9uYWxQYXJhbSh3b3JrZGlyKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGF1dG9iaW5kKHRoaXMsICdzd2l0Y2hUb0lzc3VlaXNoJywgJ2hhbmRsZVRpdGxlQ2hhbmdlZCcpO1xuXG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB0aGlzLnRpdGxlID0gYCR7dGhpcy5wcm9wcy5vd25lcn0vJHt0aGlzLnByb3BzLnJlcG99IyR7dGhpcy5wcm9wcy5pc3N1ZWlzaE51bWJlcn1gO1xuICAgIHRoaXMuaGFzVGVybWluYXRlZFBlbmRpbmdTdGF0ZSA9IGZhbHNlO1xuXG4gICAgY29uc3QgcmVwb3NpdG9yeSA9IHRoaXMucHJvcHMud29ya2luZ0RpcmVjdG9yeSA9PT0gJydcbiAgICAgID8gUmVwb3NpdG9yeS5hYnNlbnQoKVxuICAgICAgOiB0aGlzLnByb3BzLndvcmtkaXJDb250ZXh0UG9vbC5hZGQodGhpcy5wcm9wcy53b3JraW5nRGlyZWN0b3J5KS5nZXRSZXBvc2l0b3J5KCk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaG9zdDogdGhpcy5wcm9wcy5ob3N0LFxuICAgICAgb3duZXI6IHRoaXMucHJvcHMub3duZXIsXG4gICAgICByZXBvOiB0aGlzLnByb3BzLnJlcG8sXG4gICAgICBpc3N1ZWlzaE51bWJlcjogdGhpcy5wcm9wcy5pc3N1ZWlzaE51bWJlcixcbiAgICAgIHJlcG9zaXRvcnksXG4gICAgICBpbml0Q2hhbmdlZEZpbGVQYXRoOiAnJyxcbiAgICAgIGluaXRDaGFuZ2VkRmlsZVBvc2l0aW9uOiAwLFxuICAgICAgc2VsZWN0ZWRUYWI6IHRoaXMucHJvcHMuaW5pdFNlbGVjdGVkVGFiLFxuICAgIH07XG5cbiAgICBpZiAocmVwb3NpdG9yeS5pc0Fic2VudCgpKSB7XG4gICAgICB0aGlzLnN3aXRjaFRvSXNzdWVpc2godGhpcy5wcm9wcy5vd25lciwgdGhpcy5wcm9wcy5yZXBvLCB0aGlzLnByb3BzLmlzc3VlaXNoTnVtYmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZkVkaXRvciA9IG5ldyBSZWZIb2xkZXIoKTtcbiAgICB0aGlzLnJlZkVkaXRvci5vYnNlcnZlKGVkaXRvciA9PiB7XG4gICAgICBpZiAoZWRpdG9yLmlzQWxpdmUoKSkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZGlkLWNoYW5nZS1lbWJlZGRlZC10ZXh0LWVkaXRvcicsIGVkaXRvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxJc3N1ZWlzaERldGFpbENvbnRhaW5lclxuICAgICAgICBlbmRwb2ludD17Z2V0RW5kcG9pbnQodGhpcy5zdGF0ZS5ob3N0KX1cbiAgICAgICAgb3duZXI9e3RoaXMuc3RhdGUub3duZXJ9XG4gICAgICAgIHJlcG89e3RoaXMuc3RhdGUucmVwb31cbiAgICAgICAgaXNzdWVpc2hOdW1iZXI9e3RoaXMuc3RhdGUuaXNzdWVpc2hOdW1iZXJ9XG4gICAgICAgIGluaXRDaGFuZ2VkRmlsZVBhdGg9e3RoaXMuc3RhdGUuaW5pdENoYW5nZWRGaWxlUGF0aH1cbiAgICAgICAgaW5pdENoYW5nZWRGaWxlUG9zaXRpb249e3RoaXMuc3RhdGUuaW5pdENoYW5nZWRGaWxlUG9zaXRpb259XG4gICAgICAgIHNlbGVjdGVkVGFiPXt0aGlzLnN0YXRlLnNlbGVjdGVkVGFifVxuICAgICAgICBvblRhYlNlbGVjdGVkPXt0aGlzLm9uVGFiU2VsZWN0ZWR9XG4gICAgICAgIG9uT3BlbkZpbGVzVGFiPXt0aGlzLm9uT3BlbkZpbGVzVGFifVxuXG4gICAgICAgIHJlcG9zaXRvcnk9e3RoaXMuc3RhdGUucmVwb3NpdG9yeX1cbiAgICAgICAgd29ya3NwYWNlPXt0aGlzLnByb3BzLndvcmtzcGFjZX1cbiAgICAgICAgbG9naW5Nb2RlbD17dGhpcy5wcm9wcy5sb2dpbk1vZGVsfVxuXG4gICAgICAgIG9uVGl0bGVDaGFuZ2U9e3RoaXMuaGFuZGxlVGl0bGVDaGFuZ2VkfVxuICAgICAgICBzd2l0Y2hUb0lzc3VlaXNoPXt0aGlzLnN3aXRjaFRvSXNzdWVpc2h9XG4gICAgICAgIGNvbW1hbmRzPXt0aGlzLnByb3BzLmNvbW1hbmRzfVxuICAgICAgICBrZXltYXBzPXt0aGlzLnByb3BzLmtleW1hcHN9XG4gICAgICAgIHRvb2x0aXBzPXt0aGlzLnByb3BzLnRvb2x0aXBzfVxuICAgICAgICBjb25maWc9e3RoaXMucHJvcHMuY29uZmlnfVxuXG4gICAgICAgIGRlc3Ryb3k9e3RoaXMuZGVzdHJveX1cbiAgICAgICAgaXRlbVR5cGU9e3RoaXMuY29uc3RydWN0b3J9XG4gICAgICAgIHJlZkVkaXRvcj17dGhpcy5yZWZFZGl0b3J9XG4gICAgICAgIHJlcG9ydFJlbGF5RXJyb3I9e3RoaXMucHJvcHMucmVwb3J0UmVsYXlFcnJvcn1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHN3aXRjaFRvSXNzdWVpc2gob3duZXIsIHJlcG8sIGlzc3VlaXNoTnVtYmVyKSB7XG4gICAgY29uc3QgcG9vbCA9IHRoaXMucHJvcHMud29ya2RpckNvbnRleHRQb29sO1xuICAgIGNvbnN0IHByZXYgPSB7XG4gICAgICBvd25lcjogdGhpcy5zdGF0ZS5vd25lcixcbiAgICAgIHJlcG86IHRoaXMuc3RhdGUucmVwbyxcbiAgICAgIGlzc3VlaXNoTnVtYmVyOiB0aGlzLnN0YXRlLmlzc3VlaXNoTnVtYmVyLFxuICAgIH07XG5cbiAgICBjb25zdCBuZXh0UmVwb3NpdG9yeSA9IGF3YWl0IHRoaXMuc3RhdGUucmVwb3NpdG9yeS5oYXNHaXRIdWJSZW1vdGUodGhpcy5zdGF0ZS5ob3N0LCBvd25lciwgcmVwbylcbiAgICAgID8gdGhpcy5zdGF0ZS5yZXBvc2l0b3J5XG4gICAgICA6IChhd2FpdCBwb29sLmdldE1hdGNoaW5nQ29udGV4dCh0aGlzLnN0YXRlLmhvc3QsIG93bmVyLCByZXBvKSkuZ2V0UmVwb3NpdG9yeSgpO1xuXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUsIHByb3BzKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBwb29sID09PSBwcm9wcy53b3JrZGlyQ29udGV4dFBvb2wgJiZcbiAgICAgICAgICBwcmV2U3RhdGUub3duZXIgPT09IHByZXYub3duZXIgJiZcbiAgICAgICAgICBwcmV2U3RhdGUucmVwbyA9PT0gcHJldi5yZXBvICYmXG4gICAgICAgICAgcHJldlN0YXRlLmlzc3VlaXNoTnVtYmVyID09PSBwcmV2Lmlzc3VlaXNoTnVtYmVyXG4gICAgICAgICkge1xuICAgICAgICAgIGFkZEV2ZW50KCdvcGVuLWlzc3VlaXNoLWluLXBhbmUnLCB7cGFja2FnZTogJ2dpdGh1YicsIGZyb206ICdpc3N1ZWlzaC1saW5rJywgdGFyZ2V0OiAnY3VycmVudC10YWInfSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG93bmVyLFxuICAgICAgICAgICAgcmVwbyxcbiAgICAgICAgICAgIGlzc3VlaXNoTnVtYmVyLFxuICAgICAgICAgICAgcmVwb3NpdG9yeTogbmV4dFJlcG9zaXRvcnksXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH0sIHJlc29sdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlVGl0bGVDaGFuZ2VkKHRpdGxlKSB7XG4gICAgaWYgKHRoaXMudGl0bGUgIT09IHRpdGxlKSB7XG4gICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZGlkLWNoYW5nZS10aXRsZScsIHRpdGxlKTtcbiAgICB9XG4gIH1cblxuICBvbkRpZENoYW5nZVRpdGxlKGNiKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlci5vbignZGlkLWNoYW5nZS10aXRsZScsIGNiKTtcbiAgfVxuXG4gIHRlcm1pbmF0ZVBlbmRpbmdTdGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaGFzVGVybWluYXRlZFBlbmRpbmdTdGF0ZSkge1xuICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC10ZXJtaW5hdGUtcGVuZGluZy1zdGF0ZScpO1xuICAgICAgdGhpcy5oYXNUZXJtaW5hdGVkUGVuZGluZ1N0YXRlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBvbkRpZFRlcm1pbmF0ZVBlbmRpbmdTdGF0ZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIub24oJ2RpZC10ZXJtaW5hdGUtcGVuZGluZy1zdGF0ZScsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoIXRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgIHRoaXMuZW1pdHRlci5lbWl0KCdkaWQtZGVzdHJveScpO1xuICAgICAgdGhpcy5pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgb25EaWREZXN0cm95KGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlci5vbignZGlkLWRlc3Ryb3knLCBjYWxsYmFjayk7XG4gIH1cblxuICBzZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVyaTogSXNzdWVpc2hEZXRhaWxJdGVtLmJ1aWxkVVJJKHtcbiAgICAgICAgaG9zdDogdGhpcy5wcm9wcy5ob3N0LFxuICAgICAgICBvd25lcjogdGhpcy5wcm9wcy5vd25lcixcbiAgICAgICAgcmVwbzogdGhpcy5wcm9wcy5yZXBvLFxuICAgICAgICBudW1iZXI6IHRoaXMucHJvcHMuaXNzdWVpc2hOdW1iZXIsXG4gICAgICAgIHdvcmtkaXI6IHRoaXMucHJvcHMud29ya2luZ0RpcmVjdG9yeSxcbiAgICAgIH0pLFxuICAgICAgc2VsZWN0ZWRUYWI6IHRoaXMuc3RhdGUuc2VsZWN0ZWRUYWIsXG4gICAgICBkZXNlcmlhbGl6ZXI6ICdJc3N1ZWlzaERldGFpbEl0ZW0nLFxuICAgIH07XG4gIH1cblxuICBnZXRUaXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy50aXRsZTtcbiAgfVxuXG4gIG9ic2VydmVFbWJlZGRlZFRleHRFZGl0b3IoY2IpIHtcbiAgICB0aGlzLnJlZkVkaXRvci5tYXAoZWRpdG9yID0+IGVkaXRvci5pc0FsaXZlKCkgJiYgY2IoZWRpdG9yKSk7XG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlci5vbignZGlkLWNoYW5nZS1lbWJlZGRlZC10ZXh0LWVkaXRvcicsIGNiKTtcbiAgfVxuXG4gIG9wZW5GaWxlc1RhYih7Y2hhbmdlZEZpbGVQYXRoLCBjaGFuZ2VkRmlsZVBvc2l0aW9ufSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRUYWI6IElzc3VlaXNoRGV0YWlsSXRlbS50YWJzLkZJTEVTLFxuICAgICAgaW5pdENoYW5nZWRGaWxlUGF0aDogY2hhbmdlZEZpbGVQYXRoLFxuICAgICAgaW5pdENoYW5nZWRGaWxlUG9zaXRpb246IGNoYW5nZWRGaWxlUG9zaXRpb24sXG4gICAgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ29uLW9wZW4tZmlsZXMtdGFiJywge2NoYW5nZWRGaWxlUGF0aCwgY2hhbmdlZEZpbGVQb3NpdGlvbn0pO1xuICAgIH0pO1xuICB9XG5cbiAgb25UYWJTZWxlY3RlZCA9IGluZGV4ID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRUYWI6IGluZGV4LFxuICAgICAgaW5pdENoYW5nZWRGaWxlUGF0aDogJycsXG4gICAgICBpbml0Q2hhbmdlZEZpbGVQb3NpdGlvbjogMCxcbiAgICB9LCByZXNvbHZlKTtcbiAgfSk7XG5cbiAgb25PcGVuRmlsZXNUYWIgPSBjYWxsYmFjayA9PiB0aGlzLmVtaXR0ZXIub24oJ29uLW9wZW4tZmlsZXMtdGFiJywgY2FsbGJhY2spO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxRQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxXQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxjQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxXQUFBLEdBQUFMLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBUSxTQUFBLEdBQUFSLE9BQUE7QUFDQSxJQUFBUyx3QkFBQSxHQUFBUCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQVUsVUFBQSxHQUFBUixzQkFBQSxDQUFBRixPQUFBO0FBQTZDLFNBQUFF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