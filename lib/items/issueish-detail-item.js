"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _eventKit = require("event-kit");
var _helpers = require("../helpers");
var _propTypes2 = require("../prop-types");
var _reporterProxy = require("../reporter-proxy");
var _repository = _interopRequireDefault(require("../models/repository"));
var _endpoint = require("../models/endpoint");
var _issueishDetailContainer = _interopRequireDefault(require("../containers/issueish-detail-container"));
var _refHolder = _interopRequireDefault(require("../models/ref-holder"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class IssueishDetailItem extends _react.Component {
  static buildURI({
    host,
    owner,
    repo,
    number,
    workdir
  }) {
    const encodeOptionalParam = param => param ? encodeURIComponent(param) : '';
    return 'atom-github://issueish/' + encodeURIComponent(host) + '/' + encodeURIComponent(owner) + '/' + encodeURIComponent(repo) + '/' + encodeURIComponent(number) + '?workdir=' + encodeOptionalParam(workdir);
  }
  constructor(props) {
    super(props);
    _defineProperty(this, "destroy", () => {
      /* istanbul ignore else */
      if (!this.isDestroyed) {
        this.emitter.emit('did-destroy');
        this.isDestroyed = true;
      }
    });
    _defineProperty(this, "onTabSelected", index => new Promise(resolve => {
      this.setState({
        selectedTab: index,
        initChangedFilePath: '',
        initChangedFilePosition: 0
      }, resolve);
    }));
    _defineProperty(this, "onOpenFilesTab", callback => this.emitter.on('on-open-files-tab', callback));
    (0, _helpers.autobind)(this, 'switchToIssueish', 'handleTitleChanged');
    this.emitter = new _eventKit.Emitter();
    this.title = `${this.props.owner}/${this.props.repo}#${this.props.issueishNumber}`;
    this.hasTerminatedPendingState = false;
    const repository = this.props.workingDirectory === '' ? _repository.default.absent() : this.props.workdirContextPool.add(this.props.workingDirectory).getRepository();
    this.state = {
      host: this.props.host,
      owner: this.props.owner,
      repo: this.props.repo,
      issueishNumber: this.props.issueishNumber,
      repository,
      initChangedFilePath: '',
      initChangedFilePosition: 0,
      selectedTab: this.props.initSelectedTab
    };
    if (repository.isAbsent()) {
      this.switchToIssueish(this.props.owner, this.props.repo, this.props.issueishNumber);
    }
    this.refEditor = new _refHolder.default();
    this.refEditor.observe(editor => {
      if (editor.isAlive()) {
        this.emitter.emit('did-change-embedded-text-editor', editor);
      }
    });
  }
  render() {
    return _react.default.createElement(_issueishDetailContainer.default, {
      endpoint: (0, _endpoint.getEndpoint)(this.state.host),
      owner: this.state.owner,
      repo: this.state.repo,
      issueishNumber: this.state.issueishNumber,
      initChangedFilePath: this.state.initChangedFilePath,
      initChangedFilePosition: this.state.initChangedFilePosition,
      selectedTab: this.state.selectedTab,
      onTabSelected: this.onTabSelected,
      onOpenFilesTab: this.onOpenFilesTab,
      repository: this.state.repository,
      workspace: this.props.workspace,
      loginModel: this.props.loginModel,
      onTitleChange: this.handleTitleChanged,
      switchToIssueish: this.switchToIssueish,
      commands: this.props.commands,
      keymaps: this.props.keymaps,
      tooltips: this.props.tooltips,
      config: this.props.config,
      destroy: this.destroy,
      itemType: this.constructor,
      refEditor: this.refEditor,
      reportRelayError: this.props.reportRelayError
    });
  }
  async switchToIssueish(owner, repo, issueishNumber) {
    const pool = this.props.workdirContextPool;
    const prev = {
      owner: this.state.owner,
      repo: this.state.repo,
      issueishNumber: this.state.issueishNumber
    };
    const nextRepository = (await this.state.repository.hasGitHubRemote(this.state.host, owner, repo)) ? this.state.repository : (await pool.getMatchingContext(this.state.host, owner, repo)).getRepository();
    await new Promise(resolve => {
      this.setState((prevState, props) => {
        if (pool === props.workdirContextPool && prevState.owner === prev.owner && prevState.repo === prev.repo && prevState.issueishNumber === prev.issueishNumber) {
          (0, _reporterProxy.addEvent)('open-issueish-in-pane', {
            package: 'github',
            from: 'issueish-link',
            target: 'current-tab'
          });
          return {
            owner,
            repo,
            issueishNumber,
            repository: nextRepository
          };
        }
        return {};
      }, resolve);
    });
  }
  handleTitleChanged(title) {
    if (this.title !== title) {
      this.title = title;
      this.emitter.emit('did-change-title', title);
    }
  }
  onDidChangeTitle(cb) {
    return this.emitter.on('did-change-title', cb);
  }
  terminatePendingState() {
    if (!this.hasTerminatedPendingState) {
      this.emitter.emit('did-terminate-pending-state');
      this.hasTerminatedPendingState = true;
    }
  }
  onDidTerminatePendingState(callback) {
    return this.emitter.on('did-terminate-pending-state', callback);
  }
  onDidDestroy(callback) {
    return this.emitter.on('did-destroy', callback);
  }
  serialize() {
    return {
      uri: IssueishDetailItem.buildURI({
        host: this.props.host,
        owner: this.props.owner,
        repo: this.props.repo,
        number: this.props.issueishNumber,
        workdir: this.props.workingDirectory
      }),
      selectedTab: this.state.selectedTab,
      deserializer: 'IssueishDetailItem'
    };
  }
  getTitle() {
    return this.title;
  }
  observeEmbeddedTextEditor(cb) {
    this.refEditor.map(editor => editor.isAlive() && cb(editor));
    return this.emitter.on('did-change-embedded-text-editor', cb);
  }
  openFilesTab({
    changedFilePath,
    changedFilePosition
  }) {
    this.setState({
      selectedTab: IssueishDetailItem.tabs.FILES,
      initChangedFilePath: changedFilePath,
      initChangedFilePosition: changedFilePosition
    }, () => {
      this.emitter.emit('on-open-files-tab', {
        changedFilePath,
        changedFilePosition
      });
    });
  }
}
exports.default = IssueishDetailItem;
_defineProperty(IssueishDetailItem, "tabs", {
  OVERVIEW: 0,
  BUILD_STATUS: 1,
  COMMITS: 2,
  FILES: 3
});
_defineProperty(IssueishDetailItem, "propTypes", {
  // Issueish selection criteria
  // Parsed from item URI
  host: _propTypes.default.string.isRequired,
  owner: _propTypes.default.string.isRequired,
  repo: _propTypes.default.string.isRequired,
  issueishNumber: _propTypes.default.number.isRequired,
  workingDirectory: _propTypes.default.string.isRequired,
  // Package models
  workdirContextPool: _propTypes2.WorkdirContextPoolPropType.isRequired,
  loginModel: _propTypes2.GithubLoginModelPropType.isRequired,
  initSelectedTab: _propTypes.default.oneOf(Object.keys(IssueishDetailItem.tabs).map(k => IssueishDetailItem.tabs[k])),
  // Atom environment
  workspace: _propTypes.default.object.isRequired,
  commands: _propTypes.default.object.isRequired,
  keymaps: _propTypes.default.object.isRequired,
  tooltips: _propTypes.default.object.isRequired,
  config: _propTypes.default.object.isRequired,
  // Action methods
  reportRelayError: _propTypes.default.func.isRequired
});
_defineProperty(IssueishDetailItem, "defaultProps", {
  initSelectedTab: IssueishDetailItem.tabs.OVERVIEW
});
_defineProperty(IssueishDetailItem, "uriPattern", 'atom-github://issueish/{host}/{owner}/{repo}/{issueishNumber}?workdir={workingDirectory}');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcHJvcFR5cGVzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9ldmVudEtpdCIsIl9oZWxwZXJzIiwiX3Byb3BUeXBlczIiLCJfcmVwb3J0ZXJQcm94eSIsIl9yZXBvc2l0b3J5IiwiX2VuZHBvaW50IiwiX2lzc3VlaXNoRGV0YWlsQ29udGFpbmVyIiwiX3JlZkhvbGRlciIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiSXNzdWVpc2hEZXRhaWxJdGVtIiwiQ29tcG9uZW50IiwiYnVpbGRVUkkiLCJob3N0Iiwib3duZXIiLCJyZXBvIiwibnVtYmVyIiwid29ya2RpciIsImVuY29kZU9wdGlvbmFsUGFyYW0iLCJwYXJhbSIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJpc0Rlc3Ryb3llZCIsImVtaXR0ZXIiLCJlbWl0IiwiaW5kZXgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFN0YXRlIiwic2VsZWN0ZWRUYWIiLCJpbml0Q2hhbmdlZEZpbGVQYXRoIiwiaW5pdENoYW5nZWRGaWxlUG9zaXRpb24iLCJjYWxsYmFjayIsIm9uIiwiYXV0b2JpbmQiLCJFbWl0dGVyIiwidGl0bGUiLCJpc3N1ZWlzaE51bWJlciIsImhhc1Rlcm1pbmF0ZWRQZW5kaW5nU3RhdGUiLCJyZXBvc2l0b3J5Iiwid29ya2luZ0RpcmVjdG9yeSIsIlJlcG9zaXRvcnkiLCJhYnNlbnQiLCJ3b3JrZGlyQ29udGV4dFBvb2wiLCJhZGQiLCJnZXRSZXBvc2l0b3J5Iiwic3RhdGUiLCJpbml0U2VsZWN0ZWRUYWIiLCJpc0Fic2VudCIsInN3aXRjaFRvSXNzdWVpc2giLCJyZWZFZGl0b3IiLCJSZWZIb2xkZXIiLCJvYnNlcnZlIiwiZWRpdG9yIiwiaXNBbGl2ZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJlbmRwb2ludCIsImdldEVuZHBvaW50Iiwib25UYWJTZWxlY3RlZCIsIm9uT3BlbkZpbGVzVGFiIiwid29ya3NwYWNlIiwibG9naW5Nb2RlbCIsIm9uVGl0bGVDaGFuZ2UiLCJoYW5kbGVUaXRsZUNoYW5nZWQiLCJjb21tYW5kcyIsImtleW1hcHMiLCJ0b29sdGlwcyIsImNvbmZpZyIsImRlc3Ryb3kiLCJpdGVtVHlwZSIsInJlcG9ydFJlbGF5RXJyb3IiLCJwb29sIiwicHJldiIsIm5leHRSZXBvc2l0b3J5IiwiaGFzR2l0SHViUmVtb3RlIiwiZ2V0TWF0Y2hpbmdDb250ZXh0IiwicHJldlN0YXRlIiwiYWRkRXZlbnQiLCJwYWNrYWdlIiwiZnJvbSIsInRhcmdldCIsIm9uRGlkQ2hhbmdlVGl0bGUiLCJjYiIsInRlcm1pbmF0ZVBlbmRpbmdTdGF0ZSIsIm9uRGlkVGVybWluYXRlUGVuZGluZ1N0YXRlIiwib25EaWREZXN0cm95Iiwic2VyaWFsaXplIiwidXJpIiwiZGVzZXJpYWxpemVyIiwiZ2V0VGl0bGUiLCJvYnNlcnZlRW1iZWRkZWRUZXh0RWRpdG9yIiwibWFwIiwib3BlbkZpbGVzVGFiIiwiY2hhbmdlZEZpbGVQYXRoIiwiY2hhbmdlZEZpbGVQb3NpdGlvbiIsInRhYnMiLCJGSUxFUyIsImV4cG9ydHMiLCJPVkVSVklFVyIsIkJVSUxEX1NUQVRVUyIsIkNPTU1JVFMiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiV29ya2RpckNvbnRleHRQb29sUHJvcFR5cGUiLCJHaXRodWJMb2dpbk1vZGVsUHJvcFR5cGUiLCJvbmVPZiIsImtleXMiLCJrIiwib2JqZWN0IiwiZnVuYyJdLCJzb3VyY2VzIjpbImlzc3VlaXNoLWRldGFpbC1pdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7RW1pdHRlcn0gZnJvbSAnZXZlbnQta2l0JztcblxuaW1wb3J0IHthdXRvYmluZH0gZnJvbSAnLi4vaGVscGVycyc7XG5pbXBvcnQge0dpdGh1YkxvZ2luTW9kZWxQcm9wVHlwZSwgV29ya2RpckNvbnRleHRQb29sUHJvcFR5cGV9IGZyb20gJy4uL3Byb3AtdHlwZXMnO1xuaW1wb3J0IHthZGRFdmVudH0gZnJvbSAnLi4vcmVwb3J0ZXItcHJveHknO1xuaW1wb3J0IFJlcG9zaXRvcnkgZnJvbSAnLi4vbW9kZWxzL3JlcG9zaXRvcnknO1xuaW1wb3J0IHtnZXRFbmRwb2ludH0gZnJvbSAnLi4vbW9kZWxzL2VuZHBvaW50JztcbmltcG9ydCBJc3N1ZWlzaERldGFpbENvbnRhaW5lciBmcm9tICcuLi9jb250YWluZXJzL2lzc3VlaXNoLWRldGFpbC1jb250YWluZXInO1xuaW1wb3J0IFJlZkhvbGRlciBmcm9tICcuLi9tb2RlbHMvcmVmLWhvbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElzc3VlaXNoRGV0YWlsSXRlbSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyB0YWJzID0ge1xuICAgIE9WRVJWSUVXOiAwLFxuICAgIEJVSUxEX1NUQVRVUzogMSxcbiAgICBDT01NSVRTOiAyLFxuICAgIEZJTEVTOiAzLFxuICB9XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvLyBJc3N1ZWlzaCBzZWxlY3Rpb24gY3JpdGVyaWFcbiAgICAvLyBQYXJzZWQgZnJvbSBpdGVtIFVSSVxuICAgIGhvc3Q6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBvd25lcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHJlcG86IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBpc3N1ZWlzaE51bWJlcjogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIHdvcmtpbmdEaXJlY3Rvcnk6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgIC8vIFBhY2thZ2UgbW9kZWxzXG4gICAgd29ya2RpckNvbnRleHRQb29sOiBXb3JrZGlyQ29udGV4dFBvb2xQcm9wVHlwZS5pc1JlcXVpcmVkLFxuICAgIGxvZ2luTW9kZWw6IEdpdGh1YkxvZ2luTW9kZWxQcm9wVHlwZS5pc1JlcXVpcmVkLFxuICAgIGluaXRTZWxlY3RlZFRhYjogUHJvcFR5cGVzLm9uZU9mKFxuICAgICAgT2JqZWN0LmtleXMoSXNzdWVpc2hEZXRhaWxJdGVtLnRhYnMpLm1hcChrID0+IElzc3VlaXNoRGV0YWlsSXRlbS50YWJzW2tdKSxcbiAgICApLFxuXG4gICAgLy8gQXRvbSBlbnZpcm9ubWVudFxuICAgIHdvcmtzcGFjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbW1hbmRzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAga2V5bWFwczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRvb2x0aXBzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29uZmlnOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG5cbiAgICAvLyBBY3Rpb24gbWV0aG9kc1xuICAgIHJlcG9ydFJlbGF5RXJyb3I6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGluaXRTZWxlY3RlZFRhYjogSXNzdWVpc2hEZXRhaWxJdGVtLnRhYnMuT1ZFUlZJRVcsXG4gIH1cblxuICBzdGF0aWMgdXJpUGF0dGVybiA9ICdhdG9tLWdpdGh1YjovL2lzc3VlaXNoL3tob3N0fS97b3duZXJ9L3tyZXBvfS97aXNzdWVpc2hOdW1iZXJ9P3dvcmtkaXI9e3dvcmtpbmdEaXJlY3Rvcnl9J1xuXG4gIHN0YXRpYyBidWlsZFVSSSh7aG9zdCwgb3duZXIsIHJlcG8sIG51bWJlciwgd29ya2Rpcn0pIHtcbiAgICBjb25zdCBlbmNvZGVPcHRpb25hbFBhcmFtID0gcGFyYW0gPT4gKHBhcmFtID8gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSA6ICcnKTtcblxuICAgIHJldHVybiAnYXRvbS1naXRodWI6Ly9pc3N1ZWlzaC8nICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChob3N0KSArICcvJyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQob3duZXIpICsgJy8nICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChyZXBvKSArICcvJyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQobnVtYmVyKSArXG4gICAgICAnP3dvcmtkaXI9JyArIGVuY29kZU9wdGlvbmFsUGFyYW0od29ya2Rpcik7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBhdXRvYmluZCh0aGlzLCAnc3dpdGNoVG9Jc3N1ZWlzaCcsICdoYW5kbGVUaXRsZUNoYW5nZWQnKTtcblxuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgdGhpcy50aXRsZSA9IGAke3RoaXMucHJvcHMub3duZXJ9LyR7dGhpcy5wcm9wcy5yZXBvfSMke3RoaXMucHJvcHMuaXNzdWVpc2hOdW1iZXJ9YDtcbiAgICB0aGlzLmhhc1Rlcm1pbmF0ZWRQZW5kaW5nU3RhdGUgPSBmYWxzZTtcblxuICAgIGNvbnN0IHJlcG9zaXRvcnkgPSB0aGlzLnByb3BzLndvcmtpbmdEaXJlY3RvcnkgPT09ICcnXG4gICAgICA/IFJlcG9zaXRvcnkuYWJzZW50KClcbiAgICAgIDogdGhpcy5wcm9wcy53b3JrZGlyQ29udGV4dFBvb2wuYWRkKHRoaXMucHJvcHMud29ya2luZ0RpcmVjdG9yeSkuZ2V0UmVwb3NpdG9yeSgpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGhvc3Q6IHRoaXMucHJvcHMuaG9zdCxcbiAgICAgIG93bmVyOiB0aGlzLnByb3BzLm93bmVyLFxuICAgICAgcmVwbzogdGhpcy5wcm9wcy5yZXBvLFxuICAgICAgaXNzdWVpc2hOdW1iZXI6IHRoaXMucHJvcHMuaXNzdWVpc2hOdW1iZXIsXG4gICAgICByZXBvc2l0b3J5LFxuICAgICAgaW5pdENoYW5nZWRGaWxlUGF0aDogJycsXG4gICAgICBpbml0Q2hhbmdlZEZpbGVQb3NpdGlvbjogMCxcbiAgICAgIHNlbGVjdGVkVGFiOiB0aGlzLnByb3BzLmluaXRTZWxlY3RlZFRhYixcbiAgICB9O1xuXG4gICAgaWYgKHJlcG9zaXRvcnkuaXNBYnNlbnQoKSkge1xuICAgICAgdGhpcy5zd2l0Y2hUb0lzc3VlaXNoKHRoaXMucHJvcHMub3duZXIsIHRoaXMucHJvcHMucmVwbywgdGhpcy5wcm9wcy5pc3N1ZWlzaE51bWJlcik7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZFZGl0b3IgPSBuZXcgUmVmSG9sZGVyKCk7XG4gICAgdGhpcy5yZWZFZGl0b3Iub2JzZXJ2ZShlZGl0b3IgPT4ge1xuICAgICAgaWYgKGVkaXRvci5pc0FsaXZlKCkpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtZW1iZWRkZWQtdGV4dC1lZGl0b3InLCBlZGl0b3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8SXNzdWVpc2hEZXRhaWxDb250YWluZXJcbiAgICAgICAgZW5kcG9pbnQ9e2dldEVuZHBvaW50KHRoaXMuc3RhdGUuaG9zdCl9XG4gICAgICAgIG93bmVyPXt0aGlzLnN0YXRlLm93bmVyfVxuICAgICAgICByZXBvPXt0aGlzLnN0YXRlLnJlcG99XG4gICAgICAgIGlzc3VlaXNoTnVtYmVyPXt0aGlzLnN0YXRlLmlzc3VlaXNoTnVtYmVyfVxuICAgICAgICBpbml0Q2hhbmdlZEZpbGVQYXRoPXt0aGlzLnN0YXRlLmluaXRDaGFuZ2VkRmlsZVBhdGh9XG4gICAgICAgIGluaXRDaGFuZ2VkRmlsZVBvc2l0aW9uPXt0aGlzLnN0YXRlLmluaXRDaGFuZ2VkRmlsZVBvc2l0aW9ufVxuICAgICAgICBzZWxlY3RlZFRhYj17dGhpcy5zdGF0ZS5zZWxlY3RlZFRhYn1cbiAgICAgICAgb25UYWJTZWxlY3RlZD17dGhpcy5vblRhYlNlbGVjdGVkfVxuICAgICAgICBvbk9wZW5GaWxlc1RhYj17dGhpcy5vbk9wZW5GaWxlc1RhYn1cblxuICAgICAgICByZXBvc2l0b3J5PXt0aGlzLnN0YXRlLnJlcG9zaXRvcnl9XG4gICAgICAgIHdvcmtzcGFjZT17dGhpcy5wcm9wcy53b3Jrc3BhY2V9XG4gICAgICAgIGxvZ2luTW9kZWw9e3RoaXMucHJvcHMubG9naW5Nb2RlbH1cblxuICAgICAgICBvblRpdGxlQ2hhbmdlPXt0aGlzLmhhbmRsZVRpdGxlQ2hhbmdlZH1cbiAgICAgICAgc3dpdGNoVG9Jc3N1ZWlzaD17dGhpcy5zd2l0Y2hUb0lzc3VlaXNofVxuICAgICAgICBjb21tYW5kcz17dGhpcy5wcm9wcy5jb21tYW5kc31cbiAgICAgICAga2V5bWFwcz17dGhpcy5wcm9wcy5rZXltYXBzfVxuICAgICAgICB0b29sdGlwcz17dGhpcy5wcm9wcy50b29sdGlwc31cbiAgICAgICAgY29uZmlnPXt0aGlzLnByb3BzLmNvbmZpZ31cblxuICAgICAgICBkZXN0cm95PXt0aGlzLmRlc3Ryb3l9XG4gICAgICAgIGl0ZW1UeXBlPXt0aGlzLmNvbnN0cnVjdG9yfVxuICAgICAgICByZWZFZGl0b3I9e3RoaXMucmVmRWRpdG9yfVxuICAgICAgICByZXBvcnRSZWxheUVycm9yPXt0aGlzLnByb3BzLnJlcG9ydFJlbGF5RXJyb3J9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBhc3luYyBzd2l0Y2hUb0lzc3VlaXNoKG93bmVyLCByZXBvLCBpc3N1ZWlzaE51bWJlcikge1xuICAgIGNvbnN0IHBvb2wgPSB0aGlzLnByb3BzLndvcmtkaXJDb250ZXh0UG9vbDtcbiAgICBjb25zdCBwcmV2ID0ge1xuICAgICAgb3duZXI6IHRoaXMuc3RhdGUub3duZXIsXG4gICAgICByZXBvOiB0aGlzLnN0YXRlLnJlcG8sXG4gICAgICBpc3N1ZWlzaE51bWJlcjogdGhpcy5zdGF0ZS5pc3N1ZWlzaE51bWJlcixcbiAgICB9O1xuXG4gICAgY29uc3QgbmV4dFJlcG9zaXRvcnkgPSBhd2FpdCB0aGlzLnN0YXRlLnJlcG9zaXRvcnkuaGFzR2l0SHViUmVtb3RlKHRoaXMuc3RhdGUuaG9zdCwgb3duZXIsIHJlcG8pXG4gICAgICA/IHRoaXMuc3RhdGUucmVwb3NpdG9yeVxuICAgICAgOiAoYXdhaXQgcG9vbC5nZXRNYXRjaGluZ0NvbnRleHQodGhpcy5zdGF0ZS5ob3N0LCBvd25lciwgcmVwbykpLmdldFJlcG9zaXRvcnkoKTtcblxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlLCBwcm9wcykgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcG9vbCA9PT0gcHJvcHMud29ya2RpckNvbnRleHRQb29sICYmXG4gICAgICAgICAgcHJldlN0YXRlLm93bmVyID09PSBwcmV2Lm93bmVyICYmXG4gICAgICAgICAgcHJldlN0YXRlLnJlcG8gPT09IHByZXYucmVwbyAmJlxuICAgICAgICAgIHByZXZTdGF0ZS5pc3N1ZWlzaE51bWJlciA9PT0gcHJldi5pc3N1ZWlzaE51bWJlclxuICAgICAgICApIHtcbiAgICAgICAgICBhZGRFdmVudCgnb3Blbi1pc3N1ZWlzaC1pbi1wYW5lJywge3BhY2thZ2U6ICdnaXRodWInLCBmcm9tOiAnaXNzdWVpc2gtbGluaycsIHRhcmdldDogJ2N1cnJlbnQtdGFiJ30pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvd25lcixcbiAgICAgICAgICAgIHJlcG8sXG4gICAgICAgICAgICBpc3N1ZWlzaE51bWJlcixcbiAgICAgICAgICAgIHJlcG9zaXRvcnk6IG5leHRSZXBvc2l0b3J5LFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge307XG4gICAgICB9LCByZXNvbHZlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVRpdGxlQ2hhbmdlZCh0aXRsZSkge1xuICAgIGlmICh0aGlzLnRpdGxlICE9PSB0aXRsZSkge1xuICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtdGl0bGUnLCB0aXRsZSk7XG4gICAgfVxuICB9XG5cbiAgb25EaWRDaGFuZ2VUaXRsZShjYikge1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIub24oJ2RpZC1jaGFuZ2UtdGl0bGUnLCBjYik7XG4gIH1cblxuICB0ZXJtaW5hdGVQZW5kaW5nU3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmhhc1Rlcm1pbmF0ZWRQZW5kaW5nU3RhdGUpIHtcbiAgICAgIHRoaXMuZW1pdHRlci5lbWl0KCdkaWQtdGVybWluYXRlLXBlbmRpbmctc3RhdGUnKTtcbiAgICAgIHRoaXMuaGFzVGVybWluYXRlZFBlbmRpbmdTdGF0ZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgb25EaWRUZXJtaW5hdGVQZW5kaW5nU3RhdGUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyLm9uKCdkaWQtdGVybWluYXRlLXBlbmRpbmctc3RhdGUnLCBjYWxsYmFjayk7XG4gIH1cblxuICBkZXN0cm95ID0gKCkgPT4ge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKCF0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZGlkLWRlc3Ryb3knKTtcbiAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIG9uRGlkRGVzdHJveShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIub24oJ2RpZC1kZXN0cm95JywgY2FsbGJhY2spO1xuICB9XG5cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1cmk6IElzc3VlaXNoRGV0YWlsSXRlbS5idWlsZFVSSSh7XG4gICAgICAgIGhvc3Q6IHRoaXMucHJvcHMuaG9zdCxcbiAgICAgICAgb3duZXI6IHRoaXMucHJvcHMub3duZXIsXG4gICAgICAgIHJlcG86IHRoaXMucHJvcHMucmVwbyxcbiAgICAgICAgbnVtYmVyOiB0aGlzLnByb3BzLmlzc3VlaXNoTnVtYmVyLFxuICAgICAgICB3b3JrZGlyOiB0aGlzLnByb3BzLndvcmtpbmdEaXJlY3RvcnksXG4gICAgICB9KSxcbiAgICAgIHNlbGVjdGVkVGFiOiB0aGlzLnN0YXRlLnNlbGVjdGVkVGFiLFxuICAgICAgZGVzZXJpYWxpemVyOiAnSXNzdWVpc2hEZXRhaWxJdGVtJyxcbiAgICB9O1xuICB9XG5cbiAgZ2V0VGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGl0bGU7XG4gIH1cblxuICBvYnNlcnZlRW1iZWRkZWRUZXh0RWRpdG9yKGNiKSB7XG4gICAgdGhpcy5yZWZFZGl0b3IubWFwKGVkaXRvciA9PiBlZGl0b3IuaXNBbGl2ZSgpICYmIGNiKGVkaXRvcikpO1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIub24oJ2RpZC1jaGFuZ2UtZW1iZWRkZWQtdGV4dC1lZGl0b3InLCBjYik7XG4gIH1cblxuICBvcGVuRmlsZXNUYWIoe2NoYW5nZWRGaWxlUGF0aCwgY2hhbmdlZEZpbGVQb3NpdGlvbn0pIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkVGFiOiBJc3N1ZWlzaERldGFpbEl0ZW0udGFicy5GSUxFUyxcbiAgICAgIGluaXRDaGFuZ2VkRmlsZVBhdGg6IGNoYW5nZWRGaWxlUGF0aCxcbiAgICAgIGluaXRDaGFuZ2VkRmlsZVBvc2l0aW9uOiBjaGFuZ2VkRmlsZVBvc2l0aW9uLFxuICAgIH0sICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdHRlci5lbWl0KCdvbi1vcGVuLWZpbGVzLXRhYicsIHtjaGFuZ2VkRmlsZVBhdGgsIGNoYW5nZWRGaWxlUG9zaXRpb259KTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uVGFiU2VsZWN0ZWQgPSBpbmRleCA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkVGFiOiBpbmRleCxcbiAgICAgIGluaXRDaGFuZ2VkRmlsZVBhdGg6ICcnLFxuICAgICAgaW5pdENoYW5nZWRGaWxlUG9zaXRpb246IDAsXG4gICAgfSwgcmVzb2x2ZSk7XG4gIH0pO1xuXG4gIG9uT3BlbkZpbGVzVGFiID0gY2FsbGJhY2sgPT4gdGhpcy5lbWl0dGVyLm9uKCdvbi1vcGVuLWZpbGVzLXRhYicsIGNhbGxiYWNrKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUEsSUFBQUksUUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sY0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sV0FBQSxHQUFBTCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQVEsU0FBQSxHQUFBUixPQUFBO0FBQ0EsSUFBQVMsd0JBQUEsR0FBQVAsc0JBQUEs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