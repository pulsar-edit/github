"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getEndpoint = getEndpoint;
exports.DOTCOM = void 0;

// API endpoint for a GitHub instance, either dotcom or an Enterprise installation.
class Endpoint {
  constructor(host, apiHost, apiRouteParts) {
    this.host = host;
    this.apiHost = apiHost;
    this.apiRoute = apiRouteParts.map(encodeURIComponent).join('/');
  }

  getRestURI(...parts) {
    const sep = parts.length > 0 ? '/' : '';
    return this.getRestRoot() + sep + parts.map(encodeURIComponent).join('/');
  }

  getGraphQLRoot() {
    return this.getRestURI('graphql');
  }

  getRestRoot() {
    const sep = this.apiRoute !== '' ? '/' : '';
    return `https://${this.apiHost}${sep}${this.apiRoute}`;
  }

  getHost() {
    return this.host;
  }

  getLoginAccount() {
    return `https://${this.apiHost}`;
  }

} // API endpoint for GitHub.com


const DOTCOM = new Endpoint('github.com', 'api.github.com', []);
exports.DOTCOM = DOTCOM;

function getEndpoint(host) {
  if (host === 'github.com') {
    return DOTCOM;
  } else {
    return new Endpoint(host, host, ['api', 'v3']);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9tb2RlbHMvZW5kcG9pbnQuanMiXSwibmFtZXMiOlsiRW5kcG9pbnQiLCJjb25zdHJ1Y3RvciIsImhvc3QiLCJhcGlIb3N0IiwiYXBpUm91dGVQYXJ0cyIsImFwaVJvdXRlIiwibWFwIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImdldFJlc3RVUkkiLCJwYXJ0cyIsInNlcCIsImxlbmd0aCIsImdldFJlc3RSb290IiwiZ2V0R3JhcGhRTFJvb3QiLCJnZXRIb3N0IiwiZ2V0TG9naW5BY2NvdW50IiwiRE9UQ09NIiwiZ2V0RW5kcG9pbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQSxNQUFNQSxRQUFOLENBQWU7QUFDYkMsRUFBQUEsV0FBVyxDQUFDQyxJQUFELEVBQU9DLE9BQVAsRUFBZ0JDLGFBQWhCLEVBQStCO0FBQ3hDLFNBQUtGLElBQUwsR0FBWUEsSUFBWjtBQUNBLFNBQUtDLE9BQUwsR0FBZUEsT0FBZjtBQUNBLFNBQUtFLFFBQUwsR0FBZ0JELGFBQWEsQ0FBQ0UsR0FBZCxDQUFrQkMsa0JBQWxCLEVBQXNDQyxJQUF0QyxDQUEyQyxHQUEzQyxDQUFoQjtBQUNEOztBQUVEQyxFQUFBQSxVQUFVLENBQUMsR0FBR0MsS0FBSixFQUFXO0FBQ25CLFVBQU1DLEdBQUcsR0FBR0QsS0FBSyxDQUFDRSxNQUFOLEdBQWUsQ0FBZixHQUFtQixHQUFuQixHQUF5QixFQUFyQztBQUNBLFdBQU8sS0FBS0MsV0FBTCxLQUFxQkYsR0FBckIsR0FBMkJELEtBQUssQ0FBQ0osR0FBTixDQUFVQyxrQkFBVixFQUE4QkMsSUFBOUIsQ0FBbUMsR0FBbkMsQ0FBbEM7QUFDRDs7QUFFRE0sRUFBQUEsY0FBYyxHQUFHO0FBQ2YsV0FBTyxLQUFLTCxVQUFMLENBQWdCLFNBQWhCLENBQVA7QUFDRDs7QUFFREksRUFBQUEsV0FBVyxHQUFHO0FBQ1osVUFBTUYsR0FBRyxHQUFHLEtBQUtOLFFBQUwsS0FBa0IsRUFBbEIsR0FBdUIsR0FBdkIsR0FBNkIsRUFBekM7QUFDQSxXQUFRLFdBQVUsS0FBS0YsT0FBUSxHQUFFUSxHQUFJLEdBQUUsS0FBS04sUUFBUyxFQUFyRDtBQUNEOztBQUVEVSxFQUFBQSxPQUFPLEdBQUc7QUFDUixXQUFPLEtBQUtiLElBQVo7QUFDRDs7QUFFRGMsRUFBQUEsZUFBZSxHQUFHO0FBQ2hCLFdBQVEsV0FBVSxLQUFLYixPQUFRLEVBQS9CO0FBQ0Q7O0FBM0JZLEMsQ0E4QmY7OztBQUNPLE1BQU1jLE1BQU0sR0FBRyxJQUFJakIsUUFBSixDQUFhLFlBQWIsRUFBMkIsZ0JBQTNCLEVBQTZDLEVBQTdDLENBQWY7OztBQUVBLFNBQVNrQixXQUFULENBQXFCaEIsSUFBckIsRUFBMkI7QUFDaEMsTUFBSUEsSUFBSSxLQUFLLFlBQWIsRUFBMkI7QUFDekIsV0FBT2UsTUFBUDtBQUNELEdBRkQsTUFFTztBQUNMLFdBQU8sSUFBSWpCLFFBQUosQ0FBYUUsSUFBYixFQUFtQkEsSUFBbkIsRUFBeUIsQ0FBQyxLQUFELEVBQVEsSUFBUixDQUF6QixDQUFQO0FBQ0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBlbmRwb2ludCBmb3IgYSBHaXRIdWIgaW5zdGFuY2UsIGVpdGhlciBkb3Rjb20gb3IgYW4gRW50ZXJwcmlzZSBpbnN0YWxsYXRpb24uXG5jbGFzcyBFbmRwb2ludCB7XG4gIGNvbnN0cnVjdG9yKGhvc3QsIGFwaUhvc3QsIGFwaVJvdXRlUGFydHMpIHtcbiAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgIHRoaXMuYXBpSG9zdCA9IGFwaUhvc3Q7XG4gICAgdGhpcy5hcGlSb3V0ZSA9IGFwaVJvdXRlUGFydHMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpO1xuICB9XG5cbiAgZ2V0UmVzdFVSSSguLi5wYXJ0cykge1xuICAgIGNvbnN0IHNlcCA9IHBhcnRzLmxlbmd0aCA+IDAgPyAnLycgOiAnJztcbiAgICByZXR1cm4gdGhpcy5nZXRSZXN0Um9vdCgpICsgc2VwICsgcGFydHMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpO1xuICB9XG5cbiAgZ2V0R3JhcGhRTFJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzdFVSSSgnZ3JhcGhxbCcpO1xuICB9XG5cbiAgZ2V0UmVzdFJvb3QoKSB7XG4gICAgY29uc3Qgc2VwID0gdGhpcy5hcGlSb3V0ZSAhPT0gJycgPyAnLycgOiAnJztcbiAgICByZXR1cm4gYGh0dHBzOi8vJHt0aGlzLmFwaUhvc3R9JHtzZXB9JHt0aGlzLmFwaVJvdXRlfWA7XG4gIH1cblxuICBnZXRIb3N0KCkge1xuICAgIHJldHVybiB0aGlzLmhvc3Q7XG4gIH1cblxuICBnZXRMb2dpbkFjY291bnQoKSB7XG4gICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5hcGlIb3N0fWA7XG4gIH1cbn1cblxuLy8gQVBJIGVuZHBvaW50IGZvciBHaXRIdWIuY29tXG5leHBvcnQgY29uc3QgRE9UQ09NID0gbmV3IEVuZHBvaW50KCdnaXRodWIuY29tJywgJ2FwaS5naXRodWIuY29tJywgW10pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5kcG9pbnQoaG9zdCkge1xuICBpZiAoaG9zdCA9PT0gJ2dpdGh1Yi5jb20nKSB7XG4gICAgcmV0dXJuIERPVENPTTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEVuZHBvaW50KGhvc3QsIGhvc3QsIFsnYXBpJywgJ3YzJ10pO1xuICB9XG59XG4iXX0=